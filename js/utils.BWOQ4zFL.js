import{g as e}from"./vendor.BvIaTjIT.js";class t{constructor(){this.isMobileMenuOpen=!1,this.menuTimeline=null,this.lastScrollY=0,this.isScrolled=!1}init(){this.initNavbar(),this.initScrollEffects(),this.initContactForm(),this.initActiveNavLinks(),this.initScrollDownIndicator()}initScrollEffects(){const e=document.getElementById("navbar");if(!e)return;const t=()=>{const t=window.scrollY,n=t>50;n!==this.isScrolled&&(this.isScrolled=n,e.classList.toggle("scrolled",this.isScrolled)),this.lastScrollY=t};let n=!1;window.addEventListener("scroll",()=>{n||(window.requestAnimationFrame(()=>{t(),n=!1}),n=!0)}),t()}initActiveNavLinks(){const e=window.location.pathname;if(document.querySelectorAll("#navbar .nav-links a").forEach(t=>{t.pathname===e&&"/index.html"!==e&&"/"!==e&&t.classList.add("active-nav-link")}),document.body.classList.contains("homepage")){const e=document.querySelectorAll('#navbar .nav-links a[href^="#"]'),t=Array.from(e).map(e=>{const t=e.getAttribute("href");try{return document.querySelector(t)}catch(n){return null}}).filter(Boolean);if(0===t.length)return;const n=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target.getAttribute("id");e.forEach(e=>{e.classList.remove("active-nav-link"),e.getAttribute("href")===`#${n}`&&e.classList.add("active-nav-link")})}})},{rootMargin:"-50% 0px -50% 0px"});t.forEach(e=>n.observe(e))}}initNavbar(){const t=document.getElementById("hamburger-menu"),n=document.querySelector("#navbar .nav-links");if(!t||!n)return;const i=e.utils.toArray("#navbar .nav-links > *");this.menuTimeline=e.timeline({paused:!0,onReverseComplete:()=>{e.set(i,{clearProps:"all"})}}).to(i,{opacity:1,y:0,duration:.5,stagger:.08,ease:"power2.out"}),t.addEventListener("click",()=>this.toggleMobileMenu()),n.querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>{if(this.isMobileMenuOpen){const n=e.getAttribute("href");if(n.startsWith("#")){t.preventDefault();const e=document.querySelector(n);this.closeMobileMenu(),e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},400)}else this.closeMobileMenu()}})})}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen;const t=document.getElementById("hamburger-menu"),n=document.querySelector("#navbar .nav-links");t.classList.toggle("active",this.isMobileMenuOpen),n.classList.toggle("active",this.isMobileMenuOpen),document.body.style.overflow=this.isMobileMenuOpen?"hidden":"",this.isMobileMenuOpen?(e.set(e.utils.toArray("#navbar .nav-links > *"),{opacity:0,y:30}),this.menuTimeline.play()):this.menuTimeline.reverse()}closeMobileMenu(){this.isMobileMenuOpen&&this.toggleMobileMenu()}initContactForm(){const t=document.getElementById("contact-form");if(!t)return;const n=document.getElementById("form-confirmation"),i=t.querySelector(".submit-button"),s="https://docs.google.com/forms/d/e/YOUR_FORM_ID_HERE/formResponse",o="entry.YOUR_NAME_FIELD_ID",a="entry.YOUR_EMAIL_FIELD_ID",r="entry.YOUR_SUBJECT_FIELD_ID",c="entry.YOUR_MESSAGE_FIELD_ID",l=!s.includes("YOUR_FORM_ID_HERE");function h(t,i){n.textContent=i,n.style.backgroundColor=t?"var(--color-accent-secondary)":"#e74c3c",n.style.color=t?document.body.classList.contains("dark-mode")?"var(--dm-bg-deep)":"var(--lm-bg-deep)":"white",e.fromTo(n,{y:20,opacity:0,display:"block"},{y:0,opacity:1,duration:.5,ease:"power2.out",onComplete:()=>{setTimeout(()=>{e.to(n,{opacity:0,duration:.5,onComplete:()=>n.style.display="none"})},4e3)}})}t.addEventListener("submit",async e=>{if(e.preventDefault(),i.classList.contains("is-submitting"))return;i.classList.add("is-submitting"),i.disabled=!0;const n=i.innerHTML;i.innerHTML='Sending... <span class="loader-dots"><span>.</span><span>.</span><span>.</span></span>';const m=new FormData;m.append(o,t.name.value),m.append(a,t.email.value),m.append(r,t.subject.value),m.append(c,t.message.value);try{l?await fetch(s,{method:"POST",body:m,mode:"no-cors"}):await new Promise(e=>setTimeout(e,1500)),h(!0,"Message Sent! Thank you."),t.reset()}catch(d){h(!1,"Submission Error. Please try again.")}finally{i.classList.remove("is-submitting"),i.disabled=!1,i.innerHTML=n}})}initScrollDownIndicator(){const t=document.querySelector(".scroll-down-indicator");t&&(t.addEventListener("click",e=>{e.preventDefault();const n=t.getAttribute("href"),i=document.querySelector(n);i&&i.scrollIntoView({behavior:"smooth",block:"start"})}),t&&e.to(t,{y:-10,duration:2,ease:"power2.inOut",yoyo:!0,repeat:-1}))}}class n{constructor(){this.themes={light:"light",dark:"dark"},this.transitionDuration=300,this.isTransitioning=!1,this.systemThemeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.reducedMotionQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),this.handleSystemThemeChange=this.handleSystemThemeChange.bind(this),this.handleToggleChange=this.handleToggleChange.bind(this),this.init()}init(){this.setupThemeTransitions(),this.initializeTheme(),this.setupEventListeners(),this.setupSystemThemeDetection()}setupThemeTransitions(){const e=document.createElement("style");e.id="modern-theme-transitions",e.textContent=`\n            :root {\n                --theme-transition-duration: ${this.transitionDuration}ms;\n                --theme-transition-easing: cubic-bezier(0.4, 0, 0.2, 1);\n                --theme-transition-fast: 150ms;\n            }\n            \n            /* Apply transitions only to specific elements for better performance and immediate feedback */\n            body,\n            .card-style,\n            .content-section,\n            #navbar,\n            .focus-item,\n            .featured-product,\n            .team-card,\n            .advisor-card,\n            .contact-info,\n            #contact-form-container,\n            .cta-button,\n            .submit-button {\n                transition: \n                    background-color var(--theme-transition-fast) var(--theme-transition-easing),\n                    border-color var(--theme-transition-fast) var(--theme-transition-easing),\n                    color var(--theme-transition-fast) var(--theme-transition-easing),\n                    box-shadow var(--theme-transition-duration) var(--theme-transition-easing),\n                    text-shadow var(--theme-transition-fast) var(--theme-transition-easing);\n            }\n            \n            /* Immediate theme toggle feedback */\n            .theme-toggle-checkbox,\n            .theme-toggle-label,\n            .toggle-ball {\n                transition: \n                    background-color 0.2s var(--theme-transition-easing),\n                    transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\n            }\n            \n            @media (prefers-reduced-motion: reduce) {\n                body,\n                .card-style,\n                .content-section,\n                #navbar,\n                .focus-item,\n                .featured-product,\n                .team-card,\n                .advisor-card,\n                .contact-info,\n                #contact-form-container,\n                .cta-button,\n                .submit-button,\n                .theme-toggle-checkbox,\n                .theme-toggle-label,\n                .toggle-ball {\n                    transition: none !important;\n                }\n            }\n            \n            .theme-transition-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: var(--gradient-overlay);\n                opacity: 0;\n                pointer-events: none;\n                z-index: 9999;\n                transition: opacity var(--theme-transition-duration) var(--theme-transition-easing);\n            }\n            \n            .theme-transition-overlay.active {\n                opacity: 1;\n            }\n        `;const t=document.getElementById("modern-theme-transitions");t&&t.remove(),document.head.appendChild(e)}initializeTheme(){const e=this.getSavedTheme(),t=this.getSystemTheme(),n=e||t;this.applyTheme(n,!0)}setupEventListeners(){document.querySelectorAll(".theme-toggle-checkbox").forEach(e=>{e.addEventListener("change",this.handleToggleChange)})}setupSystemThemeDetection(){this.systemThemeQuery.addEventListener("change",this.handleSystemThemeChange)}handleSystemThemeChange(e){if(!localStorage.getItem("theme")){const t=e.matches?this.themes.dark:this.themes.light;this.switchTheme(t)}}handleToggleChange(e){const t=e.target.checked?this.themes.dark:this.themes.light;this.switchTheme(t)}async switchTheme(e){if(this.isTransitioning)return;if(this.getCurrentTheme()!==e){this.isTransitioning=!0;try{this.applyTheme(e),this.saveThemePreference(e),this.reducedMotionQuery.matches||await this.createTransitionEffect(),this.dispatchThemeChangeEvent(e)}catch(t){}finally{this.isTransitioning=!1}}}async createTransitionEffect(){return new Promise(e=>{const t=document.createElement("div");t.className="theme-transition-overlay",document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("active"),setTimeout(()=>{t.classList.remove("active"),setTimeout(()=>{document.body.removeChild(t),e()},this.transitionDuration)},this.transitionDuration/2)})})}applyTheme(e,t=!1){const n=e===this.themes.dark;document.body.classList.toggle("dark-mode",n);document.querySelectorAll(".theme-toggle-checkbox").forEach(e=>{e.checked=n}),this.setDerivedColors(n),n?this.applyEnhancedDarkMode():this.applyLightMode()}applyEnhancedDarkMode(){document.documentElement.style.setProperty("--current-theme","dark"),this.addGlowEffects(),this.updateSceneLighting(!0)}applyLightMode(){document.documentElement.style.setProperty("--current-theme","light"),this.removeGlowEffects(),this.updateSceneLighting(!1)}addGlowEffects(){document.querySelectorAll(".card, .product-card, .team-card").forEach(e=>{e.classList.contains("glow-effect")||e.classList.add("glow-effect")});document.querySelectorAll("h1, h2, h3").forEach(e=>{e.classList.contains("text-glow")||e.classList.add("text-glow")})}removeGlowEffects(){document.querySelectorAll(".glow-effect, .text-glow").forEach(e=>{e.classList.remove("glow-effect","text-glow")})}updateSceneLighting(e){window.sceneManager&&"function"==typeof window.sceneManager.updateThemeLighting&&window.sceneManager.updateThemeLighting(e)}setDerivedColors(e){const t=document.documentElement;getComputedStyle(t),e?(t.style.setProperty("--dm-bg-deep-rgb","10, 18, 8"),t.style.setProperty("--dm-bg-medium-rgb","26, 38, 23"),t.style.setProperty("--dm-bg-card-rgb","36, 51, 41"),t.style.setProperty("--dm-glow-color-rgb-values","50, 223, 110"),t.style.setProperty("--color-accent-rgb-values","50, 223, 110")):(t.style.setProperty("--lm-accent-primary-rgb-values","50, 142, 110"),t.style.setProperty("--color-accent-rgb-values","50, 142, 110"))}dispatchThemeChangeEvent(e){const t=e===this.themes.dark;window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:e,isDark:t,timestamp:Date.now()}}))}getCurrentTheme(){return document.body.classList.contains("dark-mode")?this.themes.dark:this.themes.light}getSavedTheme(){return localStorage.getItem("theme")}getSystemTheme(){return this.systemThemeQuery.matches?this.themes.dark:this.themes.light}saveThemePreference(e){localStorage.setItem("theme",e)}isDarkMode(){return this.getCurrentTheme()===this.themes.dark}toggleTheme(){const e=this.getCurrentTheme()===this.themes.dark?this.themes.light:this.themes.dark;this.switchTheme(e)}setTheme(e){this.themes[e]&&this.switchTheme(this.themes[e])}destroy(){this.systemThemeQuery.removeEventListener("change",this.handleSystemThemeChange);document.querySelectorAll(".theme-toggle-checkbox").forEach(e=>{e.removeEventListener("change",this.handleToggleChange)});const e=document.getElementById("modern-theme-transitions");e&&e.remove()}}export{n as M,t as U};
