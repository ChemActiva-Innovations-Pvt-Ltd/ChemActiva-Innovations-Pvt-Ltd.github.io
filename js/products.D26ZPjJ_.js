import"./theme.BtrVqNFs.js";/* empty css               *//* empty css                     *//* empty css                 */import{M as e,U as t}from"./utils.BWOQ4zFL.js";import{C as s,M as n}from"./core.CmOfqZsh.js";import"./vendor.BvIaTjIT.js";import"./features.wYy8LG9Z.js";class r{constructor(){this.cards=[],this.isInitialized=!1,this.eventListeners=new Map,this.intersectionObserver=null,this.touchStartY=0,this.touchEndY=0}init(){if(!this.isInitialized)try{this.initCards(),this.initIntersectionObserver(),this.initEventHandlers(),this.initAccessibility(),this.isInitialized=!0}catch(e){this.initFallbackMode()}}initCards(){document.querySelectorAll(".product-flash-card").forEach((e,t)=>{const s={element:e,index:t,isVisible:!1,isLoaded:!1,image:e.querySelector(".flash-card-image"),baseContent:e.querySelector(".flash-card-base-content"),overlay:e.querySelector(".flash-card-content-overlay"),expandableTags:e.querySelectorAll(".expandable-tag"),collapsibleSections:e.querySelectorAll(".collapsible-section"),actionButtons:e.querySelectorAll(".flash-card-btn"),stats:e.querySelectorAll(".stat-item")};this.cards.push(s),this.initCardInteractions(s)})}initCardInteractions(e){const t=()=>this.handleCardHover(e,!0),s=()=>this.handleCardHover(e,!1);e.element.addEventListener("mouseenter",t),e.element.addEventListener("mouseleave",s),this.eventListeners.set(`${e.index}-mouseenter`,t),this.eventListeners.set(`${e.index}-mouseleave`,s);const n=t=>this.handleTouchStart(t,e),r=t=>this.handleTouchEnd(t,e);e.element.addEventListener("touchstart",n,{passive:!0}),e.element.addEventListener("touchend",r,{passive:!0}),this.eventListeners.set(`${e.index}-touchstart`,n),this.eventListeners.set(`${e.index}-touchend`,r),e.expandableTags.forEach((t,s)=>{const n=t=>this.handleTagClick(t,e,s);t.addEventListener("click",n),this.eventListeners.set(`${e.index}-tag-${s}`,n)}),e.collapsibleSections.forEach((t,s)=>{const n=t.querySelector(".collapsible-trigger");if(n){const t=t=>this.handleCollapsibleClick(t,e,s);n.addEventListener("click",t),this.eventListeners.set(`${e.index}-collapsible-${s}`,t)}}),e.actionButtons.forEach((t,s)=>{const n=t=>this.handleActionClick(t,e,s);t.addEventListener("click",n),this.eventListeners.set(`${e.index}-action-${s}`,n)})}handleCardHover(e,t){if(!e.isLoaded)return;const s=e.overlay,n=e.image,r=e.baseContent;s&&(t?(this.animateCardHoverEnter(e,s,n,r),this.emitCardEvent("cardHoverEnter",e)):(this.animateCardHoverExit(e,s,n,r),this.emitCardEvent("cardHoverLeave",e)))}animateCardHoverEnter(e,t,s,n){t.style.transform="translateY(0)",t.style.opacity="1",t.style.backdropFilter="blur(10px)",s&&(s.style.transform="scale(1.1) rotate(1deg)",s.style.filter="brightness(1.1) contrast(1.05) saturate(1.1)"),n&&(n.style.transform="translateY(-5px)");t.querySelectorAll(".overlay-section").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(15px)",setTimeout(()=>{e.style.transition="all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",e.style.opacity="1",e.style.transform="translateY(0)",setTimeout(()=>{e.style.transform="translateY(-2px)",setTimeout(()=>{e.style.transform="translateY(0)"},100)},200)},100*t+100)});t.querySelectorAll(".stat-item").forEach((e,t)=>{setTimeout(()=>{e.style.transform="translateY(-3px) scale(1.05)",e.style.background="rgba(var(--color-accent-rgb-values), 0.15)";const t=e.querySelector("::before");t&&(t.style.left="100%")},50*t+200)});t.querySelectorAll(".expandable-tag").forEach((e,t)=>{setTimeout(()=>{e.style.transform="translateY(-2px) scale(1.02)"},30*t+300)})}animateCardHoverExit(e,t,s,n){t.style.transform="translateY(60%)",t.style.opacity="0",t.style.backdropFilter="blur(0px)",s&&(s.style.transform="scale(1) rotate(0deg)",s.style.filter="brightness(1) contrast(1) saturate(1)"),n&&(n.style.transform="translateY(0)");t.querySelectorAll(".overlay-section").forEach((e,t)=>{setTimeout(()=>{e.style.opacity="0",e.style.transform="translateY(10px)"},50*t)});t.querySelectorAll(".stat-item").forEach(e=>{e.style.transform="translateY(0) scale(1)",e.style.background="rgba(var(--color-accent-rgb-values), 0.08)"});t.querySelectorAll(".expandable-tag").forEach(e=>{e.style.transform="translateY(0) scale(1)"})}handleTouchStart(e,t){this.touchStartY=e.touches[0].clientY}handleTouchEnd(e,t){this.touchEndY=e.changedTouches[0].clientY;const s=this.touchStartY-this.touchEndY;Math.abs(s)<10&&this.toggleCardState(t)}toggleCardState(e){const t=e.overlay;if(!t)return;"1"===t.style.opacity?this.handleCardHover(e,!1):this.handleCardHover(e,!0)}handleTagClick(e,t,s){e.preventDefault(),e.stopPropagation();const n=t.expandableTags[s],r=n.classList.contains("active");r?n.classList.remove("active"):(t.expandableTags.forEach(e=>e.classList.remove("active")),n.classList.add("active")),this.emitCardEvent("tagClick",t,{tagIndex:s,isActive:!r,tagText:n.textContent})}handleCollapsibleClick(e,t,s){e.preventDefault(),e.stopPropagation();const n=t.collapsibleSections[s],r=n.querySelector(".collapsible-trigger"),a=n.querySelector(".collapsible-content"),i=r.querySelector(".trigger-icon");if(!r||!a)return;const o=!r.classList.contains("active");r.classList.toggle("active",o),r.setAttribute("aria-expanded",o.toString()),a.classList.toggle("active",o),a.setAttribute("aria-hidden",(!o).toString()),i&&(i.style.transform=o?"rotate(45deg)":"rotate(0deg)"),this.emitCardEvent("collapsibleToggle",t,{sectionIndex:s,isExpanded:o})}handleActionClick(e,t,s){e.preventDefault();const n=t.actionButtons[s],r=n.dataset.action||"primary",a=this.getProductIdFromCard(t);n.style.transform="scale(0.95)",setTimeout(()=>{n.style.transform="scale(1)"},100),this.emitCardEvent("actionClick",t,{buttonIndex:s,action:r,productId:a,buttonText:n.textContent})}getProductIdFromCard(e){const t=e.element.querySelector(".flash-card-title");if(t){const e=t.textContent.toLowerCase();if(e.includes("domestic")&&e.includes("oil"))return"domestic-oil-spill-kit";if(e.includes("marine")&&e.includes("oil"))return"marine-oil-spill-kit";if(e.includes("cellulose")||e.includes("nano"))return"cellulose-nanocrystals"}return"unknown-product"}initIntersectionObserver(){this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{const t=this.cards.find(t=>t.element===e.target);t&&(t.isVisible=e.isIntersecting,e.isIntersecting&&!t.isLoaded&&this.loadCard(t))})},{rootMargin:"50px 0px",threshold:.1}),this.cards.forEach(e=>{this.intersectionObserver.observe(e.element)})}loadCard(e){if(e.isLoaded)return;const t=200*e.index;setTimeout(()=>{const t=e.element.querySelector(".flash-card-skeleton");t&&(t.style.opacity="0",setTimeout(()=>t.remove(),300)),e.element.style.opacity="1",e.element.style.transform="translateY(0)",e.isLoaded=!0,this.emitCardEvent("cardLoaded",e)},t)}initEventHandlers(){window.addEventListener("resize",this.handleResize.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}handleResize(){this.cards.forEach(e=>{e.overlay&&(e.overlay.style.transform="translateY(60%)",e.overlay.style.opacity="0")})}handleKeyDown(e){"Escape"===e.key&&this.cards.forEach(e=>{this.handleCardHover(e,!1)})}initAccessibility(){this.cards.forEach((e,t)=>{e.element.setAttribute("role","article"),e.element.setAttribute("aria-label",`Product card ${t+1}`),e.element.setAttribute("tabindex","0");const s=()=>this.handleCardFocus(e),n=()=>this.handleCardBlur(e);e.element.addEventListener("focus",s),e.element.addEventListener("blur",n),this.eventListeners.set(`${e.index}-focus`,s),this.eventListeners.set(`${e.index}-blur`,n)})}handleCardFocus(e){e.element.style.outline="2px solid var(--color-accent-primary)",e.element.style.outlineOffset="4px"}handleCardBlur(e){e.element.style.outline="",e.element.style.outlineOffset=""}emitCardEvent(e,t,s={}){const n=new CustomEvent(`flashCard${e.charAt(0).toUpperCase()+e.slice(1)}`,{detail:{cardIndex:t.index,cardElement:t.element,productId:this.getProductIdFromCard(t),...s}});window.dispatchEvent(n)}initFallbackMode(){try{document.querySelectorAll(".product-flash-card").forEach((e,t)=>{const s=()=>{};e.addEventListener("click",s),this.eventListeners.set(`fallback-${t}`,s)}),this.isInitialized=!0}catch(e){}}revealCard(e){const t=this.cards[e];t&&this.handleCardHover(t,!0)}hideCard(e){const t=this.cards[e];t&&this.handleCardHover(t,!1)}getCardState(e){const t=this.cards[e];return t?{index:t.index,isVisible:t.isVisible,isLoaded:t.isLoaded,productId:this.getProductIdFromCard(t)}:null}cleanup(){this.eventListeners.forEach((e,t)=>{if("string"==typeof t&&t.includes("-")){const[s,n]=t.split("-"),r=this.cards[parseInt(s)];r&&r.element&&r.element.removeEventListener(n,e)}}),this.eventListeners.clear(),this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown),this.cards=[],this.isInitialized=!1}static isSupported(){return!(!window.IntersectionObserver||!window.addEventListener)}}document.addEventListener("DOMContentLoaded",()=>{try{new e;const a=new t;a.init();const i=new r;i.init();const o=new s;o.init();const l=new n;window.addEventListener("flashCardActionClick",e=>{const{cardIndex:t,action:s,productId:n,buttonText:r}=e.detail;if("quote"===s||"inquiry"===s){const e=new CustomEvent("productContactClick",{detail:{productId:n,action:s,cardIndex:t,productName:r}});window.dispatchEvent(e)}}),window.addEventListener("flashCardCollapsibleToggle",e=>{const{cardIndex:t,sectionIndex:s,isExpanded:n}=e.detail}),window.addEventListener("flashCardTagClick",e=>{const{cardIndex:t,tagIndex:s,isActive:n,tagText:r}=e.detail}),window.addEventListener("flashCardCardHoverEnter",e=>{const{cardIndex:t,productId:s}=e.detail}),window.addEventListener("flashCardCardHoverLeave",e=>{const{cardIndex:t,productId:s}=e.detail});const c=document.getElementById("current-year");c&&(c.textContent=(new Date).getFullYear()),window.productFlashCards=i,window.contactManager=o,window.uiAnimations=a,window.modernCursorEffects=l}catch(a){try{(new t).init()}catch(i){}document.querySelectorAll(".product-card, .product-card-enhanced, .product-flash-card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-5px)",e.style.transition="transform 0.3s ease"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)"})});document.querySelectorAll(".contact-button, .flash-card-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const s=e.dataset.action||"contact",n=e.closest(".product-card, .product-card-enhanced, .product-flash-card")?.querySelector("h3, .flash-card-title")?.textContent||"Product";alert(`Contact form for ${n} - ${s} (Enhanced features temporarily unavailable)`)})});const e=document.getElementById("current-year");e&&(e.textContent=(new Date).getFullYear())}});
