import{S as e,P as t,W as i,C as n,a,V as s,B as r,M as o,b as c,c as l,A as h,d,g as u}from"./vendor.BvIaTjIT.js";import{U as m,M as g}from"./utils.BWOQ4zFL.js";import{E as p,P as f}from"./features.wYy8LG9Z.js";const y={},v=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in y)return;y[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise((t,i)=>{n.addEventListener("load",t),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};class w{constructor(e={}){this.cache=new Map,this.cacheStats={hits:0,misses:0,totalRequests:0,evictions:0},this.maxCacheSize=e.maxCacheSize||50,this.maxCacheMemory=e.maxCacheMemory||52428800,this.defaultTTL=e.defaultTTL||18e5,this.cleanupInterval=e.cleanupInterval||3e5,this.priorities={CRITICAL:4,HIGH:3,NORMAL:2,LOW:1},this.assetConfigs={image:{ttl:36e5,priority:this.priorities.HIGH},css:{ttl:864e5,priority:this.priorities.NORMAL},javascript:{ttl:864e5,priority:this.priorities.NORMAL},font:{ttl:6048e5,priority:this.priorities.HIGH},logo:{ttl:864e5,priority:this.priorities.CRITICAL}},this.criticalAssets=new Set(["/assets/images/logo.png","/assets/images/logo-small_size.png"]),this.startCleanupTimer()}set(e,t,i={}){this.cacheStats.totalRequests++;const n=Date.now(),a=i.type||this.detectAssetType(e),s=this.assetConfigs[a]||this.assetConfigs.image,r={key:e,value:t,timestamp:n,lastAccessed:n,ttl:i.ttl||s.ttl,priority:i.priority||s.priority,type:a,size:this.calculateSize(t),hits:0,metadata:{url:i.url||e,loadTime:i.metadata?.loadTime||n,attempts:i.metadata?.attempts||1,...i.metadata}};return this.shouldEvict(r)&&this.evictLeastImportant(r),this.cache.set(e,r),this.isCriticalAsset(e)&&this.warmRelatedAssets(e),r}get(e){this.cacheStats.totalRequests++;const t=this.cache.get(e);return t?this.isExpired(t)?(this.cache.delete(e),this.cacheStats.misses++,null):(t.hits++,t.lastAccessed=Date.now(),this.cacheStats.hits++,t.value):(this.cacheStats.misses++,null)}has(e){const t=this.cache.get(e);return t&&!this.isExpired(t)}delete(e){const t=this.cache.delete(e);return t}clear(){this.cache.size;this.cache.clear(),this.resetStats()}async warmCache(e=[]){const t=e.length>0?e:Array.from(this.criticalAssets),i=[];for(const n of t)this.has(n)||i.push(this.preloadAsset(n));if(i.length>0){(await Promise.allSettled(i)).filter(e=>"fulfilled"===e.status).length}}async preloadAsset(e){try{return"image"===this.detectAssetType(e)?await this.preloadImage(e):await this.preloadGenericAsset(e)}catch(t){throw t}}async preloadImage(e){return new Promise((t,i)=>{const n=new Image;n.crossOrigin="anonymous";const a=setTimeout(()=>{i(new Error(`Timeout preloading image: ${e}`))},5e3);n.onload=()=>{clearTimeout(a);const i={type:"image",url:e,element:n,width:n.width,height:n.height,size:this.estimateImageSize(n)};this.set(e,i,{type:"image",priority:this.isCriticalAsset(e)?this.priorities.CRITICAL:this.priorities.HIGH,url:e}),t(i)},n.onerror=()=>{clearTimeout(a),i(new Error(`Failed to preload image: ${e}`))},n.src=e})}async preloadGenericAsset(e){const t=await fetch(e,{cache:"default"});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const i=await t.blob(),n={type:this.detectAssetType(e),url:e,blob:i,size:i.size};return this.set(e,n,{type:n.type,priority:this.isCriticalAsset(e)?this.priorities.CRITICAL:this.priorities.NORMAL,url:e}),n}getStats(){const e=this.getTotalCacheSize(),t=this.cacheStats.totalRequests>0?(this.cacheStats.hits/this.cacheStats.totalRequests*100).toFixed(2):0,i={},n={};return this.cache.forEach(e=>{i[e.type]=(i[e.type]||0)+1,n[e.priority]=(n[e.priority]||0)+1}),{totalEntries:this.cache.size,totalSize:e,formattedSize:this.formatBytes(e),hitRate:`${t}%`,hits:this.cacheStats.hits,misses:this.cacheStats.misses,totalRequests:this.cacheStats.totalRequests,evictions:this.cacheStats.evictions,assetTypes:i,priorities:n,memoryUsage:`${this.formatBytes(e)} / ${this.formatBytes(this.maxCacheMemory)}`,utilizationRate:`${(this.cache.size/this.maxCacheSize*100).toFixed(1)}%`}}getFrequentlyAccessed(e=10){return Array.from(this.cache.values()).sort((e,t)=>t.hits-e.hits).slice(0,e).map(e=>({key:e.key,hits:e.hits,type:e.type,size:this.formatBytes(e.size),priority:e.priority,lastAccessed:new Date(e.lastAccessed).toISOString()}))}optimize(){this.cache.size,this.getTotalCacheSize();this.cleanupExpired(),(this.cache.size>.8*this.maxCacheSize||this.getTotalCacheSize()>.8*this.maxCacheMemory)&&this.evictLeastValuable();this.cache.size,this.getTotalCacheSize()}shouldEvict(e){return this.cache.size>=this.maxCacheSize||this.getTotalCacheSize()+e.size>this.maxCacheMemory}evictLeastImportant(e){const t=Array.from(this.cache.values()).filter(e=>!this.isCriticalAsset(e.key));if(0===t.length)return;t.sort((e,t)=>this.calculateValueScore(e)-this.calculateValueScore(t));let i=0;for(;(this.cache.size>=this.maxCacheSize||this.getTotalCacheSize()+e.size>this.maxCacheMemory)&&i<t.length;){const e=t[i];this.cache.delete(e.key),this.cacheStats.evictions++,i++}}evictLeastValuable(){const e=Math.floor(.7*this.maxCacheSize),t=Math.floor(.7*this.maxCacheMemory),i=Array.from(this.cache.values()).filter(e=>!this.isCriticalAsset(e.key)).sort((e,t)=>this.calculateValueScore(e)-this.calculateValueScore(t));for(;(this.cache.size>e||this.getTotalCacheSize()>t)&&i.length>0;){const e=i.shift();this.cache.delete(e.key),this.cacheStats.evictions++}}calculateValueScore(e){const t=Date.now(),i=t-e.timestamp,n=t-e.lastAccessed;return 100*e.priority+Math.min(10*e.hits,100)+Math.max(0,100-i/864e5*10)+Math.max(0,100-n/36e5*5)}isExpired(e){return Date.now()-e.timestamp>e.ttl}isCriticalAsset(e){return this.criticalAssets.has(e)||Array.from(this.criticalAssets).some(t=>e.includes(t))}detectAssetType(e){const t=e.split(".").pop()?.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(t)?e.includes("logo")?"logo":"image":["css"].includes(t)?"css":["js"].includes(t)?"javascript":["woff","woff2","ttf","otf"].includes(t)?"font":"unknown"}calculateSize(e){return e?e.size?e.size:e.element&&e.element.src?this.estimateImageSize(e.element):e.blob?e.blob.size:2*JSON.stringify(e).length:0}estimateImageSize(e){return(e.width||400)*(e.height||300)*4}getTotalCacheSize(){let e=0;return this.cache.forEach(t=>{e+=t.size||0}),e}cleanupExpired(){this.cache.size;const e=[];this.cache.forEach((t,i)=>{this.isExpired(t)&&!this.isCriticalAsset(i)&&e.push(i)}),e.forEach(e=>this.cache.delete(e)),e.length}warmRelatedAssets(e){if(e.includes("logo")){Array.from(this.criticalAssets).filter(t=>t!==e&&t.includes("logo")).forEach(e=>{this.has(e)||this.preloadAsset(e).catch(()=>{})})}}startCleanupTimer(){setInterval(()=>{this.cleanupExpired(),(this.cache.size>.9*this.maxCacheSize||this.getTotalCacheSize()>.9*this.maxCacheMemory)&&this.optimize()},this.cleanupInterval)}resetStats(){this.cacheStats={hits:0,misses:0,totalRequests:0,evictions:0}}formatBytes(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}getCacheEntries(){return Array.from(this.cache.entries()).map(([e,t])=>({key:e,type:t.type,size:this.formatBytes(t.size),hits:t.hits,priority:t.priority,age:Date.now()-t.timestamp,lastAccessed:new Date(t.lastAccessed).toISOString()}))}cleanup(){this.cleanupTimer&&clearInterval(this.cleanupTimer),this.clear()}}class b{constructor(){this.loadingStates=new Map,this.assetCache=new Map,this.criticalAssets=["logo","hero-images"],this.loadingCallbacks=new Map,this.errorCallbacks=new Map,this.performanceMetrics={totalLoads:0,successfulLoads:0,failedLoads:0,averageLoadTime:0}}registerLoadingState(e,t={}){const i={assetId:e,status:"loading",attempts:0,lastAttempt:Date.now(),fallbackUsed:!1,errorDetails:null,startTime:Date.now(),...t};return this.loadingStates.set(e,i),this.notifyStateChange(e,i),i}updateLoadingState(e,t){const i=this.loadingStates.get(e);if(!i)return null;const n={...i,...t,lastAttempt:Date.now()};return this.loadingStates.set(e,n),this.notifyStateChange(e,n),this.updatePerformanceMetrics(n),n}getLoadingState(e){return this.loadingStates.get(e)||null}isLoading(e){const t=this.loadingStates.get(e);return t&&"loading"===t.status}isLoaded(e){const t=this.loadingStates.get(e);return t&&"loaded"===t.status}hasFailed(e){const t=this.loadingStates.get(e);return t&&"failed"===t.status}setCached(e,t={}){this.assetCache.set(e,{cached:!0,cacheTime:Date.now(),...t}),this.updateLoadingState(e,{status:"cached"})}isCached(e){const t=this.assetCache.get(e);return t&&t.cached}getCacheData(e){return this.assetCache.get(e)||null}shouldShowLoader(e,t={}){if("link"===t.navigationMethod||"back"===t.navigationMethod){if(this.criticalAssets.every(e=>this.isCached(e)))return!1}return Array.from(this.loadingStates.values()).some(e=>"loading"===e.status&&this.criticalAssets.includes(e.assetId))||"direct"===t.navigationMethod}handleLoadingFailure(e,t,i,n="default"){const a=this.getLoadingState(e);if(!a)return;const s={status:"failed",attempts:a.attempts+1,errorDetails:{message:i.message,type:i.name,timestamp:Date.now(),fallbackStrategy:n},fallbackUsed:!0};this.updateLoadingState(e,s);const r=this.errorCallbacks.get(e);r&&r(i,s)}onLoadingStateChange(e,t){this.loadingCallbacks.has(e)||this.loadingCallbacks.set(e,[]),this.loadingCallbacks.get(e).push(t)}onLoadingError(e,t){this.errorCallbacks.set(e,t)}notifyStateChange(e,t){const i=this.loadingCallbacks.get(e);i&&i.forEach(e=>{try{e(t)}catch(i){}})}updatePerformanceMetrics(e){if("loaded"===e.status||"failed"===e.status)if(this.performanceMetrics.totalLoads++,"loaded"===e.status){this.performanceMetrics.successfulLoads++;const t=Date.now()-e.startTime,i=this.performanceMetrics.averageLoadTime,n=this.performanceMetrics.successfulLoads;this.performanceMetrics.averageLoadTime=(i*(n-1)+t)/n}else this.performanceMetrics.failedLoads++}getPerformanceMetrics(){return{...this.performanceMetrics,successRate:this.performanceMetrics.totalLoads>0?this.performanceMetrics.successfulLoads/this.performanceMetrics.totalLoads*100:0}}clearLoadingState(e){this.loadingStates.delete(e),this.loadingCallbacks.delete(e),this.errorCallbacks.delete(e)}clearAllStates(){this.loadingStates.clear(),this.loadingCallbacks.clear(),this.errorCallbacks.clear()}getAllStates(){return Array.from(this.loadingStates.values())}getStatesByStatus(e){return Array.from(this.loadingStates.values()).filter(t=>t.status===e)}}class x{constructor(e={}){this.cacheManager=e.cacheManager||new w,this.loadingStateManager=e.loadingStateManager||new b,this.config={maxConcurrentLoads:e.maxConcurrentLoads||4,preloadTimeout:e.preloadTimeout||5e3,retryAttempts:e.retryAttempts||2,priorityThreshold:e.priorityThreshold||3,...e.config},this.priorities={CRITICAL:4,HIGH:3,NORMAL:2,LOW:1},this.criticalAssets=[{url:"/assets/images/logo.png",type:"image",priority:this.priorities.CRITICAL},{url:"/assets/images/logo-small_size.png",type:"image",priority:this.priorities.CRITICAL}],this.navigationPatterns={pageVisits:new Map,assetRequests:new Map,userBehavior:{averageSessionTime:0,commonPaths:[],deviceType:this.detectDeviceType()}},this.preloadQueue=[],this.activePreloads=new Set,this.preloadResults=new Map,this.initNavigationTracking()}async preloadCriticalAssets(){const e=this.criticalAssets.filter(e=>e.priority>=this.priorities.HIGH),t=e.map(e=>this.preloadAsset(e.url,{type:e.type,priority:e.priority,timeout:this.config.preloadTimeout/2,retries:this.config.retryAttempts+1})),i=await Promise.allSettled(t),n=i.filter(e=>"fulfilled"===e.status).length;return n>0&&this.warmCacheForCriticalAssets(),{total:e.length,successful:n,failed:e.length-n,results:i}}async preloadBasedOnPatterns(){const e=this.predictNextAssets(),t=this.prioritizePreloadCandidates(e).slice(0,this.config.maxConcurrentLoads);if(0===t.length)return{total:0,successful:0,failed:0};const i=t.map(e=>this.preloadAsset(e.url,{type:e.type,priority:e.priority,reason:"pattern-based"})),n=await Promise.allSettled(i),a=n.filter(e=>"fulfilled"===e.status).length;return{total:t.length,successful:a,failed:t.length-a,predictedAssets:e.length,results:n}}async preloadByPriority(e=this.priorities.NORMAL){const t=this.getAllAssetsByPriority(e);t.sort((e,t)=>t.priority-e.priority);const i=this.config.maxConcurrentLoads,n=[];for(let s=0;s<t.length;s+=i){const e=t.slice(s,s+i).map(e=>this.preloadAsset(e.url,{type:e.type,priority:e.priority,reason:"priority-based"})),a=await Promise.allSettled(e);n.push(...a),s+i<t.length&&await this.delay(100)}const a=n.filter(e=>"fulfilled"===e.status).length;return{total:t.length,successful:a,failed:t.length-a,results:n}}async preloadAsset(e,t={}){const i=this.generateAssetId(e);if(this.cacheManager.has(e))return this.cacheManager.get(e);if(this.activePreloads.has(i))return this.waitForPreload(i);this.loadingStateManager.registerLoadingState(i,{url:e,type:t.type||"unknown",priority:t.priority||this.priorities.NORMAL,reason:t.reason||"manual"}),this.activePreloads.add(i);try{const n=await this.performPreload(e,t);return this.cacheManager.set(e,n,{type:t.type,priority:t.priority,url:e,metadata:{preloadTime:Date.now(),reason:t.reason}}),this.loadingStateManager.updateLoadingState(i,{status:"loaded",loadTime:Date.now()}),this.preloadResults.set(i,{success:!0,asset:n}),n}catch(n){throw this.loadingStateManager.handleLoadingFailure(i,t.type,n,"preload-failed"),this.preloadResults.set(i,{success:!1,error:n}),n}finally{this.activePreloads.delete(i)}}async performPreload(e,t={}){const i=t.timeout||this.config.preloadTimeout,n=t.retries||this.config.retryAttempts;let a;for(let r=0;r<=n;r++)try{return r>0&&await this.delay(1e3*Math.pow(2,r)),await this.loadAssetWithTimeout(e,t,i)}catch(s){a=s}throw a}async loadAssetWithTimeout(e,t,i){return new Promise((n,a)=>{const s=setTimeout(()=>{a(new Error(`Preload timeout for: ${e}`))},i),r=t.type||this.detectAssetType(e);"image"===r?this.preloadImage(e,n,a,s):"css"===r?this.preloadCSS(e,n,a,s):this.preloadGeneric(e,n,a,s)})}preloadImage(e,t,i,n){const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{clearTimeout(n),t({type:"image",url:e,element:a,width:a.width,height:a.height,size:this.estimateImageSize(a)})},a.onerror=()=>{clearTimeout(n),i(new Error(`Failed to preload image: ${e}`))},a.src=e}preloadCSS(e,t,i,n){const a=document.createElement("link");a.rel="preload",a.as="style",a.href=e,a.onload=()=>{clearTimeout(n),t({type:"css",url:e,element:a})},a.onerror=()=>{clearTimeout(n),i(new Error(`Failed to preload CSS: ${e}`))},document.head.appendChild(a)}async preloadGeneric(e,t,i,n){try{const i=await fetch(e,{cache:"default"});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const a=await i.blob();clearTimeout(n),t({type:this.detectAssetType(e),url:e,blob:a,size:a.size})}catch(a){clearTimeout(n),i(a)}}predictNextAssets(){const e=window.location.pathname,t=[],i=this.navigationPatterns.pageVisits.get(e);i&&i.nextPages&&i.nextPages.forEach((e,n)=>{const a=e/i.totalVisits;a>.3&&t.push(...this.getPageAssets(n,a))}),"mobile"===this.navigationPatterns.userBehavior.deviceType&&t.push(...this.getMobileOptimizedAssets());const n=(new Date).getHours();return n>=9&&n<=17&&t.push(...this.getBusinessHourAssets()),t}getPageAssets(e,t=1){const i=[];return e.includes("products")?i.push({url:"/assets/images/products/Domestic_oil_spill_kit_1.webp",type:"image",priority:this.priorities.HIGH*t},{url:"/assets/images/products/Marine_oil_spill_kit.webp",type:"image",priority:this.priorities.HIGH*t},{url:"/assets/images/products/Nano_cellulose_1.webp",type:"image",priority:this.priorities.NORMAL*t}):e.includes("blog")&&i.push({url:"/css/articles.css",type:"css",priority:this.priorities.NORMAL*t}),i}getMobileOptimizedAssets(){return[{url:"/assets/images/logo-small_size.png",type:"image",priority:this.priorities.HIGH},...this.criticalAssets.filter(e=>e.url.includes("small")||e.url.includes("mobile"))]}getBusinessHourAssets(){return[{url:"/assets/images/products/Domestic_oil_spill_kit_1.webp",type:"image",priority:this.priorities.NORMAL},{url:"/assets/resources/domestic-oil-spill-kit-datasheet.pdf",type:"document",priority:this.priorities.LOW}]}prioritizePreloadCandidates(e){return e.filter(e=>!this.cacheManager.has(e.url)).sort((e,t)=>e.priority!==t.priority?t.priority-e.priority:(t.probability||0)-(e.probability||0))}getAllAssetsByPriority(e){const t=[...this.criticalAssets];return window.location.pathname.includes("products")&&t.push(...this.getProductPageAssets()),t.filter(t=>t.priority>=e)}getProductPageAssets(){return[{url:"/assets/images/products/Domestic_oil_spill_kit_1.webp",type:"image",priority:this.priorities.HIGH},{url:"/assets/images/products/Domestic_oil_spill_kit_collage_1.webp",type:"image",priority:this.priorities.NORMAL},{url:"/assets/images/products/Marine_oil_spill_kit.webp",type:"image",priority:this.priorities.HIGH},{url:"/assets/images/products/Nano_cellulose_1.webp",type:"image",priority:this.priorities.NORMAL},{url:"/assets/images/products/Nano_cellulose_2.webp",type:"image",priority:this.priorities.LOW},{url:"/css/products.css",type:"css",priority:this.priorities.NORMAL}]}async warmCacheForCriticalAssets(){const e=this.criticalAssets.filter(e=>e.priority>=this.priorities.HIGH).map(e=>e.url);await this.cacheManager.warmCache(e)}initNavigationTracking(){const e=window.location.pathname;this.trackPageVisit(e),window.addEventListener("beforeunload",()=>{this.trackPageExit(e)}),this.trackAssetRequests()}trackPageVisit(e){this.navigationPatterns.pageVisits.has(e)||this.navigationPatterns.pageVisits.set(e,{totalVisits:0,nextPages:new Map,assetRequests:new Set});this.navigationPatterns.pageVisits.get(e).totalVisits++;const t=document.referrer?new URL(document.referrer).pathname:null;if(t&&this.navigationPatterns.pageVisits.has(t)){const i=this.navigationPatterns.pageVisits.get(t),n=i.nextPages.get(e)||0;i.nextPages.set(e,n+1)}}trackPageExit(e){}trackAssetRequests(){const e=window.fetch;window.fetch=(...t)=>{const i=t[0];return"string"==typeof i&&this.isAssetUrl(i)&&this.recordAssetRequest(i),e.apply(window,t)}}recordAssetRequest(e){const t=window.location.pathname,i=this.navigationPatterns.pageVisits.get(t);i&&i.assetRequests.add(e);const n=this.navigationPatterns.assetRequests.get(e)||0;this.navigationPatterns.assetRequests.set(e,n+1)}generateAssetId(e){return e.replace(/[^a-zA-Z0-9]/g,"_")}detectAssetType(e){const t=e.split(".").pop()?.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(t)?"image":["css"].includes(t)?"css":["js"].includes(t)?"javascript":["woff","woff2","ttf","otf"].includes(t)?"font":["pdf","doc","docx"].includes(t)?"document":"unknown"}detectDeviceType(){const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|tablet/.test(e)?"mobile":"desktop"}isAssetUrl(e){return/\.(jpg|jpeg|png|gif|webp|svg|css|js|woff|woff2|ttf|otf|pdf)$/i.test(e)}estimateImageSize(e){return(e.width||400)*(e.height||300)*4}async waitForPreload(e){return new Promise((t,i)=>{const n=()=>{const a=this.preloadResults.get(e);a?a.success?t(a.asset):i(a.error):setTimeout(n,100)};n()})}delay(e){return new Promise(t=>setTimeout(t,e))}getStats(){const e=this.preloadResults.size,t=Array.from(this.preloadResults.values()).filter(e=>e.success).length;return{totalPreloads:e,successful:t,failed:e-t,successRate:e>0?(t/e*100).toFixed(2)+"%":"0%",activePreloads:this.activePreloads.size,cacheStats:this.cacheManager.getStats(),navigationPatterns:{pagesTracked:this.navigationPatterns.pageVisits.size,assetsTracked:this.navigationPatterns.assetRequests.size,deviceType:this.navigationPatterns.userBehavior.deviceType}}}cleanup(){this.activePreloads.clear(),this.preloadResults.clear(),window.fetch!==fetch&&(window.fetch=fetch)}}const S=new class{constructor(){this.cache=new Map,this.persistentCache=new Map,this.cacheStats={hits:0,misses:0,stores:0},this.initFromStorage(),this.setupCleanup()}initFromStorage(){try{const e=sessionStorage.getItem("globalAssetCache");if(e){const t=JSON.parse(e);Object.entries(t).forEach(([e,t])=>{this.isValidCacheEntry(t)&&this.persistentCache.set(e,t)})}}catch(e){}}isValidCacheEntry(e){return e&&e.timestamp&&Date.now()-e.timestamp<6e5}set(e,t,i={}){const n={asset:t,timestamp:Date.now(),type:i.type||"unknown",priority:i.priority||"normal",size:this.estimateSize(t),hits:0};this.cache.set(e,n),"critical"!==i.priority&&!1===i.persistent||this.persistentCache.set(e,{...n,asset:this.serializeAsset(t),serialized:!0}),this.cacheStats.stores++,this.persistToStorage()}get(e){let t=this.cache.get(e);if(t)return t.hits++,this.cacheStats.hits++,t.asset;if(t=this.persistentCache.get(e),t&&this.isValidCacheEntry(t)){t.hits++,this.cacheStats.hits++;const i=t.serialized?this.deserializeAsset(t.asset,t.type):t.asset;return this.cache.set(e,{...t,asset:i,serialized:!1}),i}return this.cacheStats.misses++,null}has(e){return this.cache.has(e)||this.persistentCache.has(e)&&this.isValidCacheEntry(this.persistentCache.get(e))}serializeAsset(e){if(!e)return null;try{if("image"===e.type&&e.element)return{type:"image",src:e.element.src,width:e.width,height:e.height};if("css"===e.type&&e.element)return{type:"css",href:e.element.href};if(e.url)return{type:e.type,url:e.url}}catch(t){}return null}deserializeAsset(e,t){if(!e)return null;try{if("image"===t&&e.src){const t=new Image;return t.src=e.src,t.crossOrigin="anonymous",{type:"image",element:t,width:e.width,height:e.height,url:e.src}}if("css"===t&&e.href){const t=document.querySelector(`link[href="${e.href}"]`);if(t)return{type:"css",element:t,url:e.href}}}catch(i){}return null}estimateSize(e){return e?e.size?e.size:e.width&&e.height?e.width*e.height*4:e.element&&e.element.src?e.element.src.length:1024:0}persistToStorage(){try{const e={};this.persistentCache.forEach((t,i)=>{t.serialized&&t.asset&&(e[i]={asset:t.asset,timestamp:t.timestamp,type:t.type,priority:t.priority,hits:t.hits})}),sessionStorage.setItem("globalAssetCache",JSON.stringify(e))}catch(e){}}async preloadCriticalAssets(){const e=[{key:"logo-main",url:"/assets/images/logo.png",type:"image"},{key:"logo-small",url:"/assets/images/logo-small_size.png",type:"image"}].map(async e=>{if(!this.has(e.key))try{const t=await this.loadAsset(e.url,e.type);this.set(e.key,t,{type:e.type,priority:"critical",persistent:!0})}catch(t){}});await Promise.allSettled(e)}async loadAsset(e,t,i=3e3){return new Promise((n,a)=>{const s=setTimeout(()=>{a(new Error(`Timeout loading ${t}: ${e}`))},i);if("image"===t){const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{clearTimeout(s),n({type:"image",element:t,url:e,width:t.width,height:t.height,size:this.estimateSize({width:t.width,height:t.height})})},t.onerror=()=>{clearTimeout(s),a(new Error(`Failed to load image: ${e}`))},t.src=e}else fetch(e).then(e=>{if(clearTimeout(s),!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.blob()}).then(i=>{n({type:t,url:e,blob:i,size:i.size})}).catch(e=>{clearTimeout(s),a(e)})})}async getAvailableLogo(){const e=["logo-main","logo-public","logo-small"];for(const n of e){const e=this.get(n);if(e)return e}const t=["/assets/images/logo.png","/assets/images/logo-small_size.png"];for(let n=0;n<t.length;n++)try{const i=await this.loadAsset(t[n],"image",2e3);return this.set(e[n],i,{type:"image",priority:"critical",persistent:!0}),i}catch(i){continue}throw new Error("No logo could be loaded")}setupCleanup(){window.addEventListener("beforeunload",()=>{this.persistToStorage()}),setInterval(()=>{this.cleanup()},3e5)}cleanup(){const e=6e5,t=Date.now();for(const[i,n]of this.cache.entries())t-n.timestamp>e&&this.cache.delete(i);for(const[i,n]of this.persistentCache.entries())t-n.timestamp>e&&this.persistentCache.delete(i);this.persistToStorage()}getStats(){const e=this.cache.size,t=this.persistentCache.size,i=this.cacheStats.hits+this.cacheStats.misses>0?(this.cacheStats.hits/(this.cacheStats.hits+this.cacheStats.misses)*100).toFixed(2)+"%":"0%";return{memoryCache:e,persistentCache:t,totalHits:this.cacheStats.hits,totalMisses:this.cacheStats.misses,totalStores:this.cacheStats.stores,hitRate:i}}clear(){this.cache.clear(),this.persistentCache.clear();try{sessionStorage.removeItem("globalAssetCache")}catch(e){}}getFrequentlyAccessed(e=10){return[...Array.from(this.cache.entries()),...Array.from(this.persistentCache.entries())].sort((e,t)=>(t[1].hits||0)-(e[1].hits||0)).slice(0,e).map(([e,t])=>({key:e,hits:t.hits||0,type:t.type,priority:t.priority}))}};class C{constructor(e={}){this.cacheManager=e.cacheManager||new w,this.loadingStateManager=e.loadingStateManager||new b,this.globalCache=S,this.assetPreloader=e.assetPreloader||new x({cacheManager:this.cacheManager,loadingStateManager:this.loadingStateManager,globalCache:this.globalCache}),this.loadingPromises=new Map,this.retryAttempts=new Map,this.maxRetries=3,this.baseRetryDelay=1e3,this.criticalAssets=["/assets/images/logo.png","/assets/images/logo-small_size.png"]}async preloadCriticalAssets(){try{return(await this.assetPreloader.preloadCriticalAssets()).successful>0}catch(e){return await this.fallbackPreloadCriticalAssets()}}async fallbackPreloadCriticalAssets(){const e=this.criticalAssets.map(async e=>{try{await this.loadAssetWithRetry(e,{priority:"critical",preload:!0})}catch(t){}});return(await Promise.allSettled(e)).filter(e=>"fulfilled"===e.status).length>0}async preloadBasedOnPatterns(){try{return await this.assetPreloader.preloadBasedOnPatterns()}catch(e){return{total:0,successful:0,failed:0}}}async preloadByPriority(e=2){try{return await this.assetPreloader.preloadByPriority(e)}catch(t){return{total:0,successful:0,failed:0}}}async warmCache(){try{await this.cacheManager.warmCache(this.criticalAssets),await this.assetPreloader.warmCacheForCriticalAssets()}catch(e){}}async loadAssetWithRetry(e,t={}){const i=this.getCacheKey(e);if(this.loadingPromises.has(i))return this.loadingPromises.get(i);const n=this.globalCache.get(i);if(n)return n;const a=this.cacheManager.get(e);if(a)return this.globalCache.set(i,a,{type:a.type,priority:t.priority||"normal",persistent:"critical"===t.priority}),a;const s=this.performAssetLoad(e,t);this.loadingPromises.set(i,s);try{const e=await s;return this.loadingPromises.delete(i),e}catch(r){throw this.loadingPromises.delete(i),r}}async performAssetLoad(e,t={}){const i=this.getCacheKey(e);let n=this.retryAttempts.get(i)||0;for(;n<this.maxRetries;)try{const a=await this.loadSingleAsset(e,t);return this.cacheManager.set(e,a,{priority:"critical"===t.priority?this.cacheManager.priorities.CRITICAL:this.cacheManager.priorities.NORMAL,type:a.type,url:e,metadata:{loadTime:Date.now(),attempts:n+1}}),this.globalCache.set(i,a,{type:a.type,priority:t.priority||"normal",persistent:"critical"===t.priority}),this.retryAttempts.delete(i),a}catch(a){if(n++,this.retryAttempts.set(i,n),n>=this.maxRetries)throw a;const e=this.baseRetryDelay*Math.pow(2,n-1);await this.delay(e)}}async loadSingleAsset(e,t={}){return new Promise((i,n)=>{const a=t.timeout||5e3;let s;const r=this.getAssetType(e);if("image"===r){const t=new Image;t.crossOrigin="anonymous",s=setTimeout(()=>{n(new Error(`Timeout loading image: ${e}`))},a),t.onload=()=>{clearTimeout(s),i({type:"image",url:e,element:t,width:t.width,height:t.height,size:this.estimateImageSize(t)})},t.onerror=()=>{clearTimeout(s),n(new Error(`Failed to load image: ${e}`))},t.src=e}else if("css"===r){const r=document.createElement("link");r.rel="stylesheet",r.type="text/css",s=setTimeout(()=>{n(new Error(`Timeout loading CSS: ${e}`))},a),r.onload=()=>{clearTimeout(s),i({type:"css",url:e,element:r})},r.onerror=()=>{clearTimeout(s),n(new Error(`Failed to load CSS: ${e}`))},r.href=e,t.preload||document.head.appendChild(r)}else{const t=new AbortController;s=setTimeout(()=>{t.abort(),n(new Error(`Timeout loading asset: ${e}`))},a),fetch(e,{signal:t.signal,cache:"default"}).then(e=>{if(clearTimeout(s),!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.blob()}).then(t=>{i({type:r,url:e,blob:t,size:t.size})}).catch(e=>{clearTimeout(s),n(e)})}})}async getAvailableLogo(){for(const t of this.criticalAssets)try{return await this.loadAssetWithRetry(t,{priority:"critical",timeout:2e3})}catch(e){continue}throw new Error("No logo assets available")}cacheAsset(e,t,i={}){const n=this.getCacheKey(e),a={data:t,timestamp:Date.now(),url:e,priority:i.priority||"normal",size:t.size||0,hits:0};this.cache.set(n,a),this.cleanupCache()}getCachedAsset(e){const t=this.getCacheKey(e),i=this.cache.get(t);return i&&i.hits++,i}isValidCache(e){const t=Date.now()-e.timestamp<this.cacheExpiry;return t||this.cache.delete(this.getCacheKey(e.url)),t}cleanupCache(){if(this.cache.size<=50)return;Array.from(this.cache.entries()).sort((e,t)=>e[1].timestamp-t[1].timestamp).slice(0,this.cache.size-50).forEach(([e])=>{this.cache.delete(e)})}getCacheStats(){return{loadingPromises:this.loadingPromises.size,retryAttempts:this.retryAttempts.size,criticalAssets:this.criticalAssets.length,maxRetries:this.maxRetries,baseRetryDelay:this.baseRetryDelay}}getCacheKey(e){return e.replace(/[^a-zA-Z0-9]/g,"_")}getAssetType(e){const t=e.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(t)?"image":["css"].includes(t)?"css":["js"].includes(t)?"javascript":"unknown"}estimateImageSize(e){return e.width*e.height*4}formatBytes(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}delay(e){return new Promise(t=>setTimeout(t,e))}clearCache(){this.cacheManager&&this.cacheManager.clear(),this.retryAttempts.clear(),this.loadingPromises.clear()}async preloadLogos(){const e=this.criticalAssets.map(async e=>{try{return await this.loadAssetWithRetry(e,{priority:"critical",preload:!0,timeout:3e3})}catch(t){return null}});return(await Promise.allSettled(e)).filter(e=>"fulfilled"===e.status&&null!==e.value).map(e=>e.value)}getStats(){return{assetLoading:this.getCacheStats(),cacheManager:this.cacheManager.getStats(),assetPreloader:this.assetPreloader.getStats(),loadingState:this.loadingStateManager.getPerformanceMetrics()}}getFrequentlyAccessed(e=10){return this.cacheManager.getFrequentlyAccessed(e)}optimize(){this.cacheManager.optimize(),this.loadingStateManager.clearAllStates(),this.retryAttempts.clear(),this.loadingPromises.clear()}cleanup(){this.cacheManager.cleanup&&this.cacheManager.cleanup(),this.assetPreloader.cleanup&&this.assetPreloader.cleanup(),this.loadingStateManager.clearAllStates&&this.loadingStateManager.clearAllStates(),this.loadingPromises.clear(),this.retryAttempts.clear()}}const E=window.innerWidth<=768,M=E?3e3:5500;class T{static async preloadLogos(){const e=new C;try{return(await e.preloadLogos()).length>0}catch(t){return!1}}static getCacheStats(){return(new C).getCacheStats()}constructor(a,s="/assets/images/logo.png",r={}){this.loaderElement=document.querySelector(a),this.loaderElement&&(this.backgroundElement=this.loaderElement.querySelector("#loader-background"),this.contentElement=this.loaderElement.querySelector("#loader-content"),this.backgroundElement&&this.contentElement&&(this.logoPath=s,this.options={particleSize:E?.06:.08,animationDuration:2.8,formationDelay:1,colorPalette:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#82E0AA","#F8C471","#D7BDE2","#AED6F1","#A3E4D7"],logoScale:E?.8:1.2,edgeSpawnDistance:2.5,transitionIntensity:.8,glowIntensity:1.2,flashDuration:.3,logoFadeInDuration:.8,...r},this.scene=new e,this.camera=new t(75,1,.1,1e3),this.renderer=new i({alpha:!0,antialias:!E,powerPreference:"high-performance"}),this.particles=null,this.particleMaterial=null,this.isAnimating=!1,this.animationFrameId=null,this.clock=new n,this.logoPositions=[],this.logoColors=[],this.logoCanvas=null,this.logoContext=null,this.logoImage=null,this.logoElement=null,this.assetManager=new C))}async loadLogoImage(){this.logoLoadingState="loading",this.showLogoLoadingState();const e=await this.tryLoadCachedLogo();if(e)return this.logoImage=e,this.logoLoadingState="loaded",this.processLoadedLogo(),void this.hideLogoLoadingState();try{const e=await Promise.race([this.assetManager.getAvailableLogo(),this.createTimeout(1500)]);if(e&&e.element)return this.logoImage=e.element,this.logoLoadingState="loaded",this.processLoadedLogo(),void this.hideLogoLoadingState()}catch(t){}return new Promise(e=>{this.logoLoadAttempts=0,this.maxLogoAttempts=2,this.attemptLogoLoad(e)})}async tryLoadCachedLogo(){try{const e=await S.getAvailableLogo();if(e&&e.element)return e.element}catch(t){}const e=["/assets/images/logo.png","/assets/images/logo-small_size.png"];for(const i of e)try{const e=new Image;e.crossOrigin="anonymous";const t=new Promise((t,n)=>{e.onload=()=>t(e),e.onerror=()=>n(new Error("Not in cache")),e.src=i}),n=new Promise((e,t)=>setTimeout(()=>t(new Error("Cache timeout")),300)),a=await Promise.race([t,n]);return S.set(`logo-${i.replace(/[^a-zA-Z0-9]/g,"_")}`,{type:"image",element:a,url:i,width:a.width,height:a.height},{type:"image",priority:"critical",persistent:!0}),a}catch(t){continue}return null}processLoadedLogo(){this.logoCanvas=document.createElement("canvas"),this.logoContext=this.logoCanvas.getContext("2d");const e=E?150:200,t=Math.min(e/this.logoImage.width,e/this.logoImage.height);this.logoCanvas.width=this.logoImage.width*t,this.logoCanvas.height=this.logoImage.height*t,this.logoContext.drawImage(this.logoImage,0,0,this.logoCanvas.width,this.logoCanvas.height),this.extractLogoPositions()}createTimeout(e){return new Promise((t,i)=>setTimeout(()=>i(new Error(`Timeout after ${e}ms`)),e))}async attemptLogoLoad(e){this.logoLoadAttempts++;const t=new Image;t.crossOrigin="anonymous";const i=setTimeout(()=>{this.handleLogoLoadFailure(e)},3e3);t.onload=()=>{clearTimeout(i),this.logoImage=t,this.logoLoadingState="loaded",this.logoCanvas=document.createElement("canvas"),this.logoContext=this.logoCanvas.getContext("2d");const n=E?150:200,a=Math.min(n/t.width,n/t.height);this.logoCanvas.width=t.width*a,this.logoCanvas.height=t.height*a,this.logoContext.drawImage(t,0,0,this.logoCanvas.width,this.logoCanvas.height),this.extractLogoPositions(),this.hideLogoLoadingState(),e()},t.onerror=()=>{clearTimeout(i),this.handleLogoLoadFailure(e)};const n=[this.logoPath,"/assets/images/logo.png","./assets/images/logo.png","/assets/images/logo-small_size.png"];this.tryLoadImagePaths(t,n,0,e)}tryLoadImagePaths(e,t,i,n){if(i>=t.length)return void this.handleLogoLoadFailure(n);const a=t[i],s=setTimeout(()=>{this.tryLoadImagePaths(e,t,i+1,n)},1e3),r=e.onload;e.onerror,e.onload=()=>{clearTimeout(s),r&&r()},e.onerror=()=>{clearTimeout(s),this.tryLoadImagePaths(e,t,i+1,n)},e.src=a}handleLogoLoadFailure(e){if(this.logoLoadAttempts<this.maxLogoAttempts){const t=1e3*Math.pow(2,this.logoLoadAttempts-1);setTimeout(()=>{this.attemptLogoLoad(e)},t)}else this.logoLoadingState="failed",this.useLogoFallbackStrategies(e)}async useLogoFallbackStrategies(e){try{return await this.tryBase64FallbackLogo(),this.logoLoadingState="fallback_base64",this.hideLogoLoadingState(),void e()}catch(t){}this.logoLoadingState="fallback_text",this.createStyledTextFallback(),this.hideLogoLoadingState(),e()}async tryBase64FallbackLogo(){return new Promise((e,t)=>{const i="data:image/svg+xml;base64,"+btoa('\n                <svg width="200" height="80" xmlns="http://www.w3.org/2000/svg">\n                    <defs>\n                        <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n                            <stop offset="0%" style="stop-color:#4ECDC4;stop-opacity:1" />\n                            <stop offset="50%" style="stop-color:#45B7D1;stop-opacity:1" />\n                            <stop offset="100%" style="stop-color:#96CEB4;stop-opacity:1" />\n                        </linearGradient>\n                    </defs>\n                    <rect width="200" height="80" rx="8" fill="url(#logoGradient)" opacity="0.1"/>\n                    <text x="100" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" \n                          text-anchor="middle" fill="url(#logoGradient)">ChemActiva</text>\n                    <text x="100" y="50" font-family="Arial, sans-serif" font-size="12" \n                          text-anchor="middle" fill="#666">Innovations</text>\n                    <circle cx="30" cy="40" r="8" fill="#4ECDC4" opacity="0.7"/>\n                    <circle cx="170" cy="40" r="6" fill="#45B7D1" opacity="0.7"/>\n                    <circle cx="100" cy="65" r="4" fill="#96CEB4" opacity="0.7"/>\n                </svg>\n            '),n=new Image;n.onload=()=>{this.logoImage=n,this.logoCanvas=document.createElement("canvas"),this.logoContext=this.logoCanvas.getContext("2d");const t=E?150:200,i=Math.min(t/n.width,t/n.height);this.logoCanvas.width=n.width*i,this.logoCanvas.height=n.height*i,this.logoContext.drawImage(n,0,0,this.logoCanvas.width,this.logoCanvas.height),this.extractLogoPositions(),e()},n.onerror=()=>{t(new Error("Base64 logo failed"))},n.src=i})}createStyledTextFallback(){const e="ChemActiva",t=[],i=[];for(let s=0;s<10;s++){const n=.25*s-1.25,r=this.generateEnhancedLetterPositions(e[s],n,0);t.push(...r);const o=Math.floor(s/10*this.options.colorPalette.length),c=new a(this.options.colorPalette[o]);for(let e=0;e<r.length;e++)i.push(c.clone())}const n=this.createDecorativeElements();t.push(...n.positions),i.push(...n.colors),this.logoPositions=t,this.logoColors=i}generateEnhancedLetterPositions(e,t,i){const n=[],a=E?8:12,r={C:this.createCurvedLetter(t,i,.15,.3,180,540,a),h:this.createVerticalLetter(t,i,.3,a).concat(this.createHorizontalLetter(t,i-.05,.12,a/2)),e:this.createCurvedLetter(t,i,.12,.25,0,270,a/2).concat(this.createHorizontalLetter(t,i,.12,a/3)),m:this.createVerticalLetter(t-.08,i,.25,a/3).concat(this.createVerticalLetter(t,i,.25,a/3),this.createVerticalLetter(t+.08,i,.25,a/3)),A:this.createTriangleLetter(t,i,.15,.3,a),c:this.createCurvedLetter(t,i,.1,.2,90,450,a/2),t:this.createVerticalLetter(t,i,.25,a/2).concat(this.createHorizontalLetter(t,i+.1,.1,a/3)),i:this.createVerticalLetter(t,i-.05,.2,a/2).concat([[t,i+.15,0]]),v:this.createVLetter(t,i,.12,.25,a),a:this.createCurvedLetter(t,i,.1,.2,0,360,a/2)}[e.toLowerCase()];return r?r.forEach(([e,t,i=0])=>{n.push(new s(e+.02*(Math.random()-.5),t+.02*(Math.random()-.5),i+.1*(Math.random()-.5)))}):this.createVerticalLetter(t,i,.25,a).forEach(([e,t,i])=>{n.push(new s(e,t,i))}),n}createCurvedLetter(e,t,i,n,a,s,r){const o=[],c=(s-a)/r;for(let l=0;l<=r;l++){const s=(a+l*c)*Math.PI/180,r=e+Math.cos(s)*i,h=t+Math.sin(s)*n;o.push([r,h,0])}return o}createVerticalLetter(e,t,i,n){const a=[],s=i/n;for(let r=0;r<=n;r++){const n=t+i/2-r*s;a.push([e,n,0])}return a}createHorizontalLetter(e,t,i,n){const a=[],s=i/n;for(let r=0;r<=n;r++){const n=e-i/2+r*s;a.push([n,t,0])}return a}createTriangleLetter(e,t,i,n,a){const s=[];for(let r=0;r<=a/3;r++){const o=r/(a/3),c=e-i/2+o*i/2,l=t-n/2+o*n;s.push([c,l,0])}for(let r=0;r<=a/3;r++){const o=r/(a/3),c=e+o*i/2,l=t+n/2-o*n;s.push([c,l,0])}for(let r=0;r<=a/3;r++){const n=e-i/4+r/(a/3)*i/2,o=t;s.push([n,o,0])}return s}createVLetter(e,t,i,n,a){const s=[];for(let r=0;r<=a/2;r++){const o=r/(a/2),c=e-i/2+o*i/2,l=t+n/2-o*n;s.push([c,l,0])}for(let r=0;r<=a/2;r++){const o=r/(a/2),c=e+o*i/2,l=t-n/2+o*n;s.push([c,l,0])}return s}createDecorativeElements(){const e=[],t=[],i=E?20:40;for(let n=0;n<i;n++){const r=n/i*Math.PI*2,o=1.2+.5*Math.random(),c=Math.cos(r)*o,l=Math.sin(r)*o*.3,h=.3*(Math.random()-.5);e.push(new s(c,l,h));const d=["#4ECDC4","#45B7D1","#96CEB4"],u=new a(d[n%d.length]);t.push(u)}return{positions:e,colors:t}}showLogoLoadingState(){this.logoLoadingIndicator||(this.logoLoadingIndicator=document.createElement("div"),this.logoLoadingIndicator.style.cssText=`\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                color: #4ECDC4;\n                font-family: Arial, sans-serif;\n                font-size: ${E?"14px":"16px"};\n                text-align: center;\n                z-index: 5;\n                opacity: 0;\n                transition: opacity 0.3s ease;\n            `,this.contentElement.appendChild(this.logoLoadingIndicator)),this.logoLoadingIndicator.innerHTML='\n            <div style="margin-bottom: 10px;">\n                <div style="display: inline-block; width: 20px; height: 20px; border: 2px solid #4ECDC4; border-radius: 50%; border-top-color: transparent; animation: spin 1s linear infinite;"></div>\n            </div>\n            <div>Loading ChemActiva...</div>\n            <style>\n                @keyframes spin {\n                    to { transform: rotate(360deg); }\n                }\n            </style>\n        ',setTimeout(()=>{this.logoLoadingIndicator&&(this.logoLoadingIndicator.style.opacity="1")},100)}hideLogoLoadingState(){this.logoLoadingIndicator&&(this.logoLoadingIndicator.style.opacity="0",setTimeout(()=>{this.logoLoadingIndicator&&this.logoLoadingIndicator.parentNode&&(this.logoLoadingIndicator.parentNode.removeChild(this.logoLoadingIndicator),this.logoLoadingIndicator=null)},300))}extractLogoPositions(){if(!this.logoContext)return;const e=this.logoContext.getImageData(0,0,this.logoCanvas.width,this.logoCanvas.height).data,t=[],i=[],n=E?3:2,r=this.logoCanvas.width/2,o=this.logoCanvas.height/2;for(let c=0;c<this.logoCanvas.height;c+=n)for(let l=0;l<this.logoCanvas.width;l+=n){const n=4*(c*this.logoCanvas.width+l),h=e[n],d=e[n+1],u=e[n+2];if(e[n+3]>50&&!(h>240&&d>240&&u>240)){const e=(l-r)/r*this.options.logoScale,n=-(c-o)/o*this.options.logoScale,m=.2*(Math.random()-.5);t.push(new s(e,n,m));const g=new a(h/255,d/255,u/255);g.multiplyScalar(1.1),i.push(g)}}this.logoPositions=t,this.logoColors=i}createFallbackLogo(){const e="LOGO",t=[],i=[];for(let n=0;n<4;n++){const s=this.generateLetterPositions(e[n],.6*(n-2),0);t.push(...s);const r=new a(this.options.colorPalette[n%this.options.colorPalette.length]);for(let e=0;e<s.length;e++)i.push(r.clone())}this.logoPositions=t,this.logoColors=i}generateLetterPositions(e,t,i){const n=[],a={L:[[0,.5],[0,.25],[0,0],[0,-.25],[0,-.5],[.2,-.5],[.4,-.5]],O:[[0,.5],[.2,.4],[.3,.2],[.3,0],[.3,-.2],[.2,-.4],[0,-.5],[-.2,-.4],[-.3,-.2],[-.3,0],[-.3,.2],[-.2,.4]],G:[[.3,.5],[.1,.5],[-.1,.5],[-.3,.3],[-.3,.1],[-.3,-.1],[-.3,-.3],[-.1,-.5],[.1,-.5],[.3,-.5],[.3,-.2],[.1,-.2]],default:[[0,.5],[0,.25],[0,0],[0,-.25],[0,-.5],[.15,.3],[.15,0],[.15,-.3]]};return(a[e.toUpperCase()]||a.default).forEach(([e,a])=>{n.push(new s(t+e+.05*(Math.random()-.5),i+a+.05*(Math.random()-.5),.2*(Math.random()-.5)))}),n}createLogoElement(){"fallback_text"===this.logoLoadingState?(this.logoElement=document.createElement("div"),this.logoElement.innerHTML=`\n                <div style="font-family: Arial, sans-serif; font-weight: bold; color: #4ECDC4; text-align: center;">\n                    <div style="font-size: ${E?"24px":"32px"}; margin-bottom: 4px;">ChemActiva</div>\n                    <div style="font-size: ${E?"12px":"16px"}; color: #45B7D1;">Innovations</div>\n                </div>\n            `):(this.logoElement=document.createElement("img"),this.logoElement.src=this.logoImage?this.logoImage.src:this.logoPath,this.logoElement.onerror=()=>{this.replaceLogoWithText()}),this.logoElement.style.cssText=`\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%) scale(0);\n            max-width: ${E?"150px":"200px"};\n            max-height: ${E?"150px":"200px"};\n            opacity: 0;\n            z-index: 10;\n            pointer-events: none;\n        `,this.contentElement.appendChild(this.logoElement)}replaceLogoWithText(){if(this.logoElement&&this.logoElement.parentNode){const e=document.createElement("div");e.innerHTML=`\n                <div style="font-family: Arial, sans-serif; font-weight: bold; color: #4ECDC4; text-align: center;">\n                    <div style="font-size: ${E?"24px":"32px"}; margin-bottom: 4px;">ChemActiva</div>\n                    <div style="font-size: ${E?"12px":"16px"}; color: #45B7D1;">Innovations</div>\n                </div>\n            `,e.style.cssText=this.logoElement.style.cssText,this.logoElement.parentNode.replaceChild(e,this.logoElement),this.logoElement=e,this.logoLoadingState="fallback_text"}}initThreeScene(){if(!this.contentElement)return;const e=this.contentElement.clientWidth||800,t=this.contentElement.clientHeight||600;this.renderer.setSize(e,t),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.camera.position.z=5;const i=this.contentElement.querySelector("canvas");i&&this.contentElement.removeChild(i),this.contentElement.appendChild(this.renderer.domElement),this.createLogoElement(),this.createParticles()}createParticles(){const e=new r,t=new Float32Array(3*M),i=new Float32Array(3*M),n=new Float32Array(3*M),s=new Float32Array(M),u=new Float32Array(M),m=new Float32Array(3*M),g=2*Math.tan(o.degToRad(this.camera.fov)/2)*this.camera.position.z,p=g*this.camera.aspect,f=this.options.edgeSpawnDistance;for(let r=0;r<M;r++){const e=3*r;let o,c;switch(Math.floor(4*Math.random())){case 0:o=(Math.random()-.5)*p*1.2,c=.6*g+Math.random()*f;break;case 1:o=.6*p+Math.random()*f,c=(Math.random()-.5)*g*1.2;break;case 2:o=(Math.random()-.5)*p*1.2,c=.6*-g-Math.random()*f;break;case 3:o=.6*-p-Math.random()*f,c=(Math.random()-.5)*g*1.2}if(t[e]=o,t[e+1]=c,t[e+2]=2*Math.random()-2,this.logoPositions.length>0){const t=r%this.logoPositions.length,s=this.logoPositions[t],o=.06;if(i[e]=s.x+(Math.random()-.5)*o,i[e+1]=s.y+(Math.random()-.5)*o,i[e+2]=s.z+(Math.random()-.5)*o,this.logoColors.length>0){const i=this.logoColors[t];n[e]=i.r,n[e+1]=i.g,n[e+2]=i.b}else{const t=new a(this.options.colorPalette[r%this.options.colorPalette.length]);n[e]=t.r,n[e+1]=t.g,n[e+2]=t.b}}else{i[e]=2*(Math.random()-.5),i[e+1]=2*(Math.random()-.5),i[e+2]=0;const t=new a(this.options.colorPalette[r%this.options.colorPalette.length]);n[e]=t.r,n[e+1]=t.g,n[e+2]=t.b}const l=.08*-o,h=.08*-c;m[e]=l+.01*(Math.random()-.5),m[e+1]=h+.01*(Math.random()-.5),m[e+2]=.005*(Math.random()-.5),s[r]=this.options.particleSize*(.8+.4*Math.random()),u[r]=0}e.setAttribute("position",new c(t,3)),e.setAttribute("target",new c(i,3)),e.setAttribute("color",new c(n,3)),e.setAttribute("size",new c(s,1)),e.setAttribute("alpha",new c(u,1)),e.setAttribute("velocity",new c(m,3));this.particleMaterial=new l({uniforms:{time:{value:0},transitionProgress:{value:0},glowIntensity:{value:this.options.glowIntensity}},vertexShader:"\n            attribute float size;\n            attribute float alpha;\n            attribute vec3 velocity;\n            varying vec3 vColor;\n            varying float vAlpha;\n            varying float vSize;\n            uniform float time;\n            uniform float transitionProgress;\n            \n            void main() {\n                vColor = color;\n                vAlpha = alpha;\n                vSize = size;\n                \n                vec3 pos = position;\n                \n                // Subtle movement during transition\n                pos += velocity * sin(time * 1.5 + length(position) * 0.3) * (1.0 - transitionProgress) * 0.2;\n                \n                vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n                gl_PointSize = size * (200.0 / -mvPosition.z);\n                gl_Position = projectionMatrix * mvPosition;\n            }\n        ",fragmentShader:"\n            varying vec3 vColor;\n            varying float vAlpha;\n            varying float vSize;\n            uniform float time;\n            uniform float glowIntensity;\n            \n            void main() {\n                vec2 center = gl_PointCoord - vec2(0.5);\n                float dist = length(center);\n                \n                // Create a soft circular particle\n                float alpha = (1.0 - dist * 2.0) * vAlpha;\n                alpha = max(0.0, alpha);\n                \n                // Add subtle glow effect\n                float glow = 1.0 / (1.0 + dist * 15.0);\n                glow *= glowIntensity;\n                \n                vec3 finalColor = vColor + vec3(glow * 0.2);\n                float finalAlpha = alpha + glow * 0.2;\n                \n                gl_FragColor = vec4(finalColor, finalAlpha);\n            }\n        ",blending:h,depthWrite:!1,transparent:!0,vertexColors:!0}),this.particles=new d(e,this.particleMaterial),this.scene.add(this.particles)}async start(){this.isAnimating=!0;const e=navigator.connection,t=!!e&&("slow-2g"===e.effectiveType||"2g"===e.effectiveType);try{if(await this.loadLogoImage(),t)return this.showSimplifiedAnimation();if(u.to(this.contentElement,{opacity:1,duration:.6}),this.initThreeScene(),this.animate(),!this.particles)throw new Error("Particles not initialized");return new Promise((e,t)=>{const i=this.particles.geometry.attributes.position.array,n=this.particles.geometry.attributes.target.array,a=this.particles.geometry.attributes.alpha.array,s=u.timeline({onUpdate:()=>{this.particles&&(this.particles.geometry.attributes.position.needsUpdate=!0,this.particles.geometry.attributes.alpha.needsUpdate=!0)},onComplete:()=>{u.to({},{duration:.8,onComplete:()=>{this.transitionToPngLogo().then(()=>{u.timeline({onComplete:()=>{this.loaderElement&&(this.loaderElement.style.display="none"),this.stopAnimation(),e()}}).to(this.backgroundElement,{opacity:0,duration:.8}).to(this.contentElement,{opacity:0,duration:.6},"-=0.4")})}})}}),r=this.options.particleCount||(E?1500:3e3),o=Math.ceil(i.length/3/r)||1;for(let c=0;c<i.length/3;c+=o){const e=3*c,t=Math.random()*this.options.formationDelay,r=this.options.animationDuration*(.8+.4*Math.random());s.to(i,{[e]:n[e],[e+1]:n[e+1],[e+2]:n[e+2],duration:r,ease:"power3.out"},t),s.to(a,{[c]:1,duration:.7*r,ease:"power2.out"},t+.2*r)}s.to(this.particleMaterial.uniforms.transitionProgress,{value:1,duration:this.options.animationDuration,ease:"power2.inOut"},0),s.to(this.camera.position,{z:4.2,duration:1.1*this.options.animationDuration,ease:"power2.inOut"},.3)})}catch(i){this.showSimplifiedAnimation()}}async showSimplifiedAnimation(){u.to(this.contentElement,{opacity:1,duration:.3}),this.createLogoElement(),u.fromTo(this.logoElement,{opacity:0,scale:.8},{opacity:1,scale:1,duration:1.2,ease:"elastic.out(1, 0.5)",onComplete:()=>{u.to(this.backgroundElement,{opacity:0,duration:.8,delay:.5}),u.to(this.contentElement,{opacity:0,duration:.8,delay:.7,onComplete:()=>{this.loaderElement&&(this.loaderElement.style.display="none"),this.stopAnimation()}})}})}transitionToPngLogo(){return new Promise(e=>{if(!this.logoElement||!this.particles)return void e();const t=u.timeline({onComplete:e}),i=document.createElement("div"),n=E?"180px":"240px";i.style.cssText=`\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: ${n};\n            height: ${n};\n            transform: translate(-50%, -50%);\n            background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.8) 30%, rgba(255,255,255,0.4) 60%, transparent 100%);\n            border-radius: 50%;\n            opacity: 0;\n            z-index: 5;\n            pointer-events: none;\n        `,this.contentElement.appendChild(i),t.to(this.particleMaterial.uniforms.glowIntensity,{value:4,duration:.12,ease:"power2.out"}).to(i,{opacity:1,scale:1.2,duration:.6*this.options.flashDuration,ease:"power3.out"},.08).call(()=>{const e=this.particles.geometry.attributes.alpha.array;for(let t=0;t<e.length;t++)e[t]=0;this.particles.geometry.attributes.alpha.needsUpdate=!0,this.particles.visible=!1},[],.1).to(i,{opacity:0,scale:1,duration:.5,ease:"power2.inOut"},.5*this.options.flashDuration).to(this.logoElement,{opacity:1,scale:1,duration:this.options.logoFadeInDuration,ease:"back.out(1.4)"},.3*this.options.flashDuration).to({},{duration:1.2}).call(()=>{i.parentNode&&i.parentNode.removeChild(i)})})}animate(){if(!this.isAnimating)return;this.animationFrameId=requestAnimationFrame(this.animate.bind(this));const e=this.clock.getElapsedTime();this.particles&&this.particleMaterial.uniforms&&(this.particleMaterial.uniforms.time.value=e),this.renderer.render(this.scene,this.camera)}stopAnimation(){this.isAnimating=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stopAnimation(),this.renderer&&this.renderer.dispose(),this.particles&&(this.particles.geometry.dispose(),this.particles.material.dispose(),this.scene.remove(this.particles)),this.logoElement&&this.logoElement.parentNode&&this.logoElement.parentNode.removeChild(this.logoElement),this.logoCanvas&&(this.logoCanvas=null,this.logoContext=null)}}const L=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));function k(e,t,i){return t&&function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}
/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var A,I,P,R,N,D,z,F,O,H,_,B,q,Y=function(){return A||"undefined"!=typeof window&&(A=window.gsap)&&A.registerPlugin&&A},W=1,$=[],j=[],X=[],U=Date.now,G=function(e,t){return t},V=function(e,t){return~X.indexOf(e)&&X[X.indexOf(e)+1][t]},Q=function(e){return!!~H.indexOf(e)},J=function(e,t,i,n,a){return e.addEventListener(t,i,{passive:!1!==n,capture:!!a})},Z=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},K="scrollLeft",ee="scrollTop",te=function(){return _&&_.isPressed||j.cache++},ie=function(e,t){var i=function i(n){if(n||0===n){W&&(P.history.scrollRestoration="manual");var a=_&&_.isPressed;n=i.v=Math.round(n)||(_&&_.iOS?1:0),e(n),i.cacheID=j.cache,a&&G("ss",n)}else(t||j.cache!==i.cacheID||G("ref"))&&(i.cacheID=j.cache,i.v=e());return i.v+i.offset};return i.offset=0,e&&i},ne={s:K,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:ie(function(e){return arguments.length?P.scrollTo(e,ae.sc()):P.pageXOffset||R[K]||N[K]||D[K]||0})},ae={s:ee,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:ne,sc:ie(function(e){return arguments.length?P.scrollTo(ne.sc(),e):P.pageYOffset||R[ee]||N[ee]||D[ee]||0})},se=function(e,t){return(t&&t._ctx&&t._ctx.selector||A.utils.toArray)(e)[0]||("string"==typeof e&&!1!==A.config().nullTargetWarn?void 0:null)},re=function(e,t){var i=t.s,n=t.sc;Q(e)&&(e=R.scrollingElement||N);var a=j.indexOf(e),s=n===ae.sc?1:2;!~a&&(a=j.push(e)-1),j[a+s]||J(e,"scroll",te);var r=j[a+s],o=r||(j[a+s]=ie(V(e,i),!0)||(Q(e)?n:ie(function(t){return arguments.length?e[i]=t:e[i]})));return o.target=e,r||(o.smooth="smooth"===A.getProperty(e,"scrollBehavior")),o},oe=function(e,t,i){var n=e,a=e,s=U(),r=s,o=t||50,c=Math.max(500,3*o),l=function(e,t){var c=U();t||c-s>o?(a=n,n=e,r=s,s=c):i?n+=e:n=a+(e-a)/(c-r)*(s-r)};return{update:l,reset:function(){a=n=i?0:n,r=s=0},getVelocity:function(e){var t=r,o=a,h=U();return(e||0===e)&&e!==n&&l(e),s===r||h-r>c?0:(n+(i?o:-o))/((i?h:s)-t)*1e3}}},ce=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},le=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},he=function(){var e,t,i,n;(O=A.core.globals().ScrollTrigger)&&O.core&&(e=O.core,t=e.bridge||{},i=e._scrollers,n=e._proxies,i.push.apply(i,j),n.push.apply(n,X),j=i,X=n,G=function(e,i){return t[e](i)})},de=function(e){return A=e||Y(),!I&&A&&"undefined"!=typeof document&&document.body&&(P=window,R=document,N=R.documentElement,D=R.body,H=[P,R,N,D],A.utils.clamp,q=A.core.context||function(){},F="onpointerenter"in D?"pointer":"mouse",z=ue.isTouch=P.matchMedia&&P.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in P||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,B=ue.eventTypes=("ontouchstart"in N?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in N?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return W=0},500),he(),I=1),I};ne.op=ae,j.cache=0;var ue=function(){function e(e){this.init(e)}return e.prototype.init=function(e){I||de(A),O||he();var t=e.tolerance,i=e.dragMinimum,n=e.type,a=e.target,s=e.lineHeight,r=e.debounce,o=e.preventDefault,c=e.onStop,l=e.onStopDelay,h=e.ignore,d=e.wheelSpeed,u=e.event,m=e.onDragStart,g=e.onDragEnd,p=e.onDrag,f=e.onPress,y=e.onRelease,v=e.onRight,w=e.onLeft,b=e.onUp,x=e.onDown,S=e.onChangeX,C=e.onChangeY,E=e.onChange,M=e.onToggleX,T=e.onToggleY,L=e.onHover,k=e.onHoverEnd,H=e.onMove,Y=e.ignoreCheck,W=e.isNormalizer,j=e.onGestureStart,X=e.onGestureEnd,G=e.onWheel,V=e.onEnable,K=e.onDisable,ee=e.onClick,ie=e.scrollSpeed,ue=e.capture,me=e.allowClicks,ge=e.lockAxis,pe=e.onLockAxis;this.target=a=se(a)||N,this.vars=e,h&&(h=A.utils.toArray(h)),t=t||1e-9,i=i||0,d=d||1,ie=ie||1,n=n||"wheel,touch,pointer",r=!1!==r,s||(s=parseFloat(P.getComputedStyle(D).lineHeight)||22);var fe,ye,ve,we,be,xe,Se,Ce=this,Ee=0,Me=0,Te=e.passive||!o&&!1!==e.passive,Le=re(a,ne),ke=re(a,ae),Ae=Le(),Ie=ke(),Pe=~n.indexOf("touch")&&!~n.indexOf("pointer")&&"pointerdown"===B[0],Re=Q(a),Ne=a.ownerDocument||R,De=[0,0,0],ze=[0,0,0],Fe=0,Oe=function(){return Fe=U()},He=function(e,t){return(Ce.event=e)&&h&&function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1}(e.target,h)||t&&Pe&&"touch"!==e.pointerType||Y&&Y(e,t)},_e=function(){var e=Ce.deltaX=le(De),i=Ce.deltaY=le(ze),n=Math.abs(e)>=t,a=Math.abs(i)>=t;E&&(n||a)&&E(Ce,e,i,De,ze),n&&(v&&Ce.deltaX>0&&v(Ce),w&&Ce.deltaX<0&&w(Ce),S&&S(Ce),M&&Ce.deltaX<0!=Ee<0&&M(Ce),Ee=Ce.deltaX,De[0]=De[1]=De[2]=0),a&&(x&&Ce.deltaY>0&&x(Ce),b&&Ce.deltaY<0&&b(Ce),C&&C(Ce),T&&Ce.deltaY<0!=Me<0&&T(Ce),Me=Ce.deltaY,ze[0]=ze[1]=ze[2]=0),(we||ve)&&(H&&H(Ce),ve&&(m&&1===ve&&m(Ce),p&&p(Ce),ve=0),we=!1),xe&&!(xe=!1)&&pe&&pe(Ce),be&&(G(Ce),be=!1),fe=0},Be=function(e,t,i){De[i]+=e,ze[i]+=t,Ce._vx.update(e),Ce._vy.update(t),r?fe||(fe=requestAnimationFrame(_e)):_e()},qe=function(e,t){ge&&!Se&&(Ce.axis=Se=Math.abs(e)>Math.abs(t)?"x":"y",xe=!0),"y"!==Se&&(De[2]+=e,Ce._vx.update(e,!0)),"x"!==Se&&(ze[2]+=t,Ce._vy.update(t,!0)),r?fe||(fe=requestAnimationFrame(_e)):_e()},Ye=function(e){if(!He(e,1)){var t=(e=ce(e,o)).clientX,n=e.clientY,a=t-Ce.x,s=n-Ce.y,r=Ce.isDragging;Ce.x=t,Ce.y=n,(r||(a||s)&&(Math.abs(Ce.startX-t)>=i||Math.abs(Ce.startY-n)>=i))&&(ve=r?2:1,r||(Ce.isDragging=!0),qe(a,s))}},We=Ce.onPress=function(e){He(e,1)||e&&e.button||(Ce.axis=Se=null,ye.pause(),Ce.isPressed=!0,e=ce(e),Ee=Me=0,Ce.startX=Ce.x=e.clientX,Ce.startY=Ce.y=e.clientY,Ce._vx.reset(),Ce._vy.reset(),J(W?a:Ne,B[1],Ye,Te,!0),Ce.deltaX=Ce.deltaY=0,f&&f(Ce))},$e=Ce.onRelease=function(e){if(!He(e,1)){Z(W?a:Ne,B[1],Ye,!0);var t=!isNaN(Ce.y-Ce.startY),i=Ce.isDragging,n=i&&(Math.abs(Ce.x-Ce.startX)>3||Math.abs(Ce.y-Ce.startY)>3),s=ce(e);!n&&t&&(Ce._vx.reset(),Ce._vy.reset(),o&&me&&A.delayedCall(.08,function(){if(U()-Fe>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(Ne.createEvent){var t=Ne.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,P,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}})),Ce.isDragging=Ce.isGesturing=Ce.isPressed=!1,c&&i&&!W&&ye.restart(!0),ve&&_e(),g&&i&&g(Ce),y&&y(Ce,n)}},je=function(e){return e.touches&&e.touches.length>1&&(Ce.isGesturing=!0)&&j(e,Ce.isDragging)},Xe=function(){return(Ce.isGesturing=!1)||X(Ce)},Ue=function(e){if(!He(e)){var t=Le(),i=ke();Be((t-Ae)*ie,(i-Ie)*ie,1),Ae=t,Ie=i,c&&ye.restart(!0)}},Ge=function(e){if(!He(e)){e=ce(e,o),G&&(be=!0);var t=(1===e.deltaMode?s:2===e.deltaMode?P.innerHeight:1)*d;Be(e.deltaX*t,e.deltaY*t,0),c&&!W&&ye.restart(!0)}},Ve=function(e){if(!He(e)){var t=e.clientX,i=e.clientY,n=t-Ce.x,a=i-Ce.y;Ce.x=t,Ce.y=i,we=!0,c&&ye.restart(!0),(n||a)&&qe(n,a)}},Qe=function(e){Ce.event=e,L(Ce)},Je=function(e){Ce.event=e,k(Ce)},Ze=function(e){return He(e)||ce(e,o)&&ee(Ce)};ye=Ce._dc=A.delayedCall(l||.25,function(){Ce._vx.reset(),Ce._vy.reset(),ye.pause(),c&&c(Ce)}).pause(),Ce.deltaX=Ce.deltaY=0,Ce._vx=oe(0,50,!0),Ce._vy=oe(0,50,!0),Ce.scrollX=Le,Ce.scrollY=ke,Ce.isDragging=Ce.isGesturing=Ce.isPressed=!1,q(this),Ce.enable=function(e){return Ce.isEnabled||(J(Re?Ne:a,"scroll",te),n.indexOf("scroll")>=0&&J(Re?Ne:a,"scroll",Ue,Te,ue),n.indexOf("wheel")>=0&&J(a,"wheel",Ge,Te,ue),(n.indexOf("touch")>=0&&z||n.indexOf("pointer")>=0)&&(J(a,B[0],We,Te,ue),J(Ne,B[2],$e),J(Ne,B[3],$e),me&&J(a,"click",Oe,!0,!0),ee&&J(a,"click",Ze),j&&J(Ne,"gesturestart",je),X&&J(Ne,"gestureend",Xe),L&&J(a,F+"enter",Qe),k&&J(a,F+"leave",Je),H&&J(a,F+"move",Ve)),Ce.isEnabled=!0,Ce.isDragging=Ce.isGesturing=Ce.isPressed=we=ve=!1,Ce._vx.reset(),Ce._vy.reset(),Ae=Le(),Ie=ke(),e&&e.type&&We(e),V&&V(Ce)),Ce},Ce.disable=function(){Ce.isEnabled&&($.filter(function(e){return e!==Ce&&Q(e.target)}).length||Z(Re?Ne:a,"scroll",te),Ce.isPressed&&(Ce._vx.reset(),Ce._vy.reset(),Z(W?a:Ne,B[1],Ye,!0)),Z(Re?Ne:a,"scroll",Ue,ue),Z(a,"wheel",Ge,ue),Z(a,B[0],We,ue),Z(Ne,B[2],$e),Z(Ne,B[3],$e),Z(a,"click",Oe,!0),Z(a,"click",Ze),Z(Ne,"gesturestart",je),Z(Ne,"gestureend",Xe),Z(a,F+"enter",Qe),Z(a,F+"leave",Je),Z(a,F+"move",Ve),Ce.isEnabled=Ce.isPressed=Ce.isDragging=!1,K&&K(Ce))},Ce.kill=Ce.revert=function(){Ce.disable();var e=$.indexOf(Ce);e>=0&&$.splice(e,1),_===Ce&&(_=0)},$.push(Ce),W&&Q(a)&&(_=Ce),Ce.enable(u)},k(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();ue.version="3.13.0",ue.create=function(e){return new ue(e)},ue.register=de,ue.getAll=function(){return $.slice()},ue.getById=function(e){return $.filter(function(t){return t.vars.id===e})[0]},Y()&&A.registerPlugin(ue);
/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/
var me,ge,pe,fe,ye,ve,we,be,xe,Se,Ce,Ee,Me,Te,Le,ke,Ae,Ie,Pe,Re,Ne,De,ze,Fe,Oe,He,_e,Be,qe,Ye,We,$e,je,Xe,Ue,Ge,Ve,Qe,Je=1,Ze=Date.now,Ke=Ze(),et=0,tt=0,it=function(e,t,i){var n=ft(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=n,n?e.substr(6,e.length-7):e},nt=function(e,t){return!t||ft(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},at=function e(){return tt&&requestAnimationFrame(e)},st=function(){return Te=1},rt=function(){return Te=0},ot=function(e){return e},ct=function(e){return Math.round(1e5*e)/1e5||0},lt=function(){return"undefined"!=typeof window},ht=function(){return me||lt()&&(me=window.gsap)&&me.registerPlugin&&me},dt=function(e){return!!~we.indexOf(e)},ut=function(e){return("Height"===e?We:pe["inner"+e])||ye["client"+e]||ve["client"+e]},mt=function(e){return V(e,"getBoundingClientRect")||(dt(e)?function(){return Ti.width=pe.innerWidth,Ti.height=We,Ti}:function(){return _t(e)})},gt=function(e,t){var i=t.s,n=t.d2,a=t.d,s=t.a;return Math.max(0,(i="scroll"+n)&&(s=V(e,i))?s()-mt(e)()[a]:dt(e)?(ye[i]||ve[i])-ut(n):e[i]-e["offset"+n])},pt=function(e,t){for(var i=0;i<Pe.length;i+=3)(!t||~t.indexOf(Pe[i+1]))&&e(Pe[i],Pe[i+1],Pe[i+2])},ft=function(e){return"string"==typeof e},yt=function(e){return"function"==typeof e},vt=function(e){return"number"==typeof e},wt=function(e){return"object"==typeof e},bt=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},xt=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},St=Math.abs,Ct="left",Et="right",Mt="bottom",Tt="width",Lt="height",kt="Right",At="Left",It="Top",Pt="Bottom",Rt="padding",Nt="margin",Dt="Width",zt="Height",Ft="px",Ot=function(e){return pe.getComputedStyle(e)},Ht=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},_t=function(e,t){var i=t&&"matrix(1, 0, 0, 1, 0, 0)"!==Ot(e)[Le]&&me.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},Bt=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},qt=function(e){var t,i=[],n=e.labels,a=e.duration();for(t in n)i.push(n[t]/a);return i},Yt=function(e){var t=me.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(e,t){return e-t});return i?function(e,n,a){var s;if(void 0===a&&(a=.001),!n)return t(e);if(n>0){for(e-=a,s=0;s<i.length;s++)if(i[s]>=e)return i[s];return i[s-1]}for(s=i.length,e+=a;s--;)if(i[s]<=e)return i[s];return i[0]}:function(i,n,a){void 0===a&&(a=.001);var s=t(i);return!n||Math.abs(s-i)<a||s-i<0==n<0?s:t(n<0?i-e:i+e)}},Wt=function(e,t,i,n){return i.split(",").forEach(function(i){return e(t,i,n)})},$t=function(e,t,i,n,a){return e.addEventListener(t,i,{passive:!n,capture:!!a})},jt=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},Xt=function(e,t,i){(i=i&&i.wheelHandler)&&(e(t,"wheel",i),e(t,"touchmove",i))},Ut={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Gt={toggleActions:"play",anticipatePin:0},Vt={top:0,left:0,center:.5,bottom:1,right:1},Qt=function(e,t){if(ft(e)){var i=e.indexOf("="),n=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in Vt?Vt[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Jt=function(e,t,i,n,a,s,r,o){var c=a.startColor,l=a.endColor,h=a.fontSize,d=a.indent,u=a.fontWeight,m=fe.createElement("div"),g=dt(i)||"fixed"===V(i,"pinType"),p=-1!==e.indexOf("scroller"),f=g?ve:i,y=-1!==e.indexOf("start"),v=y?c:l,w="border-color:"+v+";font-size:"+h+";color:"+v+";font-weight:"+u+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((p||o)&&g?"fixed;":"absolute;"),(p||o||!g)&&(w+=(n===ae?Et:Mt)+":"+(s+parseFloat(d))+"px;"),r&&(w+="box-sizing:border-box;text-align:left;width:"+r.offsetWidth+"px;"),m._isStart=y,m.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),m.style.cssText=w,m.innerText=t||0===t?e+"-"+t:e,f.children[0]?f.insertBefore(m,f.children[0]):f.appendChild(m),m._offset=m["offset"+n.op.d2],Zt(m,0,n,y),m},Zt=function(e,t,i,n){var a={display:"block"},s=i[n?"os2":"p2"],r=i[n?"p2":"os2"];e._isFlipped=n,a[i.a+"Percent"]=n?-100:0,a[i.a]=n?"1px":0,a["border"+s+Dt]=1,a["border"+r+Dt]=0,a[i.p]=t+"px",me.set(e,a)},Kt=[],ei={},ti=function(){return Ze()-et>34&&(Ue||(Ue=requestAnimationFrame(wi)))},ii=function(){(!ze||!ze.isPressed||ze.startX>ve.clientWidth)&&(j.cache++,ze?Ue||(Ue=requestAnimationFrame(wi)):wi(),et||ci("scrollStart"),et=Ze())},ni=function(){He=pe.innerWidth,Oe=pe.innerHeight},ai=function(e){j.cache++,(!0===e||!Me&&!De&&!fe.fullscreenElement&&!fe.webkitFullscreenElement&&(!Fe||He!==pe.innerWidth||Math.abs(pe.innerHeight-Oe)>.25*pe.innerHeight))&&be.restart(!0)},si={},ri=[],oi=function e(){return jt(Ni,"scrollEnd",e)||fi(!0)},ci=function(e){return si[e]&&si[e].map(function(e){return e()})||ri},li=[],hi=function(e){for(var t=0;t<li.length;t+=5)(!e||li[t+4]&&li[t+4].query===e)&&(li[t].style.cssText=li[t+1],li[t].getBBox&&li[t].setAttribute("transform",li[t+2]||""),li[t+3].uncache=1)},di=function(e,t){var i;for(ke=0;ke<Kt.length;ke++)!(i=Kt[ke])||t&&i._ctx!==t||(e?i.kill(1):i.revert(!0,!0));$e=!0,t&&hi(t),t||ci("revert")},ui=function(e,t){j.cache++,(t||!Ge)&&j.forEach(function(e){return yt(e)&&e.cacheID++&&(e.rec=0)}),ft(e)&&(pe.history.scrollRestoration=qe=e)},mi=0,gi=function(){ve.appendChild(Ye),We=!ze&&Ye.offsetHeight||pe.innerHeight,ve.removeChild(Ye)},pi=function(e){return xe(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},fi=function(e,t){if(ye=fe.documentElement,ve=fe.body,we=[pe,fe,ye,ve],!et||e||$e){gi(),Ge=Ni.isRefreshing=!0,j.forEach(function(e){return yt(e)&&++e.cacheID&&(e.rec=e())});var i=ci("refreshInit");Re&&Ni.sort(),t||di(),j.forEach(function(e){yt(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))}),Kt.slice(0).forEach(function(e){return e.refresh()}),$e=!1,Kt.forEach(function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",i=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-i),e.refresh()}}),je=1,pi(!0),Kt.forEach(function(e){var t=gt(e.scroller,e._dir),i="max"===e.vars.end||e._endClamp&&e.end>t,n=e._startClamp&&e.start>=t;(i||n)&&e.setPositions(n?t-1:e.start,i?Math.max(n?t:e.start+1,t):e.end,!0)}),pi(!1),je=0,i.forEach(function(e){return e&&e.render&&e.render(-1)}),j.forEach(function(e){yt(e)&&(e.smooth&&requestAnimationFrame(function(){return e.target.style.scrollBehavior="smooth"}),e.rec&&e(e.rec))}),ui(qe,1),be.pause(),mi++,Ge=2,wi(2),Kt.forEach(function(e){return yt(e.vars.onRefresh)&&e.vars.onRefresh(e)}),Ge=Ni.isRefreshing=!1,ci("refresh")}else $t(Ni,"scrollEnd",oi)},yi=0,vi=1,wi=function(e){if(2===e||!Ge&&!$e){Ni.isUpdating=!0,Qe&&Qe.update(0);var t=Kt.length,i=Ze(),n=i-Ke>=50,a=t&&Kt[0].scroll();if(vi=yi>a?-1:1,Ge||(yi=a),n&&(et&&!Te&&i-et>200&&(et=0,ci("scrollEnd")),Ce=Ke,Ke=i),vi<0){for(ke=t;ke-- >0;)Kt[ke]&&Kt[ke].update(0,n);vi=1}else for(ke=0;ke<t;ke++)Kt[ke]&&Kt[ke].update(0,n);Ni.isUpdating=!1}Ue=0},bi=[Ct,"top",Mt,Et,Nt+Pt,Nt+kt,Nt+It,Nt+At,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],xi=bi.concat([Tt,Lt,"boxSizing","max"+Dt,"max"+zt,"position",Nt,Rt,Rt+It,Rt+kt,Rt+Pt,Rt+At]),Si=function(e,t,i,n){if(!e._gsap.swappedIn){for(var a,s=bi.length,r=t.style,o=e.style;s--;)r[a=bi[s]]=i[a];r.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(r.display="inline-block"),o[Mt]=o[Et]="auto",r.flexBasis=i.flexBasis||"auto",r.overflow="visible",r.boxSizing="border-box",r[Tt]=Bt(e,ne)+Ft,r[Lt]=Bt(e,ae)+Ft,r[Rt]=o[Nt]=o.top=o[Ct]="0",Ei(n),o[Tt]=o["max"+Dt]=i[Tt],o[Lt]=o["max"+zt]=i[Lt],o[Rt]=i[Rt],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Ci=/([A-Z])/g,Ei=function(e){if(e){var t,i,n=e.t.style,a=e.length,s=0;for((e.t._gsap||me.core.getCache(e.t)).uncache=1;s<a;s+=2)i=e[s+1],t=e[s],i?n[t]=i:n[t]&&n.removeProperty(t.replace(Ci,"-$1").toLowerCase())}},Mi=function(e){for(var t=xi.length,i=e.style,n=[],a=0;a<t;a++)n.push(xi[a],i[xi[a]]);return n.t=e,n},Ti={left:0,top:0},Li=function(e,t,i,n,a,s,r,o,c,l,h,d,u,m){yt(e)&&(e=e(o)),ft(e)&&"max"===e.substr(0,3)&&(e=d+("="===e.charAt(4)?Qt("0"+e.substr(3),i):0));var g,p,f,y=u?u.time():0;if(u&&u.seek(0),isNaN(e)||(e=+e),vt(e))u&&(e=me.utils.mapRange(u.scrollTrigger.start,u.scrollTrigger.end,0,d,e)),r&&Zt(r,i,n,!0);else{yt(t)&&(t=t(o));var v,w,b,x,S=(e||"0").split(" ");f=se(t,o)||ve,(v=_t(f)||{})&&(v.left||v.top)||"none"!==Ot(f).display||(x=f.style.display,f.style.display="block",v=_t(f),x?f.style.display=x:f.style.removeProperty("display")),w=Qt(S[0],v[n.d]),b=Qt(S[1]||"0",i),e=v[n.p]-c[n.p]-l+w+a-b,r&&Zt(r,b,n,i-b<20||r._isStart&&b>20),i-=i-b}if(m&&(o[m]=e||-.001,e<0&&(e=0)),s){var C=e+i,E=s._isStart;g="scroll"+n.d2,Zt(s,C,n,E&&C>20||!E&&(h?Math.max(ve[g],ye[g]):s.parentNode[g])<=C+1),h&&(c=_t(r),h&&(s.style[n.op.p]=c[n.op.p]-n.op.m-s._offset+Ft))}return u&&f&&(g=_t(f),u.seek(d),p=_t(f),u._caScrollDist=g[n.p]-p[n.p],e=e/u._caScrollDist*d),u&&u.seek(y),u?e:Math.round(e)},ki=/(webkit|moz|length|cssText|inset)/i,Ai=function(e,t,i,n){if(e.parentNode!==t){var a,s,r=e.style;if(t===ve){for(a in e._stOrig=r.cssText,s=Ot(e))+a||ki.test(a)||!s[a]||"string"!=typeof r[a]||"0"===a||(r[a]=s[a]);r.top=i,r.left=n}else r.cssText=e._stOrig;me.core.getCache(e).uncache=1,t.appendChild(e)}},Ii=function(e,t,i){var n=t,a=n;return function(t){var s=Math.round(e());return s!==n&&s!==a&&Math.abs(s-n)>3&&Math.abs(s-a)>3&&(t=s,i&&i()),a=n,n=Math.round(t)}},Pi=function(e,t,i){var n={};n[t.p]="+="+i,me.set(e,n)},Ri=function(e,t){var i=re(e,t),n="_scroll"+t.p2,a=function t(a,s,r,o,c){var l=t.tween,h=s.onComplete,d={};r=r||i();var u=Ii(i,r,function(){l.kill(),t.tween=0});return c=o&&c||0,o=o||a-r,l&&l.kill(),s[n]=a,s.inherit=!1,s.modifiers=d,d[n]=function(){return u(r+o*l.ratio+c*l.ratio*l.ratio)},s.onUpdate=function(){j.cache++,t.tween&&wi()},s.onComplete=function(){t.tween=0,h&&h.call(l)},l=t.tween=me.to(e,s)};return e[n]=i,i.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},$t(e,"wheel",i.wheelHandler),Ni.isTouch&&$t(e,"touchmove",i.wheelHandler),a},Ni=function(){function e(t,i){ge||e.register(me),Be(this),this.init(t,i)}return e.prototype.init=function(t,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),tt){var n,a,s,r,o,c,l,h,d,u,m,g,p,f,y,v,w,b,x,S,C,E,M,T,L,k,A,I,P,R,N,D,z,F,O,H,_,B,q,Y,W,$,U=t=Ht(ft(t)||vt(t)||t.nodeType?{trigger:t}:t,Gt),G=U.onUpdate,Q=U.toggleClass,J=U.id,Z=U.onToggle,K=U.onRefresh,ee=U.scrub,te=U.trigger,ie=U.pin,oe=U.pinSpacing,ce=U.invalidateOnRefresh,le=U.anticipatePin,he=U.onScrubComplete,de=U.onSnapComplete,ue=U.once,ge=U.snap,we=U.pinReparent,be=U.pinSpacer,Ee=U.containerAnimation,Le=U.fastScrollEnd,Ae=U.preventOverlaps,Ie=t.horizontal||t.containerAnimation&&!1!==t.horizontal?ne:ae,Pe=!ee&&0!==ee,De=se(t.scroller||pe),ze=me.core.getCache(De),Fe=dt(De),Oe="fixed"===("pinType"in t?t.pinType:V(De,"pinType")||Fe&&"fixed"),He=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],_e=Pe&&t.toggleActions.split(" "),Be="markers"in t?t.markers:Gt.markers,qe=Fe?0:parseFloat(Ot(De)["border"+Ie.p2+Dt])||0,Ye=this,We=t.onRefreshInit&&function(){return t.onRefreshInit(Ye)},$e=function(e,t,i){var n=i.d,a=i.d2,s=i.a;return(s=V(e,"getBoundingClientRect"))?function(){return s()[n]}:function(){return(t?ut(a):e["client"+a])||0}}(De,Fe,Ie),Ue=function(e,t){return!t||~X.indexOf(e)?mt(e):function(){return Ti}}(De,Fe),Ke=0,at=0,st=0,rt=re(De,Ie);if(Ye._startClamp=Ye._endClamp=!1,Ye._dir=Ie,le*=45,Ye.scroller=De,Ye.scroll=Ee?Ee.time.bind(Ee):rt,r=rt(),Ye.vars=t,i=i||t.animation,"refreshPriority"in t&&(Re=1,-9999===t.refreshPriority&&(Qe=Ye)),ze.tweenScroll=ze.tweenScroll||{top:Ri(De,ae),left:Ri(De,ne)},Ye.tweenTo=n=ze.tweenScroll[Ie.p],Ye.scrubDuration=function(e){(z=vt(e)&&e)?D?D.duration(e):D=me.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:z,paused:!0,onComplete:function(){return he&&he(Ye)}}):(D&&D.progress(1).kill(),D=0)},i&&(i.vars.lazy=!1,i._initted&&!Ye.isReverted||!1!==i.vars.immediateRender&&!1!==t.immediateRender&&i.duration()&&i.render(0,!0,!0),Ye.animation=i.pause(),i.scrollTrigger=Ye,Ye.scrubDuration(ee),R=0,J||(J=i.vars.id)),ge&&(wt(ge)&&!ge.push||(ge={snapTo:ge}),"scrollBehavior"in ve.style&&me.set(Fe?[ve,ye]:De,{scrollBehavior:"auto"}),j.forEach(function(e){return yt(e)&&e.target===(Fe?fe.scrollingElement||ye:De)&&(e.smooth=!1)}),s=yt(ge.snapTo)?ge.snapTo:"labels"===ge.snapTo?function(e){return function(t){return me.utils.snap(qt(e),t)}}(i):"labelsDirectional"===ge.snapTo?(Y=i,function(e,t){return Yt(qt(Y))(e,t.direction)}):!1!==ge.directional?function(e,t){return Yt(ge.snapTo)(e,Ze()-at<500?0:t.direction)}:me.utils.snap(ge.snapTo),F=ge.duration||{min:.1,max:2},F=wt(F)?Se(F.min,F.max):Se(F,F),O=me.delayedCall(ge.delay||z/2||.1,function(){var e=rt(),t=Ze()-at<500,a=n.tween;if(!(t||Math.abs(Ye.getVelocity())<10)||a||Te||Ke===e)Ye.isActive&&Ke!==e&&O.restart(!0);else{var r,o,h=(e-c)/f,d=i&&!Pe?i.totalProgress():h,u=t?0:(d-N)/(Ze()-Ce)*1e3||0,m=me.utils.clamp(-h,1-h,St(u/2)*u/.185),g=h+(!1===ge.inertia?0:m),p=ge,y=p.onStart,v=p.onInterrupt,w=p.onComplete;if(r=s(g,Ye),vt(r)||(r=g),o=Math.max(0,Math.round(c+r*f)),e<=l&&e>=c&&o!==e){if(a&&!a._initted&&a.data<=St(o-e))return;!1===ge.inertia&&(m=r-h),n(o,{duration:F(St(.185*Math.max(St(g-d),St(r-d))/u/.05||0)),ease:ge.ease||"power3",data:St(o-e),onInterrupt:function(){return O.restart(!0)&&v&&v(Ye)},onComplete:function(){Ye.update(),Ke=rt(),i&&!Pe&&(D?D.resetTo("totalProgress",r,i._tTime/i._tDur):i.progress(r)),R=N=i&&!Pe?i.totalProgress():Ye.progress,de&&de(Ye),w&&w(Ye)}},e,m*f,o-e-m*f),y&&y(Ye,n.tween)}}}).pause()),J&&(ei[J]=Ye),(q=(te=Ye.trigger=se(te||!0!==ie&&ie))&&te._gsap&&te._gsap.stRevert)&&(q=q(Ye)),ie=!0===ie?te:se(ie),ft(Q)&&(Q={targets:te,className:Q}),ie&&(!1===oe||oe===Nt||(oe=!(!oe&&ie.parentNode&&ie.parentNode.style&&"flex"===Ot(ie.parentNode).display)&&Rt),Ye.pin=ie,(a=me.core.getCache(ie)).spacer?y=a.pinState:(be&&((be=se(be))&&!be.nodeType&&(be=be.current||be.nativeElement),a.spacerIsNative=!!be,be&&(a.spacerState=Mi(be))),a.spacer=b=be||fe.createElement("div"),b.classList.add("pin-spacer"),J&&b.classList.add("pin-spacer-"+J),a.pinState=y=Mi(ie)),!1!==t.force3D&&me.set(ie,{force3D:!0}),Ye.spacer=b=a.spacer,P=Ot(ie),T=P[oe+Ie.os2],S=me.getProperty(ie),C=me.quickSetter(ie,Ie.a,Ft),Si(ie,b,P),w=Mi(ie)),Be){g=wt(Be)?Ht(Be,Ut):Ut,u=Jt("scroller-start",J,De,Ie,g,0),m=Jt("scroller-end",J,De,Ie,g,0,u),x=u["offset"+Ie.op.d2];var lt=se(V(De,"content")||De);h=this.markerStart=Jt("start",J,lt,Ie,g,x,0,Ee),d=this.markerEnd=Jt("end",J,lt,Ie,g,x,0,Ee),Ee&&(B=me.quickSetter([h,d],Ie.a,Ft)),Oe||X.length&&!0===V(De,"fixedMarkers")||($=Ot(W=Fe?ve:De).position,W.style.position="absolute"===$||"fixed"===$?$:"relative",me.set([u,m],{force3D:!0}),k=me.quickSetter(u,Ie.a,Ft),I=me.quickSetter(m,Ie.a,Ft))}if(Ee){var ht=Ee.vars.onUpdate,pt=Ee.vars.onUpdateParams;Ee.eventCallback("onUpdate",function(){Ye.update(0,0,1),ht&&ht.apply(Ee,pt||[])})}if(Ye.previous=function(){return Kt[Kt.indexOf(Ye)-1]},Ye.next=function(){return Kt[Kt.indexOf(Ye)+1]},Ye.revert=function(e,t){if(!t)return Ye.kill(!0);var n=!1!==e||!Ye.enabled,a=Me;n!==Ye.isReverted&&(n&&(H=Math.max(rt(),Ye.scroll.rec||0),st=Ye.progress,_=i&&i.progress()),h&&[h,d,u,m].forEach(function(e){return e.style.display=n?"none":"block"}),n&&(Me=Ye,Ye.update(n)),!ie||we&&Ye.isActive||(n?function(e,t,i){Ei(i);var n=e._gsap;if(n.spacerIsNative)Ei(n.spacerState);else if(e._gsap.swappedIn){var a=t.parentNode;a&&(a.insertBefore(e,t),a.removeChild(t))}e._gsap.swappedIn=!1}(ie,b,y):Si(ie,b,Ot(ie),L)),n||Ye.update(n),Me=a,Ye.isReverted=n)},Ye.refresh=function(a,s,g,x){if(!Me&&Ye.enabled||s)if(ie&&a&&et)$t(e,"scrollEnd",oi);else{!Ge&&We&&We(Ye),Me=Ye,n.tween&&!g&&(n.tween.kill(),n.tween=0),D&&D.pause(),ce&&i&&(i.revert({kill:!1}).invalidate(),i.getChildren&&i.getChildren(!0,!0,!1).forEach(function(e){return e.vars.immediateRender&&e.render(0,!0,!0)})),Ye.isReverted||Ye.revert(!0,!0),Ye._subPinOffset=!1;var C,T,k,I,P,R,N,z,F,B,q,Y,W,$=$e(),j=Ue(),X=Ee?Ee.duration():gt(De,Ie),U=f<=.01||!f,G=0,V=x||0,Q=wt(g)?g.end:t.end,J=t.endTrigger||te,Z=wt(g)?g.start:t.start||(0!==t.start&&te?ie?"0 0":"0 100%":0),ee=Ye.pinnedContainer=t.pinnedContainer&&se(t.pinnedContainer,Ye),le=te&&Math.max(0,Kt.indexOf(Ye))||0,he=le;for(Be&&wt(g)&&(Y=me.getProperty(u,Ie.p),W=me.getProperty(m,Ie.p));he-- >0;)(R=Kt[he]).end||R.refresh(0,1)||(Me=Ye),!(N=R.pin)||N!==te&&N!==ie&&N!==ee||R.isReverted||(B||(B=[]),B.unshift(R),R.revert(!0,!0)),R!==Kt[he]&&(le--,he--);for(yt(Z)&&(Z=Z(Ye)),Z=it(Z,"start",Ye),c=Li(Z,te,$,Ie,rt(),h,u,Ye,j,qe,Oe,X,Ee,Ye._startClamp&&"_startClamp")||(ie?-.001:0),yt(Q)&&(Q=Q(Ye)),ft(Q)&&!Q.indexOf("+=")&&(~Q.indexOf(" ")?Q=(ft(Z)?Z.split(" ")[0]:"")+Q:(G=Qt(Q.substr(2),$),Q=ft(Z)?Z:(Ee?me.utils.mapRange(0,Ee.duration(),Ee.scrollTrigger.start,Ee.scrollTrigger.end,c):c)+G,J=te)),Q=it(Q,"end",Ye),l=Math.max(c,Li(Q||(J?"100% 0":X),J,$,Ie,rt()+G,d,m,Ye,j,qe,Oe,X,Ee,Ye._endClamp&&"_endClamp"))||-.001,G=0,he=le;he--;)(N=(R=Kt[he]).pin)&&R.start-R._pinPush<=c&&!Ee&&R.end>0&&(C=R.end-(Ye._startClamp?Math.max(0,R.start):R.start),(N===te&&R.start-R._pinPush<c||N===ee)&&isNaN(Z)&&(G+=C*(1-R.progress)),N===ie&&(V+=C));if(c+=G,l+=G,Ye._startClamp&&(Ye._startClamp+=G),Ye._endClamp&&!Ge&&(Ye._endClamp=l||-.001,l=Math.min(l,gt(De,Ie))),f=l-c||(c-=.01)&&.001,U&&(st=me.utils.clamp(0,1,me.utils.normalize(c,l,H))),Ye._pinPush=V,h&&G&&((C={})[Ie.a]="+="+G,ee&&(C[Ie.p]="-="+rt()),me.set([h,d],C)),!ie||je&&Ye.end>=gt(De,Ie)){if(te&&rt()&&!Ee)for(T=te.parentNode;T&&T!==ve;)T._pinOffset&&(c-=T._pinOffset,l-=T._pinOffset),T=T.parentNode}else C=Ot(ie),I=Ie===ae,k=rt(),E=parseFloat(S(Ie.a))+V,!X&&l>1&&(q={style:q=(Fe?fe.scrollingElement||ye:De).style,value:q["overflow"+Ie.a.toUpperCase()]},Fe&&"scroll"!==Ot(ve)["overflow"+Ie.a.toUpperCase()]&&(q.style["overflow"+Ie.a.toUpperCase()]="scroll")),Si(ie,b,C),w=Mi(ie),T=_t(ie,!0),z=Oe&&re(De,I?ne:ae)(),oe?((L=[oe+Ie.os2,f+V+Ft]).t=b,(he=oe===Rt?Bt(ie,Ie)+f+V:0)&&(L.push(Ie.d,he+Ft),"auto"!==b.style.flexBasis&&(b.style.flexBasis=he+Ft)),Ei(L),ee&&Kt.forEach(function(e){e.pin===ee&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)}),Oe&&rt(H)):(he=Bt(ie,Ie))&&"auto"!==b.style.flexBasis&&(b.style.flexBasis=he+Ft),Oe&&((P={top:T.top+(I?k-c:z)+Ft,left:T.left+(I?z:k-c)+Ft,boxSizing:"border-box",position:"fixed"})[Tt]=P["max"+Dt]=Math.ceil(T.width)+Ft,P[Lt]=P["max"+zt]=Math.ceil(T.height)+Ft,P[Nt]=P[Nt+It]=P[Nt+kt]=P[Nt+Pt]=P[Nt+At]="0",P[Rt]=C[Rt],P[Rt+It]=C[Rt+It],P[Rt+kt]=C[Rt+kt],P[Rt+Pt]=C[Rt+Pt],P[Rt+At]=C[Rt+At],v=function(e,t,i){for(var n,a=[],s=e.length,r=i?8:0;r<s;r+=2)n=e[r],a.push(n,n in t?t[n]:e[r+1]);return a.t=e.t,a}(y,P,we),Ge&&rt(0)),i?(F=i._initted,Ne(1),i.render(i.duration(),!0,!0),M=S(Ie.a)-E+f+V,A=Math.abs(f-M)>1,Oe&&A&&v.splice(v.length-2,2),i.render(0,!0,!0),F||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),Ne(0)):M=f,q&&(q.value?q.style["overflow"+Ie.a.toUpperCase()]=q.value:q.style.removeProperty("overflow-"+Ie.a));B&&B.forEach(function(e){return e.revert(!1,!0)}),Ye.start=c,Ye.end=l,r=o=Ge?H:rt(),Ee||Ge||(r<H&&rt(H),Ye.scroll.rec=0),Ye.revert(!1,!0),at=Ze(),O&&(Ke=-1,O.restart(!0)),Me=0,i&&Pe&&(i._initted||_)&&i.progress()!==_&&i.progress(_||0,!0).render(i.time(),!0,!0),(U||st!==Ye.progress||Ee||ce||i&&!i._initted)&&(i&&!Pe&&(i._initted||st||!1!==i.vars.immediateRender)&&i.totalProgress(Ee&&c<-.001&&!st?me.utils.normalize(c,l,0):st,!0),Ye.progress=U||(r-c)/f===st?0:st),ie&&oe&&(b._pinOffset=Math.round(Ye.progress*M)),D&&D.invalidate(),isNaN(Y)||(Y-=me.getProperty(u,Ie.p),W-=me.getProperty(m,Ie.p),Pi(u,Ie,Y),Pi(h,Ie,Y-(x||0)),Pi(m,Ie,W),Pi(d,Ie,W-(x||0))),U&&!Ge&&Ye.update(),!K||Ge||p||(p=!0,K(Ye),p=!1)}},Ye.getVelocity=function(){return(rt()-o)/(Ze()-Ce)*1e3||0},Ye.endAnimation=function(){bt(Ye.callbackAnimation),i&&(D?D.progress(1):i.paused()?Pe||bt(i,Ye.direction<0,1):bt(i,i.reversed()))},Ye.labelToScroll=function(e){return i&&i.labels&&(c||Ye.refresh()||c)+i.labels[e]/i.duration()*f||0},Ye.getTrailing=function(e){var t=Kt.indexOf(Ye),i=Ye.direction>0?Kt.slice(0,t).reverse():Kt.slice(t+1);return(ft(e)?i.filter(function(t){return t.vars.preventOverlaps===e}):i).filter(function(e){return Ye.direction>0?e.end<=c:e.start>=l})},Ye.update=function(e,t,a){if(!Ee||a||e){var s,h,d,m,g,p,y,x=!0===Ge?H:Ye.scroll(),S=e?0:(x-c)/f,L=S<0?0:S>1?1:S||0,P=Ye.progress;if(t&&(o=r,r=Ee?rt():x,ge&&(N=R,R=i&&!Pe?i.totalProgress():L)),le&&ie&&!Me&&!Je&&et&&(!L&&c<x+(x-o)/(Ze()-Ce)*le?L=1e-4:1===L&&l>x+(x-o)/(Ze()-Ce)*le&&(L=.9999)),L!==P&&Ye.enabled){if(m=(g=(s=Ye.isActive=!!L&&L<1)!==(!!P&&P<1))||!!L!=!!P,Ye.direction=L>P?1:-1,Ye.progress=L,m&&!Me&&(h=L&&!P?0:1===L?1:1===P?2:3,Pe&&(d=!g&&"none"!==_e[h+1]&&_e[h+1]||_e[h],y=i&&("complete"===d||"reset"===d||d in i))),Ae&&(g||y)&&(y||ee||!i)&&(yt(Ae)?Ae(Ye):Ye.getTrailing(Ae).forEach(function(e){return e.endAnimation()})),Pe||(!D||Me||Je?i&&i.totalProgress(L,!(!Me||!at&&!e)):(D._dp._time-D._start!==D._time&&D.render(D._dp._time-D._start),D.resetTo?D.resetTo("totalProgress",L,i._tTime/i._tDur):(D.vars.totalProgress=L,D.invalidate().restart()))),ie)if(e&&oe&&(b.style[oe+Ie.os2]=T),Oe){if(m){if(p=!e&&L>P&&l+1>x&&x+1>=gt(De,Ie),we)if(e||!s&&!p)Ai(ie,b);else{var z=_t(ie,!0),F=x-c;Ai(ie,ve,z.top+(Ie===ae?F:0)+Ft,z.left+(Ie===ae?0:F)+Ft)}Ei(s||p?v:w),A&&L<1&&s||C(E+(1!==L||p?0:M))}}else C(ct(E+M*L));ge&&!n.tween&&!Me&&!Je&&O.restart(!0),Q&&(g||ue&&L&&(L<1||!Xe))&&xe(Q.targets).forEach(function(e){return e.classList[s||ue?"add":"remove"](Q.className)}),G&&!Pe&&!e&&G(Ye),m&&!Me?(Pe&&(y&&("complete"===d?i.pause().totalProgress(1):"reset"===d?i.restart(!0).pause():"restart"===d?i.restart(!0):i[d]()),G&&G(Ye)),!g&&Xe||(Z&&g&&xt(Ye,Z),He[h]&&xt(Ye,He[h]),ue&&(1===L?Ye.kill(!1,1):He[h]=0),g||He[h=1===L?1:3]&&xt(Ye,He[h])),Le&&!s&&Math.abs(Ye.getVelocity())>(vt(Le)?Le:2500)&&(bt(Ye.callbackAnimation),D?D.progress(1):bt(i,"reverse"===d?1:!L,1))):Pe&&G&&!Me&&G(Ye)}if(I){var _=Ee?x/Ee.duration()*(Ee._caScrollDist||0):x;k(_+(u._isFlipped?1:0)),I(_)}B&&B(-x/Ee.duration()*(Ee._caScrollDist||0))}},Ye.enable=function(t,i){Ye.enabled||(Ye.enabled=!0,$t(De,"resize",ai),Fe||$t(De,"scroll",ii),We&&$t(e,"refreshInit",We),!1!==t&&(Ye.progress=st=0,r=o=Ke=rt()),!1!==i&&Ye.refresh())},Ye.getTween=function(e){return e&&n?n.tween:D},Ye.setPositions=function(e,t,i,n){if(Ee){var a=Ee.scrollTrigger,s=Ee.duration(),r=a.end-a.start;e=a.start+r*e/s,t=a.start+r*t/s}Ye.refresh(!1,!1,{start:nt(e,i&&!!Ye._startClamp),end:nt(t,i&&!!Ye._endClamp)},n),Ye.update()},Ye.adjustPinSpacing=function(e){if(L&&e){var t=L.indexOf(Ie.d)+1;L[t]=parseFloat(L[t])+e+Ft,L[1]=parseFloat(L[1])+e+Ft,Ei(L)}},Ye.disable=function(t,i){if(Ye.enabled&&(!1!==t&&Ye.revert(!0,!0),Ye.enabled=Ye.isActive=!1,i||D&&D.pause(),H=0,a&&(a.uncache=1),We&&jt(e,"refreshInit",We),O&&(O.pause(),n.tween&&n.tween.kill()&&(n.tween=0)),!Fe)){for(var s=Kt.length;s--;)if(Kt[s].scroller===De&&Kt[s]!==Ye)return;jt(De,"resize",ai),Fe||jt(De,"scroll",ii)}},Ye.kill=function(e,n){Ye.disable(e,n),D&&!n&&D.kill(),J&&delete ei[J];var s=Kt.indexOf(Ye);s>=0&&Kt.splice(s,1),s===ke&&vi>0&&ke--,s=0,Kt.forEach(function(e){return e.scroller===Ye.scroller&&(s=1)}),s||Ge||(Ye.scroll.rec=0),i&&(i.scrollTrigger=null,e&&i.revert({kill:!1}),n||i.kill()),h&&[h,d,u,m].forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),Qe===Ye&&(Qe=0),ie&&(a&&(a.uncache=1),s=0,Kt.forEach(function(e){return e.pin===ie&&s++}),s||(a.spacer=0)),t.onKill&&t.onKill(Ye)},Kt.push(Ye),Ye.enable(!1,!1),q&&q(Ye),i&&i.add&&!f){var Ct=Ye.update;Ye.update=function(){Ye.update=Ct,j.cache++,c||l||Ye.refresh()},me.delayedCall(.01,Ye.update),f=.01,c=l=0}else Ye.refresh();ie&&function(){if(Ve!==mi){var e=Ve=mi;requestAnimationFrame(function(){return e===mi&&fi(!0)})}}()}else this.update=this.refresh=this.kill=ot},e.register=function(t){return ge||(me=t||ht(),lt()&&window.document&&e.enable(),ge=tt),ge},e.defaults=function(e){if(e)for(var t in e)Gt[t]=e[t];return Gt},e.disable=function(e,t){tt=0,Kt.forEach(function(i){return i[t?"kill":"disable"](e)}),jt(pe,"wheel",ii),jt(fe,"scroll",ii),clearInterval(Ee),jt(fe,"touchcancel",ot),jt(ve,"touchstart",ot),Wt(jt,fe,"pointerdown,touchstart,mousedown",st),Wt(jt,fe,"pointerup,touchend,mouseup",rt),be.kill(),pt(jt);for(var i=0;i<j.length;i+=3)Xt(jt,j[i],j[i+1]),Xt(jt,j[i],j[i+2])},e.enable=function(){if(pe=window,fe=document,ye=fe.documentElement,ve=fe.body,me&&(xe=me.utils.toArray,Se=me.utils.clamp,Be=me.core.context||ot,Ne=me.core.suppressOverwrites||ot,qe=pe.history.scrollRestoration||"auto",yi=pe.pageYOffset||0,me.core.globals("ScrollTrigger",e),ve)){tt=1,(Ye=document.createElement("div")).style.height="100vh",Ye.style.position="absolute",gi(),at(),ue.register(me),e.isTouch=ue.isTouch,_e=ue.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Fe=1===ue.isTouch,$t(pe,"wheel",ii),we=[pe,fe,ye,ve],me.matchMedia&&(e.matchMedia=function(e){var t,i=me.matchMedia();for(t in e)i.add(t,e[t]);return i},me.addEventListener("matchMediaInit",function(){return di()}),me.addEventListener("matchMediaRevert",function(){return hi()}),me.addEventListener("matchMedia",function(){fi(0,1),ci("matchMedia")}),me.matchMedia().add("(orientation: portrait)",function(){return ni(),ni})),ni(),$t(fe,"scroll",ii);var t,i,n=ve.hasAttribute("style"),a=ve.style,s=a.borderTopStyle,r=me.core.Animation.prototype;for(r.revert||Object.defineProperty(r,"revert",{value:function(){return this.time(-.01,!0)}}),a.borderTopStyle="solid",t=_t(ve),ae.m=Math.round(t.top+ae.sc())||0,ne.m=Math.round(t.left+ne.sc())||0,s?a.borderTopStyle=s:a.removeProperty("border-top-style"),n||(ve.setAttribute("style",""),ve.removeAttribute("style")),Ee=setInterval(ti,250),me.delayedCall(.5,function(){return Je=0}),$t(fe,"touchcancel",ot),$t(ve,"touchstart",ot),Wt($t,fe,"pointerdown,touchstart,mousedown",st),Wt($t,fe,"pointerup,touchend,mouseup",rt),Le=me.utils.checkPrefix("transform"),xi.push(Le),ge=Ze(),be=me.delayedCall(.2,fi).pause(),Pe=[fe,"visibilitychange",function(){var e=pe.innerWidth,t=pe.innerHeight;fe.hidden?(Ae=e,Ie=t):Ae===e&&Ie===t||ai()},fe,"DOMContentLoaded",fi,pe,"load",fi,pe,"resize",ai],pt($t),Kt.forEach(function(e){return e.enable(0,1)}),i=0;i<j.length;i+=3)Xt(jt,j[i],j[i+1]),Xt(jt,j[i],j[i+2])}},e.config=function(t){"limitCallbacks"in t&&(Xe=!!t.limitCallbacks);var i=t.syncInterval;i&&clearInterval(Ee)||(Ee=i)&&setInterval(ti,i),"ignoreMobileResize"in t&&(Fe=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(pt(jt)||pt($t,t.autoRefreshEvents||"none"),De=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var i=se(e),n=j.indexOf(i),a=dt(i);~n&&j.splice(n,a?6:2),t&&(a?X.unshift(pe,t,ve,t,ye,t):X.unshift(i,t))},e.clearMatchMedia=function(e){Kt.forEach(function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)})},e.isInViewport=function(e,t,i){var n=(ft(e)?se(e):e).getBoundingClientRect(),a=n[i?Tt:Lt]*t||0;return i?n.right-a>0&&n.left+a<pe.innerWidth:n.bottom-a>0&&n.top+a<pe.innerHeight},e.positionInViewport=function(e,t,i){ft(e)&&(e=se(e));var n=e.getBoundingClientRect(),a=n[i?Tt:Lt],s=null==t?a/2:t in Vt?Vt[t]*a:~t.indexOf("%")?parseFloat(t)*a/100:parseFloat(t)||0;return i?(n.left+s)/pe.innerWidth:(n.top+s)/pe.innerHeight},e.killAll=function(e){if(Kt.slice(0).forEach(function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()}),!0!==e){var t=si.killAll||[];si={},t.forEach(function(e){return e()})}},e}();Ni.version="3.13.0",Ni.saveStyles=function(e){return e?xe(e).forEach(function(e){if(e&&e.style){var t=li.indexOf(e);t>=0&&li.splice(t,5),li.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),me.core.getCache(e),Be())}}):li},Ni.revert=function(e,t){return di(!e,t)},Ni.create=function(e,t){return new Ni(e,t)},Ni.refresh=function(e){return e?ai(!0):(ge||Ni.register())&&fi(!0)},Ni.update=function(e){return++j.cache&&wi(!0===e?2:0)},Ni.clearScrollMemory=ui,Ni.maxScroll=function(e,t){return gt(e,t?ne:ae)},Ni.getScrollFunc=function(e,t){return re(se(e),t?ne:ae)},Ni.getById=function(e){return ei[e]},Ni.getAll=function(){return Kt.filter(function(e){return"ScrollSmoother"!==e.vars.id})},Ni.isScrolling=function(){return!!et},Ni.snapDirectional=Yt,Ni.addEventListener=function(e,t){var i=si[e]||(si[e]=[]);~i.indexOf(t)||i.push(t)},Ni.removeEventListener=function(e,t){var i=si[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},Ni.batch=function(e,t){var i,n=[],a={},s=t.interval||.016,r=t.batchMax||1e9,o=function(e,t){var i=[],n=[],a=me.delayedCall(s,function(){t(i,n),i=[],n=[]}).pause();return function(e){i.length||a.restart(!0),i.push(e.trigger),n.push(e),r<=i.length&&a.progress(1)}};for(i in t)a[i]="on"===i.substr(0,2)&&yt(t[i])&&"onRefreshInit"!==i?o(0,t[i]):t[i];return yt(r)&&(r=r(),$t(Ni,"refresh",function(){return r=t.batchMax()})),xe(e).forEach(function(e){var t={};for(i in a)t[i]=a[i];t.trigger=e,n.push(Ni.create(t))}),n};var Di,zi=function(e,t,i,n){return t>n?e(n):t<0&&e(0),i>n?(n-t)/(i-t):i<0?t/(t-i):1},Fi=function e(t,i){!0===i?t.style.removeProperty("touch-action"):t.style.touchAction=!0===i?"auto":i?"pan-"+i+(ue.isTouch?" pinch-zoom":""):"none",t===ye&&e(ve,i)},Oi={auto:1,scroll:1},Hi=function(e){var t,i=e.event,n=e.target,a=e.axis,s=(i.changedTouches?i.changedTouches[0]:i).target,r=s._gsap||me.core.getCache(s),o=Ze();if(!r._isScrollT||o-r._isScrollT>2e3){for(;s&&s!==ve&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!Oi[(t=Ot(s)).overflowY]&&!Oi[t.overflowX]);)s=s.parentNode;r._isScroll=s&&s!==n&&!dt(s)&&(Oi[(t=Ot(s)).overflowY]||Oi[t.overflowX]),r._isScrollT=o}(r._isScroll||"x"===a)&&(i.stopPropagation(),i._gsapAllow=!0)},_i=function(e,t,i,n){return ue.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&Hi,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&$t(fe,ue.eventTypes[0],qi,!1,!0)},onDisable:function(){return jt(fe,ue.eventTypes[0],qi,!0)}})},Bi=/(input|label|select|textarea)/i,qi=function(e){var t=Bi.test(e.target.tagName);(t||Di)&&(e._gsapAllow=!0,Di=t)},Yi=function(e){wt(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,i,n,a,s,r,o,c,l=e,h=l.normalizeScrollX,d=l.momentum,u=l.allowNestedScroll,m=l.onRelease,g=se(e.target)||ye,p=me.core.globals().ScrollSmoother,f=p&&p.get(),y=_e&&(e.content&&se(e.content)||f&&!1!==e.content&&!f.smooth()&&f.content()),v=re(g,ae),w=re(g,ne),b=1,x=(ue.isTouch&&pe.visualViewport?pe.visualViewport.scale*pe.visualViewport.width:pe.outerWidth)/pe.innerWidth,S=0,C=yt(d)?function(){return d(t)}:function(){return d||2.8},E=_i(g,e.type,!0,u),M=function(){return a=!1},T=ot,L=ot,k=function(){i=gt(g,ae),L=Se(_e?1:0,i),h&&(T=Se(0,gt(g,ne))),n=mi},A=function(){y._gsap.y=ct(parseFloat(y._gsap.y)+v.offset)+"px",y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(y._gsap.y)+", 0, 1)",v.offset=v.cacheID=0},I=function(){k(),s.isActive()&&s.vars.scrollY>i&&(v()>i?s.progress(1)&&v(i):s.resetTo("scrollY",i))};return y&&me.set(y,{y:"+=0"}),e.ignoreCheck=function(e){return _e&&"touchmove"===e.type&&function(){if(a){requestAnimationFrame(M);var e=ct(t.deltaY/2),i=L(v.v-e);if(y&&i!==v.v+v.offset){v.offset=i-v.v;var n=ct((parseFloat(y&&y._gsap.y)||0)-v.offset);y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+n+", 0, 1)",y._gsap.y=n+"px",v.cacheID=j.cache,wi()}return!0}v.offset&&A(),a=!0}()||b>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){a=!1;var e=b;b=ct((pe.visualViewport&&pe.visualViewport.scale||1)/x),s.pause(),e!==b&&Fi(g,b>1.01||!h&&"x"),r=w(),o=v(),k(),n=mi},e.onRelease=e.onGestureStart=function(e,t){if(v.offset&&A(),t){j.cache++;var n,a,r=C();h&&(a=(n=w())+.05*r*-e.velocityX/.227,r*=zi(w,n,a,gt(g,ne)),s.vars.scrollX=T(a)),a=(n=v())+.05*r*-e.velocityY/.227,r*=zi(v,n,a,gt(g,ae)),s.vars.scrollY=L(a),s.invalidate().duration(r).play(.01),(_e&&s.vars.scrollY>=i||n>=i-1)&&me.to({},{onUpdate:I,duration:r})}else c.restart(!0);m&&m(e)},e.onWheel=function(){s._ts&&s.pause(),Ze()-S>1e3&&(n=0,S=Ze())},e.onChange=function(e,t,i,a,s){if(mi!==n&&k(),t&&h&&w(T(a[2]===t?r+(e.startX-e.x):w()+t-a[1])),i){v.offset&&A();var c=s[2]===i,l=c?o+e.startY-e.y:v()+i-s[1],d=L(l);c&&l!==d&&(o+=d-l),v(d)}(i||t)&&wi()},e.onEnable=function(){Fi(g,!h&&"x"),Ni.addEventListener("refresh",I),$t(pe,"resize",I),v.smooth&&(v.target.style.scrollBehavior="auto",v.smooth=w.smooth=!1),E.enable()},e.onDisable=function(){Fi(g,!0),jt(pe,"resize",I),Ni.removeEventListener("refresh",I),E.kill()},e.lockAxis=!1!==e.lockAxis,(t=new ue(e)).iOS=_e,_e&&!v()&&v(1),_e&&me.ticker.add(ot),c=t._dc,s=me.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:h?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Ii(v,v(),function(){return s.pause()})},onUpdate:wi,onComplete:c.vars.onComplete}),t};Ni.sort=function(e){if(yt(e))return Kt.sort(e);var t=pe.pageYOffset||0;return Ni.getAll().forEach(function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+pe.innerHeight}),Kt.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},Ni.observe=function(e){return new ue(e)},Ni.normalizeScroll=function(e){if(void 0===e)return ze;if(!0===e&&ze)return ze.enable();if(!1===e)return ze&&ze.kill(),void(ze=e);var t=e instanceof ue?e:Yi(e);return ze&&ze.target===t.target&&ze.kill(),dt(t.target)&&(ze=t),t},Ni.core={_getVelocityProp:oe,_inputObserver:_i,_scrollers:j,_proxies:X,bridge:{ss:function(){et||ci("scrollStart"),et=Ze()},ref:function(){return Me}}},ht()&&me.registerPlugin(Ni);
/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/
var Wi,$i,ji,Xi,Ui,Gi,Vi,Qi,Ji,Zi="transform",Ki=Zi+"Origin",en=function(e){var t=e.ownerDocument||e;!(Zi in e.style)&&"msTransform"in e.style&&(Ki=(Zi="msTransform")+"Origin");for(;t.parentNode&&(t=t.parentNode););if($i=window,Vi=new ln,t){Wi=t,ji=t.documentElement,Xi=t.body,(Qi=Wi.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var i=t.createElement("div"),n=t.createElement("div"),a=t&&(t.body||t.firstElementChild);a&&a.appendChild&&(a.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Ji=n.offsetParent!==i,a.removeChild(i))}return t},tn=[],nn=[],an=function(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)},sn=function e(t){return"fixed"===$i.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},rn=function e(t,i){if(t.parentNode&&(Wi||en(t))){var n=an(t),a=n?n.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=n?i?"rect":"g":"div",r=2!==i?0:100,o=3===i?100:0,c="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",l=Wi.createElementNS?Wi.createElementNS(a.replace(/^https/,"http"),s):Wi.createElement(s);return i&&(n?(Gi||(Gi=e(t)),l.setAttribute("width",.01),l.setAttribute("height",.01),l.setAttribute("transform","translate("+r+","+o+")"),Gi.appendChild(l)):(Ui||((Ui=e(t)).style.cssText=c),l.style.cssText=c+"width:0.1px;height:0.1px;top:"+o+"px;left:"+r+"px",Ui.appendChild(l))),l}throw"Need document and parent."},on=function(e,t){var i,n,a,s,r,o,c=an(e),l=e===c,h=c?tn:nn,d=e.parentNode,u=d&&!c&&d.shadowRoot&&d.shadowRoot.appendChild?d.shadowRoot:d;if(e===$i)return e;if(h.length||h.push(rn(e,1),rn(e,2),rn(e,3)),i=c?Gi:Ui,c)l?(a=function(e){var t,i=e.getCTM();return i||(t=e.style[Zi],e.style[Zi]="none",e.appendChild(Qi),i=Qi.getCTM(),e.removeChild(Qi),t?e.style[Zi]=t:e.style.removeProperty(Zi.replace(/([A-Z])/g,"-$1").toLowerCase())),i||Vi.clone()}(e),s=-a.e/a.a,r=-a.f/a.d,n=Vi):e.getBBox?(a=e.getBBox(),s=(n=(n=e.transform?e.transform.baseVal:{}).numberOfItems?n.numberOfItems>1?function(e){for(var t=new ln,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t}(n):n.getItem(0).matrix:Vi).a*a.x+n.c*a.y,r=n.b*a.x+n.d*a.y):(n=new ln,s=r=0),(l?c:d).appendChild(i),i.setAttribute("transform","matrix("+n.a+","+n.b+","+n.c+","+n.d+","+(n.e+s)+","+(n.f+r)+")");else{if(s=r=0,Ji)for(n=e.offsetParent,a=e;a&&(a=a.parentNode)&&a!==n&&a.parentNode;)($i.getComputedStyle(a)[Zi]+"").length>4&&(s=a.offsetLeft,r=a.offsetTop,a=0);if("absolute"!==(o=$i.getComputedStyle(e)).position&&"fixed"!==o.position)for(n=e.offsetParent;d&&d!==n;)s+=d.scrollLeft||0,r+=d.scrollTop||0,d=d.parentNode;(a=i.style).top=e.offsetTop-r+"px",a.left=e.offsetLeft-s+"px",a[Zi]=o[Zi],a[Ki]=o[Ki],a.position="fixed"===o.position?"fixed":"absolute",u.appendChild(i)}return i},cn=function(e,t,i,n,a,s,r){return e.a=t,e.b=i,e.c=n,e.d=a,e.e=s,e.f=r,e},ln=function(){function e(e,t,i,n,a,s){void 0===e&&(e=1),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===a&&(a=0),void 0===s&&(s=0),cn(this,e,t,i,n,a,s)}var t=e.prototype;return t.inverse=function(){var e=this.a,t=this.b,i=this.c,n=this.d,a=this.e,s=this.f,r=e*n-t*i||1e-10;return cn(this,n/r,-t/r,-i/r,e/r,(i*s-n*a)/r,-(e*s-t*a)/r)},t.multiply=function(e){var t=this.a,i=this.b,n=this.c,a=this.d,s=this.e,r=this.f,o=e.a,c=e.c,l=e.b,h=e.d,d=e.e,u=e.f;return cn(this,o*t+l*n,o*i+l*a,c*t+h*n,c*i+h*a,s+d*t+u*n,r+d*i+u*a)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(e){var t=this.a,i=this.b,n=this.c,a=this.d,s=this.e,r=this.f;return t===e.a&&i===e.b&&n===e.c&&a===e.d&&s===e.e&&r===e.f},t.apply=function(e,t){void 0===t&&(t={});var i=e.x,n=e.y,a=this.a,s=this.b,r=this.c,o=this.d,c=this.e,l=this.f;return t.x=i*a+n*r+c||0,t.y=i*s+n*o+l||0,t},e}();function hn(e,t,i,n){if(!e||!e.parentNode||(Wi||en(e)).documentElement===e)return new ln;var a=function(e){for(var t,i;e&&e!==Xi;)(i=e._gsap)&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t}(e),s=an(e)?tn:nn,r=on(e),o=s[0].getBoundingClientRect(),c=s[1].getBoundingClientRect(),l=s[2].getBoundingClientRect(),h=r.parentNode,d=sn(e),u=new ln((c.left-o.left)/100,(c.top-o.top)/100,(l.left-o.left)/100,(l.top-o.top)/100,o.left+(d?0:$i.pageXOffset||Wi.scrollLeft||ji.scrollLeft||Xi.scrollLeft||0),o.top+(d?0:$i.pageYOffset||Wi.scrollTop||ji.scrollTop||Xi.scrollTop||0));if(h.removeChild(r),a)for(o=a.length;o--;)(c=a[o]).scaleX=c.scaleY=0,c.renderTransform(1,c);return t?u.inverse():u}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var un,mn,gn,pn,fn,yn,vn,wn,bn,xn,Sn,Cn,En,Mn,Tn,Ln,kn,An,In,Pn,Rn,Nn,Dn=0,zn=function(){return"undefined"!=typeof window},Fn=function(){return un||zn()&&(un=window.gsap)&&un.registerPlugin&&un},On=function(e){return"function"==typeof e},Hn=function(e){return"object"==typeof e},_n=function(e){return void 0===e},Bn=function(){return!1},qn="transform",Yn="transformOrigin",Wn=function(e){return Math.round(1e4*e)/1e4},$n=Array.isArray,jn=function(e,t){var i=gn.createElementNS?gn.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),e):gn.createElement(e);return i.style?i:gn.createElement(e)},Xn=180/Math.PI,Un=1e20,Gn=new ln,Vn=Date.now||function(){return(new Date).getTime()},Qn=[],Jn={},Zn=0,Kn=/^(?:a|input|textarea|button|select)$/i,ea=0,ta={},ia={},na=function(e,t){var i,n={};for(i in e)n[i]=t?e[i]*t:e[i];return n},aa=function e(t,i){for(var n,a=t.length;a--;)i?t[a].style.touchAction=i:t[a].style.removeProperty("touch-action"),(n=t[a].children)&&n.length&&e(n,i)},sa=function(){return Qn.forEach(function(e){return e()})},ra=function(){return!Qn.length&&un.ticker.remove(sa)},oa=function(e){for(var t=Qn.length;t--;)Qn[t]===e&&Qn.splice(t,1);un.to(ra,{overwrite:!0,delay:15,duration:0,onComplete:ra,data:"_draggable"})},ca=function(e,t,i,n){if(e.addEventListener){var a=En[t];n=n||(Sn?{passive:!1}:null),e.addEventListener(a||t,i,n),a&&t!==a&&e.addEventListener(t,i,n)}},la=function(e,t,i,n){if(e.removeEventListener){var a=En[t];e.removeEventListener(a||t,i,n),a&&t!==a&&e.removeEventListener(t,i,n)}},ha=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},da=function e(t){Mn=t.touches&&Dn<t.touches.length,la(t.target,"touchend",e)},ua=function(e){Mn=e.touches&&Dn<e.touches.length,ca(e.target,"touchend",da)},ma=function(e){return mn.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},ga=function(e){return mn.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},pa=function e(t,i){ca(t,"scroll",i),ya(t.parentNode)||e(t.parentNode,i)},fa=function e(t,i){la(t,"scroll",i),ya(t.parentNode)||e(t.parentNode,i)},ya=function(e){return!(e&&e!==pn&&9!==e.nodeType&&e!==gn.body&&e!==mn&&e.nodeType&&e.parentNode)},va=function(e,t){var i="x"===t?"Width":"Height",n="scroll"+i,a="client"+i;return Math.max(0,ya(e)?Math.max(pn[n],fn[n])-(mn["inner"+i]||pn[a]||fn[a]):e[n]-e[a])},wa=function e(t,i){var n=va(t,"x"),a=va(t,"y");ya(t)?t=ia:e(t.parentNode,i),t._gsMaxScrollX=n,t._gsMaxScrollY=a,i||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},ba=function(e,t,i){var n=e.style;n&&(_n(n[t])&&(t=bn(t,e)||t),null==i?n.removeProperty&&n.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):n[t]=i)},xa=function(e){return mn.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},Sa={},Ca=function(e){if(e===mn)return Sa.left=Sa.top=0,Sa.width=Sa.right=pn.clientWidth||e.innerWidth||fn.clientWidth||0,Sa.height=Sa.bottom=(e.innerHeight||0)-20<pn.clientHeight?pn.clientHeight:e.innerHeight||fn.clientHeight||0,Sa;var t=e.ownerDocument||gn,i=_n(e.pageX)?e.nodeType||_n(e.left)||_n(e.top)?xn(e)[0].getBoundingClientRect():e:{left:e.pageX-ga(t),top:e.pageY-ma(t),right:e.pageX-ga(t)+1,bottom:e.pageY-ma(t)+1};return _n(i.right)&&!_n(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):_n(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},Ea=function(e,t,i){var n,a=e.vars,s=a[i],r=e._listeners[t];return On(s)&&(n=s.apply(a.callbackScope||e,a[i+"Params"]||[e.pointerEvent])),r&&!1===e.dispatchEvent(t)&&(n=!1),n},Ma=function(e,t){var i,n,a,s=xn(e)[0];return s.nodeType||s===mn?La(s,t):_n(e.left)?{left:n=e.min||e.minX||e.minRotation||0,top:i=e.min||e.minY||0,width:(e.max||e.maxX||e.maxRotation||0)-n,height:(e.max||e.maxY||0)-i}:(a={x:0,y:0},{left:e.left-a.x,top:e.top-a.y,width:e.width,height:e.height})},Ta={},La=function(e,t){t=xn(t)[0];var i,n,a,s,r,o,c,l,h,d,u,m,g,p=e.getBBox&&e.ownerSVGElement,f=e.ownerDocument||gn;if(e===mn)a=ma(f),n=(i=ga(f))+(f.documentElement.clientWidth||e.innerWidth||f.body.clientWidth||0),s=a+((e.innerHeight||0)-20<f.documentElement.clientHeight?f.documentElement.clientHeight:e.innerHeight||f.body.clientHeight||0);else{if(t===mn||_n(t))return e.getBoundingClientRect();i=a=0,p?(u=(d=e.getBBox()).width,m=d.height):(e.viewBox&&(d=e.viewBox.baseVal)&&(i=d.x||0,a=d.y||0,u=d.width,m=d.height),u||(d="border-box"===(g=xa(e)).boxSizing,u=(parseFloat(g.width)||e.clientWidth||0)+(d?0:parseFloat(g.borderLeftWidth)+parseFloat(g.borderRightWidth)),m=(parseFloat(g.height)||e.clientHeight||0)+(d?0:parseFloat(g.borderTopWidth)+parseFloat(g.borderBottomWidth)))),n=u,s=m}return e===t?{left:i,top:a,width:n-i,height:s-a}:(o=(r=hn(t,!0).multiply(hn(e))).apply({x:i,y:a}),c=r.apply({x:n,y:a}),l=r.apply({x:n,y:s}),h=r.apply({x:i,y:s}),{left:i=Math.min(o.x,c.x,l.x,h.x),top:a=Math.min(o.y,c.y,l.y,h.y),width:Math.max(o.x,c.x,l.x,h.x)-i,height:Math.max(o.y,c.y,l.y,h.y)-a})},ka=function(e,t,i,n,a,s){var r,o,c,l={};if(t)if(1!==a&&t instanceof Array){if(l.end=r=[],c=t.length,Hn(t[0]))for(o=0;o<c;o++)r[o]=na(t[o],a);else for(o=0;o<c;o++)r[o]=t[o]*a;i+=1.1,n-=1.1}else On(t)?l.end=function(i){var n,s,r=t.call(e,i);if(1!==a)if(Hn(r)){for(s in n={},r)n[s]=r[s]*a;r=n}else r*=a;return r}:l.end=t;return(i||0===i)&&(l.max=i),(n||0===n)&&(l.min=n),s&&(l.velocity=0),l},Aa=function e(t){var i;return!(!t||!t.getAttribute||t===fn)&&(!("true"!==(i=t.getAttribute("data-clickable"))&&("false"===i||!Kn.test(t.nodeName+"")&&"true"!==t.getAttribute("contentEditable")))||e(t.parentNode))},Ia=function(e,t){for(var i,n=e.length;n--;)(i=e[n]).ondragstart=i.onselectstart=t?null:Bn,un.set(i,{lazy:!0,userSelect:t?"text":"none"})},Pa=function e(t){return"fixed"===xa(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},Ra=function(e,t){e=un.utils.toArray(e)[0],t=t||{};var i,n,a,s,r,o,c=document.createElement("div"),l=c.style,h=e.firstChild,d=0,u=0,m=e.scrollTop,g=e.scrollLeft,p=e.scrollWidth,f=e.scrollHeight,y=0,v=0,w=0;Rn&&!1!==t.force3D?(r="translate3d(",o="px,0px)"):qn&&(r="translate(",o="px)"),this.scrollTop=function(e,t){if(!arguments.length)return-this.top();this.top(-e,t)},this.scrollLeft=function(e,t){if(!arguments.length)return-this.left();this.left(-e,t)},this.left=function(i,n){if(!arguments.length)return-(e.scrollLeft+u);var a=e.scrollLeft-g,s=u;if((a>2||a<-2)&&!n)return g=e.scrollLeft,un.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-g),void(t.onKill&&t.onKill());(i=-i)<0?(u=i-.5|0,i=0):i>v?(u=i-v|0,i=v):u=0,(u||s)&&(this._skip||(l[qn]=r+-u+"px,"+-d+o),u+y>=0&&(l.paddingRight=u+y+"px")),e.scrollLeft=0|i,g=e.scrollLeft},this.top=function(i,n){if(!arguments.length)return-(e.scrollTop+d);var a=e.scrollTop-m,s=d;if((a>2||a<-2)&&!n)return m=e.scrollTop,un.killTweensOf(this,{top:1,scrollTop:1}),this.top(-m),void(t.onKill&&t.onKill());(i=-i)<0?(d=i-.5|0,i=0):i>w?(d=i-w|0,i=w):d=0,(d||s)&&(this._skip||(l[qn]=r+-u+"px,"+-d+o)),e.scrollTop=0|i,m=e.scrollTop},this.maxScrollTop=function(){return w},this.maxScrollLeft=function(){return v},this.disable=function(){for(h=c.firstChild;h;)s=h.nextSibling,e.appendChild(h),h=s;e===c.parentNode&&e.removeChild(c)},this.enable=function(){if((h=e.firstChild)!==c){for(;h;)s=h.nextSibling,c.appendChild(h),h=s;e.appendChild(c),this.calibrate()}},this.calibrate=function(t){var s,r,o,h=e.clientWidth===i;m=e.scrollTop,g=e.scrollLeft,h&&e.clientHeight===n&&c.offsetHeight===a&&p===e.scrollWidth&&f===e.scrollHeight&&!t||((d||u)&&(r=this.left(),o=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),s=xa(e),h&&!t||(l.display="block",l.width="auto",l.paddingRight="0px",(y=Math.max(0,e.scrollWidth-e.clientWidth))&&(y+=parseFloat(s.paddingLeft)+(Nn?parseFloat(s.paddingRight):0))),l.display="inline-block",l.position="relative",l.overflow="visible",l.verticalAlign="top",l.boxSizing="content-box",l.width="100%",l.paddingRight=y+"px",Nn&&(l.paddingBottom=s.paddingBottom),i=e.clientWidth,n=e.clientHeight,p=e.scrollWidth,f=e.scrollHeight,v=e.scrollWidth-i,w=e.scrollHeight-n,a=c.offsetHeight,l.display="block",(r||o)&&(this.left(r),this.top(o)))},this.content=c,this.element=e,this._skip=!1,this.enable()},Na=function(e){if(zn()&&document.body){var t=window&&window.navigator;mn=window,gn=document,pn=gn.documentElement,fn=gn.body,yn=jn("div"),An=!!window.PointerEvent,(vn=jn("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",kn="grab"===vn.style.cursor?"grab":"move",Tn=t&&-1!==t.userAgent.toLowerCase().indexOf("android"),Cn="ontouchstart"in pn&&"orientation"in mn||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),n=jn("div"),a=jn("div"),s=a.style,r=fn,s.display="inline-block",s.position="relative",n.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",n.appendChild(a),r.appendChild(n),i=a.offsetHeight+18>n.scrollHeight,r.removeChild(n),Nn=i,En=function(e){for(var t=e.split(","),i=(("onpointerdown"in yn?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in yn?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":e).split(",")),n={},a=4;--a>-1;)n[t[a]]=i[a],n[i[a]]=t[a];try{pn.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Sn=1}}))}catch(s){}return n}("touchstart,touchmove,touchend,touchcancel"),ca(gn,"touchcancel",Bn),ca(mn,"touchmove",Bn),fn&&fn.addEventListener("touchstart",Bn),ca(gn,"contextmenu",function(){for(var e in Jn)Jn[e].isPressed&&Jn[e].endDrag()}),un=wn=Fn()}var i,n,a,s,r;un&&(Ln=un.plugins.inertia,In=un.core.context||function(){},bn=un.utils.checkPrefix,qn=bn(qn),Yn=bn(Yn),xn=un.utils.toArray,Pn=un.core.getStyleSaver,Rn=!!bn("perspective"))},Da=function(e){var t,i;function n(t,i){var a;a=e.call(this)||this,wn||Na(),t=xn(t)[0],a.styles=Pn&&Pn(t,"transform,left,top"),Ln||(Ln=un.plugins.inertia),a.vars=i=na(i||{}),a.target=t,a.x=a.y=a.rotation=0,a.dragResistance=parseFloat(i.dragResistance)||0,a.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,a.lockAxis=i.lockAxis,a.autoScroll=i.autoScroll||0,a.lockedAxis=null,a.allowEventDefault=!!i.allowEventDefault,un.getProperty(t,"x");var s,r,o,c,l,h,d,u,m,g,p,f,y,v,w,b,x,S,C,E,M,T,L,k,A,I,P,R,N,D,z,F,O,H=(i.type||"x,y").toLowerCase(),_=~H.indexOf("x")||~H.indexOf("y"),B=-1!==H.indexOf("rotation"),q=B?"rotation":_?"x":"left",Y=_?"y":"top",W=!(!~H.indexOf("x")&&!~H.indexOf("left")&&"scroll"!==H),$=!(!~H.indexOf("y")&&!~H.indexOf("top")&&"scroll"!==H),j=i.minimumMovement||2,X=dn(a),U=xn(i.trigger||i.handle||t),G={},V=0,Q=!1,J=i.autoScrollMarginTop||40,Z=i.autoScrollMarginRight||40,K=i.autoScrollMarginBottom||40,ee=i.autoScrollMarginLeft||40,te=i.clickableTest||Aa,ie=0,ne=t._gsap||un.core.getCache(t),ae=Pa(t),se=function(e,i){return parseFloat(ne.get(t,e,i))},re=t.ownerDocument||gn,oe=function(e){return ha(e),e.stopImmediatePropagation&&e.stopImmediatePropagation(),!1},ce=function e(i){if(X.autoScroll&&X.isDragging&&(Q||x)){var n,a,s,o,c,l,h,d,m=t,g=15*X.autoScroll;for(Q=!1,ia.scrollTop=null!=mn.pageYOffset?mn.pageYOffset:null!=re.documentElement.scrollTop?re.documentElement.scrollTop:re.body.scrollTop,ia.scrollLeft=null!=mn.pageXOffset?mn.pageXOffset:null!=re.documentElement.scrollLeft?re.documentElement.scrollLeft:re.body.scrollLeft,o=X.pointerX-ia.scrollLeft,c=X.pointerY-ia.scrollTop;m&&!a;)n=(a=ya(m.parentNode))?ia:m.parentNode,s=a?{bottom:Math.max(pn.clientHeight,mn.innerHeight||0),right:Math.max(pn.clientWidth,mn.innerWidth||0),left:0,top:0}:n.getBoundingClientRect(),l=h=0,$&&((d=n._gsMaxScrollY-n.scrollTop)<0?h=d:c>s.bottom-K&&d?(Q=!0,h=Math.min(d,g*(1-Math.max(0,s.bottom-c)/K)|0)):c<s.top+J&&n.scrollTop&&(Q=!0,h=-Math.min(n.scrollTop,g*(1-Math.max(0,c-s.top)/J)|0)),h&&(n.scrollTop+=h)),W&&((d=n._gsMaxScrollX-n.scrollLeft)<0?l=d:o>s.right-Z&&d?(Q=!0,l=Math.min(d,g*(1-Math.max(0,s.right-o)/Z)|0)):o<s.left+ee&&n.scrollLeft&&(Q=!0,l=-Math.min(n.scrollLeft,g*(1-Math.max(0,o-s.left)/ee)|0)),l&&(n.scrollLeft+=l)),a&&(l||h)&&(mn.scrollTo(n.scrollLeft,n.scrollTop),xe(X.pointerX+l,X.pointerY+h)),m=n}if(x){var p=X.x,f=X.y;B?(X.deltaX=p-parseFloat(ne.rotation),X.rotation=p,ne.rotation=p+"deg",ne.renderTransform(1,ne)):r?($&&(X.deltaY=f-r.top(),r.top(f)),W&&(X.deltaX=p-r.left(),r.left(p))):_?($&&(X.deltaY=f-parseFloat(ne.y),ne.y=f+"px"),W&&(X.deltaX=p-parseFloat(ne.x),ne.x=p+"px"),ne.renderTransform(1,ne)):($&&(X.deltaY=f-parseFloat(t.style.top||0),t.style.top=f+"px"),W&&(X.deltaX=p-parseFloat(t.style.left||0),t.style.left=p+"px")),!u||i||R||(R=!0,!1===Ea(X,"drag","onDrag")&&(W&&(X.x-=X.deltaX),$&&(X.y-=X.deltaY),e(!0)),R=!1)}x=!1},le=function(e,i){var n,a,s=X.x,o=X.y;t._gsap||(ne=un.core.getCache(t)),ne.uncache&&un.getProperty(t,"x"),_?(X.x=parseFloat(ne.x),X.y=parseFloat(ne.y)):B?X.x=X.rotation=parseFloat(ne.rotation):r?(X.y=r.top(),X.x=r.left()):(X.y=parseFloat(t.style.top||(a=xa(t))&&a.top)||0,X.x=parseFloat(t.style.left||(a||{}).left)||0),(C||E||M)&&!i&&(X.isDragging||X.isThrowing)&&(M&&(ta.x=X.x,ta.y=X.y,(n=M(ta)).x!==X.x&&(X.x=n.x,x=!0),n.y!==X.y&&(X.y=n.y,x=!0)),C&&(n=C(X.x))!==X.x&&(X.x=n,B&&(X.rotation=n),x=!0),E&&((n=E(X.y))!==X.y&&(X.y=n),x=!0)),x&&ce(!0),e||(X.deltaX=X.x-s,X.deltaY=X.y-o,Ea(X,"throwupdate","onThrowUpdate"))},he=function(e,t,i,n){return null==t&&(t=-Un),null==i&&(i=Un),On(e)?function(a){var s=X.isPressed?1-X.edgeResistance:1;return e.call(X,(a>i?i+(a-i)*s:a<t?t+(a-t)*s:a)*n)*n}:$n(e)?function(n){for(var a,s,r=e.length,o=0,c=Un;--r>-1;)(s=(a=e[r])-n)<0&&(s=-s),s<c&&a>=t&&a<=i&&(o=r,c=s);return e[o]}:isNaN(e)?function(e){return e}:function(){return e*n}},de=function(){var e,n,a,s;d=!1,r?(r.calibrate(),X.minX=p=-r.maxScrollLeft(),X.minY=y=-r.maxScrollTop(),X.maxX=g=X.maxY=f=0,d=!0):i.bounds&&(e=Ma(i.bounds,t.parentNode),B?(X.minX=p=e.left,X.maxX=g=e.left+e.width,X.minY=y=X.maxY=f=0):_n(i.bounds.maxX)&&_n(i.bounds.maxY)?(n=Ma(t,t.parentNode),X.minX=p=Math.round(se(q,"px")+e.left-n.left),X.minY=y=Math.round(se(Y,"px")+e.top-n.top),X.maxX=g=Math.round(p+(e.width-n.width)),X.maxY=f=Math.round(y+(e.height-n.height))):(e=i.bounds,X.minX=p=e.minX,X.minY=y=e.minY,X.maxX=g=e.maxX,X.maxY=f=e.maxY),p>g&&(X.minX=g,X.maxX=g=p,p=X.minX),y>f&&(X.minY=f,X.maxY=f=y,y=X.minY),B&&(X.minRotation=p,X.maxRotation=g),d=!0),i.liveSnap&&(a=!0===i.liveSnap?i.snap||{}:i.liveSnap,s=$n(a)||On(a),B?(C=he(s?a:a.rotation,p,g,1),E=null):a.points?M=function(e,t,i,n,a,s,r){return s=s&&s<Un?s*s:Un,On(e)?function(o){var c,l,h,d=X.isPressed?1-X.edgeResistance:1,u=o.x,m=o.y;return o.x=u=u>i?i+(u-i)*d:u<t?t+(u-t)*d:u,o.y=m=m>a?a+(m-a)*d:m<n?n+(m-n)*d:m,(c=e.call(X,o))!==o&&(o.x=c.x,o.y=c.y),1!==r&&(o.x*=r,o.y*=r),s<Un&&(l=o.x-u)*l+(h=o.y-m)*h>s&&(o.x=u,o.y=m),o}:$n(e)?function(t){for(var i,n,a,r,o=e.length,c=0,l=Un;--o>-1;)(r=(i=(a=e[o]).x-t.x)*i+(n=a.y-t.y)*n)<l&&(c=o,l=r);return l<=s?e[c]:t}:function(e){return e}}(s?a:a.points,p,g,y,f,a.radius,r?-1:1):(W&&(C=he(s?a:a.x||a.left||a.scrollLeft,p,g,r?-1:1)),$&&(E=he(s?a:a.y||a.top||a.scrollTop,y,f,r?-1:1))))},ue=function(){X.isThrowing=!1,Ea(X,"throwcomplete","onThrowComplete")},me=function(){X.isThrowing=!1},ge=function(e,n){var a,s,o,c;e&&Ln?(!0===e&&(a=i.snap||i.liveSnap||{},s=$n(a)||On(a),e={resistance:(i.throwResistance||i.resistance||1e3)/(B?10:1)},B?e.rotation=ka(X,s?a:a.rotation,g,p,1,n):(W&&(e[q]=ka(X,s?a:a.points||a.x||a.left,g,p,r?-1:1,n||"x"===X.lockedAxis)),$&&(e[Y]=ka(X,s?a:a.points||a.y||a.top,f,y,r?-1:1,n||"y"===X.lockedAxis)),(a.points||$n(a)&&Hn(a[0]))&&(e.linkedProps=q+","+Y,e.radius=a.radius))),X.isThrowing=!0,c=isNaN(i.overshootTolerance)?1===i.edgeResistance?0:1-X.edgeResistance+.2:i.overshootTolerance,e.duration||(e.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?0===c||Hn(e)&&e.resistance>1e3?0:.5:i.minDuration,overshoot:c}),X.tween=o=un.to(r||t,{inertia:e,data:"_draggable",inherit:!1,onComplete:ue,onInterrupt:me,onUpdate:i.fastMode?Ea:le,onUpdateParams:i.fastMode?[X,"onthrowupdate","onThrowUpdate"]:a&&a.radius?[!1,!0]:[]}),i.fastMode||(r&&(r._skip=!0),o.render(1e9,!0,!0),le(!0,!0),X.endX=X.x,X.endY=X.y,B&&(X.endRotation=X.x),o.play(0),le(!0,!0),r&&(r._skip=!1))):d&&X.applyBounds()},pe=function(e){var i,n=k;k=hn(t.parentNode,!0),e&&X.isPressed&&!k.equals(n||new ln)&&(i=n.inverse().apply({x:o,y:c}),k.apply(i,i),o=i.x,c=i.y),k.equals(Gn)&&(k=null)},fe=function(){var e,i,n,a=1-X.edgeResistance,s=ae?ga(re):0,u=ae?ma(re):0;_&&(ne.x=se(q,"px")+"px",ne.y=se(Y,"px")+"px",ne.renderTransform()),pe(!1),Ta.x=X.pointerX-s,Ta.y=X.pointerY-u,k&&k.apply(Ta,Ta),o=Ta.x,c=Ta.y,x&&(xe(X.pointerX,X.pointerY),ce(!0)),F=hn(t),r?(de(),h=r.top(),l=r.left()):(ye()?(le(!0,!0),de()):X.applyBounds(),B?(e=t.ownerSVGElement?[ne.xOrigin-t.getBBox().x,ne.yOrigin-t.getBBox().y]:(xa(t)[Yn]||"0 0").split(" "),b=X.rotationOrigin=hn(t).apply({x:parseFloat(e[0])||0,y:parseFloat(e[1])||0}),le(!0,!0),i=X.pointerX-b.x-s,n=b.y-X.pointerY+u,l=X.x,h=X.y=Math.atan2(n,i)*Xn):(h=se(Y,"px"),l=se(q,"px"))),d&&a&&(l>g?l=g+(l-g)/a:l<p&&(l=p-(p-l)/a),B||(h>f?h=f+(h-f)/a:h<y&&(h=y-(y-h)/a))),X.startX=l=Wn(l),X.startY=h=Wn(h)},ye=function(){return X.tween&&X.tween.isActive()},ve=function(){!vn.parentNode||ye()||X.isDragging||vn.parentNode.removeChild(vn)},we=function(e,a){var l;if(!s||X.isPressed||!e||!("mousedown"!==e.type&&"pointerdown"!==e.type||a)&&Vn()-ie<30&&En[X.pointerEvent.type])z&&e&&s&&ha(e);else{if(A=ye(),O=!1,X.pointerEvent=e,En[e.type]?(L=~e.type.indexOf("touch")?e.currentTarget||e.target:re,ca(L,"touchend",Se),ca(L,"touchmove",be),ca(L,"touchcancel",Se),ca(re,"touchstart",ua)):(L=null,ca(re,"mousemove",be)),P=null,An&&L||(ca(re,"mouseup",Se),e&&e.target&&ca(e.target,"mouseup",Se)),T=te.call(X,e.target)&&!1===i.dragClickables&&!a)return ca(e.target,"change",Se),Ea(X,"pressInit","onPressInit"),Ea(X,"press","onPress"),Ia(U,!0),void(z=!1);var h;if(I=!(!L||W===$||!1===X.vars.allowNativeTouchScrolling||X.vars.allowContextMenu&&e&&(e.ctrlKey||e.which>2))&&(W?"y":"x"),(z=!I&&!X.allowEventDefault)&&(ha(e),ca(mn,"touchforcechange",ha)),e.changedTouches?(e=v=e.changedTouches[0],w=e.identifier):e.pointerId?w=e.pointerId:v=w=null,Dn++,h=ce,Qn.push(h),1===Qn.length&&un.ticker.add(sa),c=X.pointerY=e.pageY,o=X.pointerX=e.pageX,Ea(X,"pressInit","onPressInit"),(I||X.autoScroll)&&wa(t.parentNode),!t.parentNode||!X.autoScroll||r||B||!t.parentNode._gsMaxScrollX||vn.parentNode||t.getBBox||(vn.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(vn)),fe(),X.tween&&X.tween.kill(),X.isThrowing=!1,un.killTweensOf(r||t,G,!0),r&&un.killTweensOf(t,{scrollTo:1},!0),X.tween=X.lockedAxis=null,(i.zIndexBoost||!B&&!r&&!1!==i.zIndexBoost)&&(t.style.zIndex=n.zIndex++),X.isPressed=!0,u=!(!i.onDrag&&!X._listeners.drag),m=!(!i.onMove&&!X._listeners.move),!1!==i.cursor||i.activeCursor)for(l=U.length;--l>-1;)un.set(U[l],{cursor:i.activeCursor||i.cursor||("grab"===kn?"grabbing":kn)});Ea(X,"press","onPress")}},be=function(e){var i,n,a,r,l,h,d=e;if(s&&!Mn&&X.isPressed&&e){if(X.pointerEvent=e,i=e.changedTouches){if((e=i[0])!==v&&e.identifier!==w){for(r=i.length;--r>-1&&(e=i[r]).identifier!==w&&e.target!==t;);if(r<0)return}}else if(e.pointerId&&w&&e.pointerId!==w)return;L&&I&&!P&&(Ta.x=e.pageX-(ae?ga(re):0),Ta.y=e.pageY-(ae?ma(re):0),k&&k.apply(Ta,Ta),n=Ta.x,a=Ta.y,((l=Math.abs(n-o))!==(h=Math.abs(a-c))&&(l>j||h>j)||Tn&&I===P)&&(P=l>h&&W?"x":"y",I&&P!==I&&ca(mn,"touchforcechange",ha),!1!==X.vars.lockAxisOnTouchScroll&&W&&$&&(X.lockedAxis="x"===P?"y":"x",On(X.vars.onLockAxis)&&X.vars.onLockAxis.call(X,d)),Tn&&I===P))?Se(d):(X.allowEventDefault||I&&(!P||I===P)||!1===d.cancelable?z&&(z=!1):(ha(d),z=!0),X.autoScroll&&(Q=!0),xe(e.pageX,e.pageY,m))}else z&&e&&s&&ha(e)},xe=function(e,t,i){var n,a,s,r,u,m,v=1-X.dragResistance,w=1-X.edgeResistance,S=X.pointerX,T=X.pointerY,L=h,A=X.x,I=X.y,P=X.endX,R=X.endY,N=X.endRotation,D=x;X.pointerX=e,X.pointerY=t,ae&&(e-=ga(re),t-=ma(re)),B?(r=Math.atan2(b.y-t,e-b.x)*Xn,(u=X.y-r)>180?(h-=360,X.y=r):u<-180&&(h+=360,X.y=r),X.x!==l||Math.max(Math.abs(o-e),Math.abs(c-t))>j?(X.y=r,s=l+(h-r)*v):s=l):(k&&(m=e*k.a+t*k.c+k.e,t=e*k.b+t*k.d+k.f,e=m),(a=t-c)<j&&a>-j&&(a=0),(n=e-o)<j&&n>-j&&(n=0),(X.lockAxis||X.lockedAxis)&&(n||a)&&((m=X.lockedAxis)||(X.lockedAxis=m=W&&Math.abs(n)>Math.abs(a)?"y":$?"x":null,m&&On(X.vars.onLockAxis)&&X.vars.onLockAxis.call(X,X.pointerEvent)),"y"===m?a=0:"x"===m&&(n=0)),s=Wn(l+n*v),r=Wn(h+a*v)),(C||E||M)&&(X.x!==s||X.y!==r&&!B)&&(M&&(ta.x=s,ta.y=r,m=M(ta),s=Wn(m.x),r=Wn(m.y)),C&&(s=Wn(C(s))),E&&(r=Wn(E(r)))),d&&(s>g?s=g+Math.round((s-g)*w):s<p&&(s=p+Math.round((s-p)*w)),B||(r>f?r=Math.round(f+(r-f)*w):r<y&&(r=Math.round(y+(r-y)*w)))),(X.x!==s||X.y!==r&&!B)&&(B?(X.endRotation=X.x=X.endX=s,x=!0):($&&(X.y=X.endY=r,x=!0),W&&(X.x=X.endX=s,x=!0)),i&&!1===Ea(X,"move","onMove")?(X.pointerX=S,X.pointerY=T,h=L,X.x=A,X.y=I,X.endX=P,X.endY=R,X.endRotation=N,x=D):!X.isDragging&&X.isPressed&&(X.isDragging=O=!0,Ea(X,"dragstart","onDragStart")))},Se=function e(n,a){if(s&&X.isPressed&&(!n||null==w||a||!(n.pointerId&&n.pointerId!==w&&n.target!==t||n.changedTouches&&!function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0}(n.changedTouches,w)))){X.isPressed=!1;var r,o,c,l,h,d=n,u=X.isDragging,m=X.vars.allowContextMenu&&n&&(n.ctrlKey||n.which>2),g=un.delayedCall(.001,ve);if(L?(la(L,"touchend",e),la(L,"touchmove",be),la(L,"touchcancel",e),la(re,"touchstart",ua)):la(re,"mousemove",be),la(mn,"touchforcechange",ha),An&&L||(la(re,"mouseup",e),n&&n.target&&la(n.target,"mouseup",e)),x=!1,u&&(V=ea=Vn(),X.isDragging=!1),oa(ce),T&&!m)return n&&(la(n.target,"change",e),X.pointerEvent=d),Ia(U,!1),Ea(X,"release","onRelease"),Ea(X,"click","onClick"),void(T=!1);for(o=U.length;--o>-1;)ba(U[o],"cursor",i.cursor||(!1!==i.cursor?kn:null));if(Dn--,n){if((r=n.changedTouches)&&(n=r[0])!==v&&n.identifier!==w){for(o=r.length;--o>-1&&(n=r[o]).identifier!==w&&n.target!==t;);if(o<0&&!a)return}X.pointerEvent=d,X.pointerX=n.pageX,X.pointerY=n.pageY}return m&&d?(ha(d),z=!0,Ea(X,"release","onRelease")):d&&!u?(z=!1,A&&(i.snap||i.bounds)&&ge(i.inertia||i.throwProps),Ea(X,"release","onRelease"),Tn&&"touchmove"===d.type||-1!==d.type.indexOf("cancel")||(Ea(X,"click","onClick"),Vn()-ie<300&&Ea(X,"doubleclick","onDoubleClick"),l=d.target||t,ie=Vn(),h=function(){ie===N||!X.enabled()||X.isPressed||d.defaultPrevented||(l.click?l.click():re.createEvent&&((c=re.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,mn,1,X.pointerEvent.screenX,X.pointerEvent.screenY,X.pointerX,X.pointerY,!1,!1,!1,!1,0,null),l.dispatchEvent(c)))},Tn||d.defaultPrevented||un.delayedCall(.05,h))):(ge(i.inertia||i.throwProps),X.allowEventDefault||!d||!1===i.dragClickables&&te.call(X,d.target)||!u||I&&(!P||I!==P)||!1===d.cancelable?z=!1:(z=!0,ha(d)),Ea(X,"release","onRelease")),ye()&&g.duration(X.tween.duration()),u&&Ea(X,"dragend","onDragEnd"),!0}z&&n&&s&&ha(n)},Ce=function(e){if(e&&X.isDragging&&!r){var i=e.target||t.parentNode,n=i.scrollLeft-i._gsScrollX,a=i.scrollTop-i._gsScrollY;(n||a)&&(k?(o-=n*k.a+a*k.c,c-=a*k.d+n*k.b):(o-=n,c-=a),i._gsScrollX+=n,i._gsScrollY+=a,xe(X.pointerX,X.pointerY))}},Ee=function(e){var t=Vn(),i=t-ie<100,n=t-V<50,a=i&&N===ie,s=X.pointerEvent&&X.pointerEvent.defaultPrevented,r=i&&D===ie,o=e.isTrusted||null==e.isTrusted&&i&&a;if((a||n&&!1!==X.vars.suppressClickOnDrag)&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),i&&(!X.pointerEvent||!X.pointerEvent.defaultPrevented)&&(!a||o&&!r))return o&&a&&(D=ie),void(N=ie);(X.isPressed||n||i)&&(o&&e.detail&&i&&!s||ha(e)),i||n||O||(e&&e.target&&(X.pointerEvent=e),Ea(X,"click","onClick"))},Me=function(e){return k?{x:e.x*k.a+e.y*k.c+k.e,y:e.x*k.b+e.y*k.d+k.f}:{x:e.x,y:e.y}};return(S=n.get(t))&&S.kill(),a.startDrag=function(e,i){var n,a,s,r;we(e||X.pointerEvent,!0),i&&!X.hitTest(e||X.pointerEvent)&&(n=Ca(e||X.pointerEvent),a=Ca(t),s=Me({x:n.left+n.width/2,y:n.top+n.height/2}),r=Me({x:a.left+a.width/2,y:a.top+a.height/2}),o-=s.x-r.x,c-=s.y-r.y),X.isDragging||(X.isDragging=O=!0,Ea(X,"dragstart","onDragStart"))},a.drag=be,a.endDrag=function(e){return Se(e||X.pointerEvent,!0)},a.timeSinceDrag=function(){return X.isDragging?0:(Vn()-V)/1e3},a.timeSinceClick=function(){return(Vn()-ie)/1e3},a.hitTest=function(e,t){return n.hitTest(X.target,e,t)},a.getDirection=function(e,i){var n,a,s,r,o,c,d="velocity"===e&&Ln?e:Hn(e)&&!B?"element":"start";return"element"===d&&(o=Ca(X.target),c=Ca(e)),n="start"===d?X.x-l:"velocity"===d?Ln.getVelocity(t,q):o.left+o.width/2-(c.left+c.width/2),B?n<0?"counter-clockwise":"clockwise":(i=i||2,a="start"===d?X.y-h:"velocity"===d?Ln.getVelocity(t,Y):o.top+o.height/2-(c.top+c.height/2),r=(s=Math.abs(n/a))<1/i?"":n<0?"left":"right",s<i&&(""!==r&&(r+="-"),r+=a<0?"up":"down"),r)},a.applyBounds=function(e,n){var a,s,r,o,c,l;if(e&&i.bounds!==e)return i.bounds=e,X.update(!0,n);if(le(!0),de(),d&&!ye()){if(a=X.x,s=X.y,a>g?a=g:a<p&&(a=p),s>f?s=f:s<y&&(s=y),(X.x!==a||X.y!==s)&&(r=!0,X.x=X.endX=a,B?X.endRotation=a:X.y=X.endY=s,x=!0,ce(!0),X.autoScroll&&!X.isDragging))for(wa(t.parentNode),o=t,ia.scrollTop=null!=mn.pageYOffset?mn.pageYOffset:null!=re.documentElement.scrollTop?re.documentElement.scrollTop:re.body.scrollTop,ia.scrollLeft=null!=mn.pageXOffset?mn.pageXOffset:null!=re.documentElement.scrollLeft?re.documentElement.scrollLeft:re.body.scrollLeft;o&&!l;)c=(l=ya(o.parentNode))?ia:o.parentNode,$&&c.scrollTop>c._gsMaxScrollY&&(c.scrollTop=c._gsMaxScrollY),W&&c.scrollLeft>c._gsMaxScrollX&&(c.scrollLeft=c._gsMaxScrollX),o=c;X.isThrowing&&(r||X.endX>g||X.endX<p||X.endY>f||X.endY<y)&&ge(i.inertia||i.throwProps,r)}return X},a.update=function(e,i,n){if(i&&X.isPressed){var a=hn(t),s=F.apply({x:X.x-l,y:X.y-h}),r=hn(t.parentNode,!0);r.apply({x:a.e-s.x,y:a.f-s.y},s),X.x-=s.x-r.e,X.y-=s.y-r.f,ce(!0),fe()}var o=X.x,c=X.y;return pe(!i),e?X.applyBounds():(x&&n&&ce(!0),le(!0)),i&&(xe(X.pointerX,X.pointerY),x&&ce(!0)),X.isPressed&&!i&&(W&&Math.abs(o-X.x)>.01||$&&Math.abs(c-X.y)>.01&&!B)&&fe(),X.autoScroll&&(wa(t.parentNode,X.isDragging),Q=X.isDragging,ce(!0),fa(t,Ce),pa(t,Ce)),X},a.enable=function(e){var n,a,o,c={lazy:!0};if(!1!==i.cursor&&(c.cursor=i.cursor||kn),un.utils.checkPrefix("touchCallout")&&(c.touchCallout="none"),"soft"!==e){for(aa(U,W===$?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":W?"pan-y":"pan-x"),a=U.length;--a>-1;)o=U[a],An||ca(o,"mousedown",we),ca(o,"touchstart",we),ca(o,"click",Ee,!0),un.set(o,c),o.getBBox&&o.ownerSVGElement&&W!==$&&un.set(o.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":W?"pan-y":"pan-x"}),i.allowContextMenu||ca(o,"contextmenu",oe);Ia(U,!1)}return pa(t,Ce),s=!0,Ln&&"soft"!==e&&Ln.track(r||t,_?"x,y":B?"rotation":"top,left"),t._gsDragID=n=t._gsDragID||"d"+Zn++,Jn[n]=X,r&&(r.enable(),r.element._gsDragID=n),(i.bounds||B)&&fe(),i.bounds&&X.applyBounds(),X},a.disable=function(e){for(var i,n=X.isDragging,a=U.length;--a>-1;)ba(U[a],"cursor",null);if("soft"!==e){for(aa(U,null),a=U.length;--a>-1;)i=U[a],ba(i,"touchCallout",null),la(i,"mousedown",we),la(i,"touchstart",we),la(i,"click",Ee,!0),la(i,"contextmenu",oe);Ia(U,!0),L&&(la(L,"touchcancel",Se),la(L,"touchend",Se),la(L,"touchmove",be)),la(re,"mouseup",Se),la(re,"mousemove",be)}return fa(t,Ce),s=!1,Ln&&"soft"!==e&&(Ln.untrack(r||t,_?"x,y":B?"rotation":"top,left"),X.tween&&X.tween.kill()),r&&r.disable(),oa(ce),X.isDragging=X.isPressed=T=!1,n&&Ea(X,"dragend","onDragEnd"),X},a.enabled=function(e,t){return arguments.length?e?X.enable(t):X.disable(t):s},a.kill=function(){return X.isThrowing=!1,X.tween&&X.tween.kill(),X.disable(),un.set(U,{clearProps:"userSelect"}),delete Jn[t._gsDragID],X},a.revert=function(){this.kill(),this.styles&&this.styles.revert()},~H.indexOf("scroll")&&(r=a.scrollProxy=new Ra(t,function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e}({onKill:function(){X.isPressed&&Se(null)}},i)),t.style.overflowY=$&&!Cn?"auto":"hidden",t.style.overflowX=W&&!Cn?"auto":"hidden",t=r.content),B?G.rotation=1:(W&&(G[q]=1),$&&(G[Y]=1)),ne.force3D=!("force3D"in i)||i.force3D,In(dn(a)),a.enable(),a}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.register=function(e){un=e,Na()},n.create=function(e,t){return wn||Na(),xn(e).map(function(e){return new n(e,t)})},n.get=function(e){return Jn[(xn(e)[0]||{})._gsDragID]},n.timeSinceDrag=function(){return(Vn()-ea)/1e3},n.hitTest=function(e,t,i){if(e===t)return!1;var n,a,s,r=Ca(e),o=Ca(t),c=r.top,l=r.left,h=r.right,d=r.bottom,u=r.width,m=r.height,g=o.left>h||o.right<l||o.top>d||o.bottom<c;return g||!i?!g:(s=-1!==(i+"").indexOf("%"),i=parseFloat(i)||0,(n={left:Math.max(l,o.left),top:Math.max(c,o.top)}).width=Math.min(h,o.right)-n.left,n.height=Math.min(d,o.bottom)-n.top,!(n.width<0||n.height<0)&&(s?(i*=.01,(a=n.width*n.height)>=u*m*i||a>=o.width*o.height*i):n.width>i&&n.height>i))},n}(function(){function e(e){this._listeners={},this.target=e||this}var t=e.prototype;return t.addEventListener=function(e,t){var i=this._listeners[e]||(this._listeners[e]=[]);~i.indexOf(t)||i.push(t)},t.removeEventListener=function(e,t){var i=this._listeners[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},t.dispatchEvent=function(e){var t,i=this;return(this._listeners[e]||[]).forEach(function(n){return!1===n.call(i,{type:e,target:i.target})&&(t=!1)}),t},e}());!function(e,t){for(var i in t)i in e||(e[i]=t[i])}(Da.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),Da.zIndex=1e3,Da.version="3.13.0",Fn()&&un.registerPlugin(Da),u.registerPlugin(Ni,Da);class za{constructor(){this.teamScrollTween=null,this.teamAnimationConfig={mobile:{enableAutoScroll:!0,scrollSpeed:30,pauseOnInteraction:!0,snapToCards:!0,showScrollbar:!1,enableTouchScroll:!0,enableTapToEnlarge:!0,autoResumeDelay:4e3,enlargeScale:1.08},desktop:{enableAutoScroll:!0,scrollSpeed:40,pauseOnInteraction:!0,snapToCards:!1,showScrollbar:!1,enableTouchScroll:!1,enableTapToEnlarge:!1,autoResumeDelay:3e3,enlargeScale:1.05}},this.isMobile=this.detectMobile(),this.animationQuality=this.detectAnimationQuality(),this.teamInteractionTimeout=null,this.activeCardIndex=0,this.teamDraggable=null,this.resizeTimeout=null,this.tapSpeedMultiplier=1,this.lastTapTime=0,this.maxSpeedMultiplier=3,this.handleResize=this.handleResize.bind(this),this.handleVisibilityChange=this.handleVisibilityChange.bind(this),window.addEventListener("resize",this.handleResize),document.addEventListener("visibilitychange",this.handleVisibilityChange)}detectMobile(){const e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;return window.innerWidth<=768&&e||/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}detectAnimationQuality(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return"minimal";return(()=>{const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(t){const e=t.getExtension("WEBGL_debug_renderer_info");if(e){const i=t.getParameter(e.UNMASKED_RENDERER_WEBGL);return i&&(i.toLowerCase().includes("nvidia")||i.toLowerCase().includes("amd"))}}return!1})()&&(navigator.hardwareConcurrency||4)>=4?"high":(navigator.hardwareConcurrency||2)>=2?"medium":"low"}handleResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{const e=this.isMobile;this.isMobile=this.detectMobile(),e!==this.isMobile&&document.body.classList.contains("homepage")&&this.reinitializeTeamAnimations(),Ni.refresh()},250)}handleVisibilityChange(){if(document.hidden)this.teamScrollTween&&this.teamScrollTween.pause(),u.globalTimeline.pause();else{const e=this.getCurrentTeamConfig();this.teamScrollTween&&e.enableAutoScroll&&(this.teamDraggable&&(!this.teamDraggable||this.teamDraggable.isDragging||this.teamDraggable.isThrowing)||this.teamScrollTween.play()),u.globalTimeline.resume()}}getCurrentTeamConfig(){return this.isMobile?this.teamAnimationConfig.mobile:this.teamAnimationConfig.desktop}init(){document.body.classList.contains("homepage")&&(this.initHeroTextFade(),this.initLightingScroll(),this.initCoreFocusAnimations(),this.initGenericCardAnimations(),this.initScrollProgress(),this.initParallaxElements())}initHeroTextFade(){u.to(".hero-text-area",{opacity:1,y:0,duration:1.2,delay:.5,ease:"power2.out",scrollTrigger:{trigger:"#homepage-hero",start:"top 80%",toggleActions:"play none none reverse"}})}initLightingScroll(){}initScrollProgress(){let e=document.querySelector(".scroll-progress");e||(e=document.createElement("div"),e.className="scroll-progress",Object.assign(e.style,{position:"fixed",top:"0",left:"0",width:"0%",height:"3px",background:"var(--color-accent-primary)",zIndex:"10000",opacity:"0.8"}),document.body.appendChild(e)),Ni.create({trigger:"body",start:"top top",end:"bottom bottom",onUpdate:t=>{u.to(e,{width:100*t.progress+"%",duration:.05,ease:"none"})}})}initParallaxElements(){if("low"===this.animationQuality)return;u.utils.toArray("[data-parallax-speed]").forEach(e=>{const t=parseFloat(e.dataset.parallaxSpeed)||.2;u.to(e,{yPercent:-30*t,ease:"none",scrollTrigger:{trigger:e.parentElement.closest("section")||e,start:"top bottom",end:"bottom top",scrub:1.8}})})}initJourneyTimelineAnimations(){const e=u.utils.toArray(".timeline-item");0!==e.length&&e.forEach((e,t)=>{const i=t%2==0;u.fromTo(e,{opacity:0,y:50,x:i?-50:50,scale:.95},{opacity:1,y:0,x:0,scale:1,duration:"high"===this.animationQuality?.9:.7,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 90%",toggleActions:"play none none reverse"}})})}initCoreFocusAnimations(){const e=u.utils.toArray(".focus-item.card-style");0!==e.length&&u.fromTo(e,{opacity:0,y:60,scale:.9,rotationX:"high"===this.animationQuality?5:0},{opacity:1,y:0,scale:1,rotationX:0,duration:"high"===this.animationQuality?.8:.6,stagger:.08,ease:"back.out(1.4)",scrollTrigger:{trigger:".focus-grid",start:"top 88%",toggleActions:"play none none reverse"}})}initTeamAutoScroll(){const e=document.querySelector("#team-grid.team-flex-container"),t=document.querySelector(".team-scroller-wrapper");if(!e||!t||0===e.children.length||!e.children[0].classList.contains("team-card"))return void this.animateInTeamCards();this.cleanupTeamAnimations();const i=this.getCurrentTeamConfig();let n=u.utils.toArray(e.children).filter(e=>e.classList.contains("team-card"));if(0===n.length)return void this.animateInTeamCards();let a=n[0].offsetWidth;const s=parseFloat(getComputedStyle(e).gap)||25;let r=(a+s)*n.length-s;const o=t.clientWidth;if(!(r>o&&n.length>=(this.isMobile?1:3)))return u.set(e,{justifyContent:"center",width:"100%"}),void this.animateInTeamCards();if(u.set(e,{justifyContent:"flex-start",width:"max-content"}),i.enableAutoScroll){const t=document.createDocumentFragment();n.forEach(e=>{const i=e.cloneNode(!0);i.classList.add("team-card-clone"),t.appendChild(i)}),e.appendChild(t)}if(this.isMobile&&i.enableTouchScroll?this.teamDraggable=Da.create(e,{type:"x",edgeResistance:.65,bounds:t,inertia:!0,snap:!!i.snapToCards&&{x:e=>Math.round(e/(a+s))*(a+s)},onDragStart:()=>{this.teamScrollTween&&i.pauseOnInteraction&&this.teamScrollTween.pause(),clearTimeout(this.teamInteractionTimeout)},onDragEnd:()=>{if(i.enableAutoScroll&&this.teamScrollTween){const t=u.getProperty(e,"x"),a=r+s,o=a/(i.scrollSpeed*this.tapSpeedMultiplier);this.teamScrollTween.kill(),this.teamScrollTween=u.to(e,{x:`-=${a}`,duration:o,ease:"none",repeat:-1,modifiers:{x:u.utils.unitize(e=>parseFloat(e)%a)},onUpdate:()=>this.updateMobileScrollIndicators(e,n.length)}),this.teamScrollTween.seek(Math.abs(t/a)*o).play()}this.updateMobileScrollIndicators(e,n.length)},onDrag:()=>this.updateMobileScrollIndicators(e,n.length)})[0]:this.isMobile&&(e.style.overflowX="auto",e.addEventListener("scroll",()=>{this.teamScrollTween&&i.pauseOnInteraction&&this.teamScrollTween.pause(),clearTimeout(this.teamInteractionTimeout),this.teamInteractionTimeout=setTimeout(()=>{this.updateMobileScrollIndicators(e,n.length),this.teamScrollTween&&i.enableAutoScroll&&this.teamScrollTween.play()},i.autoResumeDelay)})),i.enableAutoScroll){const a=r+s;if(this.teamScrollTween=u.to(e,{x:`-=${a}`,duration:a/(i.scrollSpeed*this.tapSpeedMultiplier),ease:"none",repeat:-1,modifiers:{x:u.utils.unitize(e=>parseFloat(e)%a)},onUpdate:this.isMobile?()=>this.updateMobileScrollIndicators(e,n.length):null,paused:this.isMobile&&i.enableTouchScroll}),i.pauseOnInteraction&&!this.isMobile&&(t.addEventListener("mouseenter",()=>this.teamScrollTween&&this.teamScrollTween.pause()),t.addEventListener("mouseleave",()=>this.teamScrollTween&&this.teamScrollTween.play())),this.isMobile){let e;t.addEventListener("pointerdown",t=>{if(t.target.closest(".team-card")||t.target.closest(".scroll-indicator-dot"))return;const n=Date.now();n-this.lastTapTime<300||(this.lastTapTime=n,this.teamScrollTween&&(this.teamScrollTween.paused()&&this.teamScrollTween.play(),this.tapSpeedMultiplier<this.maxSpeedMultiplier?this.tapSpeedMultiplier+=.2:this.tapSpeedMultiplier=1,this.teamScrollTween.duration(a/(i.scrollSpeed*this.tapSpeedMultiplier))),clearTimeout(e),e=setTimeout(()=>{this.tapSpeedMultiplier=1,this.teamScrollTween&&this.teamScrollTween.duration(a/i.scrollSpeed)},8e3))})}}this.isMobile&&i.enableTapToEnlarge&&this.setupMobileTapToEnlarge(n,i),this.isMobile&&(this.addMobileScrollIndicators(t,e,n.length),this.updateMobileScrollIndicators(e,n.length)),this.animateInTeamCards()}setupMobileTapToEnlarge(e,t){e.forEach(e=>{let i,n=!1;e.addEventListener("click",a=>{this.teamDraggable&&(this.teamDraggable.isDragging||this.teamDraggable.isThrowing)||(a.preventDefault(),clearTimeout(this.teamInteractionTimeout),clearTimeout(i),n?(u.to(e,{scale:1,zIndex:1,duration:.3,ease:"power2.out"}),n=!1,this.teamScrollTween&&t.enableAutoScroll&&t.pauseOnInteraction&&(this.teamInteractionTimeout=setTimeout(()=>{this.teamScrollTween&&this.teamScrollTween.play()},t.autoResumeDelay/2))):(this.teamScrollTween&&t.pauseOnInteraction&&this.teamScrollTween.pause(),u.to(e,{scale:t.enlargeScale,zIndex:10,duration:.3,ease:"back.out(1.7)"}),n=!0,i=setTimeout(()=>{n&&(u.to(e,{scale:1,zIndex:1,duration:.3,ease:"power2.out"}),n=!1,this.teamScrollTween&&t.enableAutoScroll&&t.pauseOnInteraction&&this.teamScrollTween.play())},t.autoResumeDelay)))})})}addMobileScrollIndicators(e,t,i){let n=e.querySelector(".team-scroll-indicators");n||(n=document.createElement("div"),n.className="team-scroll-indicators",e.appendChild(n)),n.innerHTML="";for(let a=0;a<i;a++){const e=document.createElement("div");e.className="scroll-indicator-dot",e.dataset.index=a,e.addEventListener("click",()=>{this.teamScrollTween&&this.getCurrentTeamConfig().pauseOnInteraction&&this.teamScrollTween.pause();const e=(t.children[0]?.offsetWidth||280)+(parseFloat(getComputedStyle(t).gap)||25),n=a*e;this.teamDraggable?u.to(this.teamDraggable.target,{x:-n,duration:.5,ease:"power2.inOut"}):t.scrollTo({left:n,behavior:"smooth"}),this.activeCardIndex=a,this.updateMobileScrollIndicators(t,i),clearTimeout(this.teamInteractionTimeout),this.getCurrentTeamConfig().enableAutoScroll&&(this.teamInteractionTimeout=setTimeout(()=>{this.teamScrollTween&&this.teamScrollTween.play()},this.getCurrentTeamConfig().autoResumeDelay))}),n.appendChild(e)}}updateMobileScrollIndicators(e,t){if(!this.isMobile||0===t||!e.parentElement)return;const i=e.parentElement.querySelector(".team-scroll-indicators");if(!i||0===i.children.length)return;let n;n=this.teamDraggable&&void 0!==this.teamDraggable.x?-this.teamDraggable.x:e.scrollLeft;const a=(e.children[0]?.offsetWidth||280)+(parseFloat(getComputedStyle(e).gap)||25);if(0===a)return;let s=n/a;(this.teamDraggable||this.teamScrollTween)&&this.getCurrentTeamConfig().enableAutoScroll&&e.children.length>t&&(s=n%(a*t)/a,s<0&&(s+=t)),this.activeCardIndex=Math.round(s)%t,this.activeCardIndex<0&&(this.activeCardIndex+=t),Array.from(i.children).forEach((e,t)=>{e.classList.toggle("active",t===this.activeCardIndex)})}initGenericCardAnimations(){u.utils.toArray(".card-style:not(.team-card):not(.focus-item):not(.timeline-content)").forEach(e=>{u.fromTo(e,{opacity:0,y:40,scale:.95,filter:"high"!==this.animationQuality?"none":"blur(1px)"},{opacity:1,y:0,scale:1,filter:"blur(0px)",duration:"high"===this.animationQuality?.7:.5,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 88%",toggleActions:"play none none reverse"}})})}animateInTeamCards(){const e=u.utils.toArray(".team-card");if(0===e.length)return;const t=e[0].closest(".team-scroller-wrapper")||e[0].closest("#our-team")||document.querySelector("#our-team");t&&u.fromTo(e,{opacity:0,scale:.85,y:40,rotationY:"high"===this.animationQuality?8:0},{opacity:1,scale:1,y:0,rotationY:0,duration:"high"===this.animationQuality?.7:.5,stagger:.08,ease:"back.out(1.4)",scrollTrigger:{trigger:t,start:"top 85%",toggleActions:"play none none none"}})}reinitializeTeamAnimations(){this.cleanupTeamAnimations(),setTimeout(()=>{this.initTeamAutoScroll()},100)}cleanupTeamAnimations(){this.teamScrollTween&&(this.teamScrollTween.kill(),this.teamScrollTween=null),this.teamDraggable&&(this.teamDraggable.kill(),this.teamDraggable=null),Ni.getAll().forEach(e=>{e.vars.trigger&&("string"==typeof e.vars.trigger&&e.vars.trigger.includes("team")||e.vars.trigger.id&&("team-grid"===e.vars.trigger.id||"our-team"===e.vars.trigger.id)||e.vars.trigger.classList&&e.vars.trigger.classList.contains("team-scroller-wrapper"))&&e.kill()});const e=document.querySelector("#team-grid.team-flex-container");if(e){e.querySelectorAll(".team-card-clone").forEach(e=>e.remove()),u.set(e,{x:0,clearProps:"all"}),e.style.overflowX=""}const t=document.querySelector(".team-scroll-indicators");t&&t.remove()}destroy(){window.removeEventListener("resize",this.handleResize),document.removeEventListener("visibilitychange",this.handleVisibilityChange),this.cleanupTeamAnimations(),Ni.getAll().forEach(e=>e.kill()),u.globalTimeline.clear();const e=document.querySelector(".scroll-progress");e&&e.remove()}}class Fa{constructor(e,t){this.timelineElement=document.querySelector(e),this.jsonlPath=t,this.hasLoaded=!1,this.timelineElement}async fetchJourneyData(){try{const e=await fetch(this.jsonlPath);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.text()).trim().split("\n").map(e=>{try{return JSON.parse(e)}catch(t){return null}}).filter(e=>null!==e)}catch(e){return this.timelineElement&&(this.timelineElement.innerHTML="<p>Error loading journey information.</p>"),[]}}createTimelineItem(e){const t=document.createElement("div");t.className="timeline-item";const i=document.createElement("div");i.className="timeline-date",i.innerHTML=e.date;const n=document.createElement("div");n.className="timeline-content card-style";const a=document.createElement("h4");if(a.textContent=e.event,n.appendChild(a),e.details){const t=document.createElement("p");t.textContent=e.details,n.appendChild(t)}return t.appendChild(i),t.appendChild(n),t}async loadAndDisplayJourney(){if(this.hasLoaded||!this.timelineElement)return;const e=await this.fetchJourneyData();if(0===e.length)return this.timelineElement&&(this.timelineElement.innerHTML="<p>No journey milestones to display.</p>"),void(this.hasLoaded=!0);this.timelineElement.innerHTML="",e.forEach(e=>{const t=this.createTimelineItem(e);this.timelineElement.appendChild(t)}),this.hasLoaded=!0}}const Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"}));class Ha{constructor(){this.isSupported="serviceWorker"in navigator,this.registration=null,this.isRegistered=!1,this.cacheVersion="chemactiva-v1.2",this.updateAvailable=!1,this.cacheStrategies={"stale-while-revalidate":this.staleWhileRevalidate.bind(this),"cache-first":this.cacheFirst.bind(this),"network-first":this.networkFirst.bind(this),"network-only":this.networkOnly.bind(this),"cache-only":this.cacheOnly.bind(this)},this.config={staticAssets:["/css/styles.css","/css/components.css","/css/products.css","/js/main.js","/assets/images/logo.png","/assets/images/logo-small_size.png"],dynamicAssets:[],cacheRules:[{pattern:/\.(?:png|jpg|jpeg|webp|svg|gif)$/,strategy:"cache-first",maxAge:2592e6,maxEntries:100},{pattern:/\.(?:js|css)$/,strategy:"stale-while-revalidate",maxAge:6048e5,maxEntries:50},{pattern:/\.(?:html)$/,strategy:"network-first",maxAge:864e5,maxEntries:20},{pattern:/\/api\//,strategy:"network-first",maxAge:3e5,maxEntries:30}],offlinePages:["/offline.html"]}}async init(){if(!this.isSupported)return!1;try{return await this.registerServiceWorker(),this.setupUpdateHandling(),this.setupMessageHandling(),!0}catch(e){return!1}}async registerServiceWorker(){const e=this.generateServiceWorkerContent(),t=new Blob([e],{type:"application/javascript"}),i=URL.createObjectURL(t);try{return this.registration=await navigator.serviceWorker.register(i,{scope:"/"}),this.isRegistered=!0,URL.revokeObjectURL(i),this.registration}catch(n){throw n}}generateServiceWorkerContent(){const e=JSON.stringify(this.config);return`\n            const CACHE_VERSION = '${this.cacheVersion}';\n            const CONFIG = ${e};\n            \n            // Cache names\n            const STATIC_CACHE = CACHE_VERSION + '-static';\n            const DYNAMIC_CACHE = CACHE_VERSION + '-dynamic';\n            const IMAGE_CACHE = CACHE_VERSION + '-images';\n            \n            // Install event - cache static assets\n            self.addEventListener('install', (event) => {\n                console.log('Service Worker installing...');\n                \n                event.waitUntil(\n                    Promise.all([\n                        caches.open(STATIC_CACHE).then(cache => {\n                            return cache.addAll(CONFIG.staticAssets);\n                        }),\n                        caches.open(DYNAMIC_CACHE).then(cache => {\n                            return cache.addAll(CONFIG.dynamicAssets);\n                        })\n                    ]).then(() => {\n                        console.log('Service Worker installed successfully');\n                        return self.skipWaiting();\n                    })\n                );\n            });\n            \n            // Activate event - clean up old caches\n            self.addEventListener('activate', (event) => {\n                console.log('Service Worker activating...');\n                \n                event.waitUntil(\n                    caches.keys().then(cacheNames => {\n                        return Promise.all(\n                            cacheNames.map(cacheName => {\n                                if (cacheName.indexOf(CACHE_VERSION) !== 0) {\n                                    console.log('Deleting old cache:', cacheName);\n                                    return caches.delete(cacheName);\n                                }\n                            })\n                        );\n                    }).then(() => {\n                        console.log('Service Worker activated');\n                        return self.clients.claim();\n                    })\n                );\n            });\n            \n            // Fetch event - handle requests with appropriate strategy\n            self.addEventListener('fetch', (event) => {\n                const request = event.request;\n                const url = new URL(request.url);\n                \n                // Skip non-GET requests\n                if (request.method !== 'GET') return;\n                \n                // Skip chrome-extension and other non-http requests\n                if (!url.protocol.startsWith('http')) return;\n                \n                // Find matching cache rule\n                const rule = CONFIG.cacheRules.find(rule => rule.pattern.test(url.pathname));\n                const strategy = rule ? rule.strategy : 'network-first';\n                \n                event.respondWith(\n                    handleRequest(request, strategy, rule)\n                );\n            });\n            \n            // Handle different caching strategies\n            async function handleRequest(request, strategy, rule) {\n                const cacheName = getCacheName(request);\n                \n                switch (strategy) {\n                    case 'cache-first':\n                        return cacheFirst(request, cacheName, rule);\n                    case 'network-first':\n                        return networkFirst(request, cacheName, rule);\n                    case 'stale-while-revalidate':\n                        return staleWhileRevalidate(request, cacheName, rule);\n                    case 'network-only':\n                        return fetch(request);\n                    case 'cache-only':\n                        return caches.match(request);\n                    default:\n                        return networkFirst(request, cacheName, rule);\n                }\n            }\n            \n            function getCacheName(request) {\n                const url = new URL(request.url);\n                \n                if (url.pathname.match(/\\.(png|jpg|jpeg|webp|svg|gif)$/)) {\n                    return IMAGE_CACHE;\n                } else if (url.pathname.match(/\\.(js|css)$/)) {\n                    return DYNAMIC_CACHE;\n                } else {\n                    return STATIC_CACHE;\n                }\n            }\n            \n            async function cacheFirst(request, cacheName, rule) {\n                const cachedResponse = await caches.match(request);\n                \n                if (cachedResponse) {\n                    // Check if cache is still valid\n                    if (rule && rule.maxAge) {\n                        const cacheDate = new Date(cachedResponse.headers.get('date') || cachedResponse.headers.get('last-modified'));\n                        const now = new Date();\n                        const age = now.getTime() - cacheDate.getTime();\n                        \n                        if (age > rule.maxAge) {\n                            // Cache expired, fetch new version\n                            return fetchAndCache(request, cacheName, rule);\n                        }\n                    }\n                    \n                    return cachedResponse;\n                }\n                \n                return fetchAndCache(request, cacheName, rule);\n            }\n            \n            async function networkFirst(request, cacheName, rule) {\n                try {\n                    const response = await fetch(request);\n                    \n                    if (response.status === 200) {\n                        await cacheResponse(request, response.clone(), cacheName, rule);\n                    }\n                    \n                    return response;\n                } catch (error) {\n                    console.log('Network failed, trying cache:', error);\n                    const cachedResponse = await caches.match(request);\n                    \n                    if (cachedResponse) {\n                        return cachedResponse;\n                    }\n                    \n                    // Return offline page for HTML requests\n                    if (request.headers.get('accept').includes('text/html')) {\n                        return caches.match('/offline.html') || new Response('Offline', { status: 503 });\n                    }\n                    \n                    throw error;\n                }\n            }\n            \n            async function staleWhileRevalidate(request, cacheName, rule) {\n                const cachedResponse = await caches.match(request);\n                \n                // Always try to fetch in background\n                const fetchPromise = fetchAndCache(request, cacheName, rule);\n                \n                // Return cached version immediately if available\n                if (cachedResponse) {\n                    return cachedResponse;\n                }\n                \n                // If no cache, wait for network\n                return fetchPromise;\n            }\n            \n            async function fetchAndCache(request, cacheName, rule) {\n                try {\n                    const response = await fetch(request);\n                    \n                    if (response.status === 200) {\n                        await cacheResponse(request, response.clone(), cacheName, rule);\n                    }\n                    \n                    return response;\n                } catch (error) {\n                    console.error('Fetch failed:', error);\n                    throw error;\n                }\n            }\n            \n            async function cacheResponse(request, response, cacheName, rule) {\n                const cache = await caches.open(cacheName);\n                \n                // Check cache size limits\n                if (rule && rule.maxEntries) {\n                    const keys = await cache.keys();\n                    if (keys.length >= rule.maxEntries) {\n                        // Remove oldest entries\n                        const entriesToRemove = keys.slice(0, keys.length - rule.maxEntries + 1);\n                        await Promise.all(entriesToRemove.map(key => cache.delete(key)));\n                    }\n                }\n                \n                await cache.put(request, response);\n            }\n            \n            // Handle messages from main thread\n            self.addEventListener('message', (event) => {\n                const { type, payload } = event.data;\n                \n                switch (type) {\n                    case 'SKIP_WAITING':\n                        self.skipWaiting();\n                        break;\n                    case 'GET_CACHE_SIZE':\n                        getCacheSize().then(size => {\n                            event.ports[0].postMessage({ type: 'CACHE_SIZE', payload: size });\n                        });\n                        break;\n                    case 'CLEAR_CACHE':\n                        clearCache(payload.cacheName).then(() => {\n                            event.ports[0].postMessage({ type: 'CACHE_CLEARED' });\n                        });\n                        break;\n                    case 'PRELOAD_ASSETS':\n                        preloadAssets(payload.assets).then(() => {\n                            event.ports[0].postMessage({ type: 'ASSETS_PRELOADED' });\n                        });\n                        break;\n                }\n            });\n            \n            async function getCacheSize() {\n                const cacheNames = await caches.keys();\n                let totalSize = 0;\n                \n                for (const cacheName of cacheNames) {\n                    const cache = await caches.open(cacheName);\n                    const keys = await cache.keys();\n                    totalSize += keys.length;\n                }\n                \n                return totalSize;\n            }\n            \n            async function clearCache(cacheName) {\n                if (cacheName) {\n                    return caches.delete(cacheName);\n                } else {\n                    const cacheNames = await caches.keys();\n                    return Promise.all(cacheNames.map(name => caches.delete(name)));\n                }\n            }\n            \n            async function preloadAssets(assets) {\n                const cache = await caches.open(DYNAMIC_CACHE);\n                return cache.addAll(assets);\n            }\n        `}setupUpdateHandling(){this.registration&&this.registration.addEventListener("updatefound",()=>{const e=this.registration.installing;e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&(this.updateAvailable=!0,this.notifyUpdateAvailable())})})}setupMessageHandling(){navigator.serviceWorker.addEventListener("message",e=>{const{type:t,payload:i}=e.data})}notifyUpdateAvailable(){window.dispatchEvent(new CustomEvent("serviceWorkerUpdateAvailable",{detail:{registration:this.registration,skipWaiting:()=>this.skipWaiting()}})),"Notification"in window&&"granted"===Notification.permission&&new Notification("Update Available",{body:"A new version of the site is available. Refresh to update.",icon:"/assets/images/logo-small_size.png"})}async skipWaiting(){this.registration&&this.registration.waiting&&(this.registration.waiting.postMessage({type:"SKIP_WAITING"}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}))}async getCacheSize(){return this.registration&&this.registration.active?new Promise(e=>{const t=new MessageChannel;t.port1.onmessage=t=>{e(t.data.payload)},this.registration.active.postMessage({type:"GET_CACHE_SIZE"},[t.port2])}):0}async clearCache(e=null){if(this.registration&&this.registration.active)return new Promise(t=>{const i=new MessageChannel;i.port1.onmessage=()=>{t()},this.registration.active.postMessage({type:"CLEAR_CACHE",payload:{cacheName:e}},[i.port2])})}async preloadAssets(e){if(this.registration&&this.registration.active)return new Promise(t=>{const i=new MessageChannel;i.port1.onmessage=()=>{t()},this.registration.active.postMessage({type:"PRELOAD_ASSETS",payload:{assets:e}},[i.port2])})}async staleWhileRevalidate(e){const t=await caches.open(this.cacheVersion),i=await t.match(e),n=fetch(e).then(i=>(200===i.status&&t.put(e,i.clone()),i));return i||n}async cacheFirst(e){const t=await caches.open(this.cacheVersion),i=await t.match(e);if(i)return i;const n=await fetch(e);return 200===n.status&&t.put(e,n.clone()),n}async networkFirst(e){try{const t=await fetch(e);if(200===t.status){(await caches.open(this.cacheVersion)).put(e,t.clone())}return t}catch(t){const i=await caches.open(this.cacheVersion),n=await i.match(e);if(n)return n;throw t}}async networkOnly(e){return fetch(e)}async cacheOnly(e){return(await caches.open(this.cacheVersion)).match(e)}isOnline(){return navigator.onLine}getRegistration(){return this.registration}isUpdateAvailable(){return this.updateAvailable}static isSupported(){return"serviceWorker"in navigator&&"caches"in window}}class _a{constructor(){this.loadedModules=new Set,this.loadingPromises=new Map,this.bundleCache=new Map,this.criticalAssets=new Set,this.deferredAssets=new Set,this.config={modules:{ProductManager:{path:"/js/ProductManager.js",dependencies:["UIAnimations"],critical:!1,preload:!0,condition:()=>document.querySelector(".product-card-enhanced")},ProductImageGallery:{path:"/js/ProductImageGallery.js",dependencies:[],critical:!1,preload:!1,condition:()=>document.querySelector(".product-image-carousel-enhanced")},ServiceWorkerManager:{path:"/js/ServiceWorkerManager.js",dependencies:[],critical:!1,preload:!0,condition:()=>"serviceWorker"in navigator}},bundles:{homepage:["HeroLoader","SceneManager","TeamManager","JourneyManager","ScrollAnimations"],home:["ProductImageGallery"],blog:["ArticleManager","SingleArticleViewer"],common:["UIAnimations","ServiceWorkerManager"]},optimization:{enableBundling:!0,enableMinification:!1,enableCompression:!0,enableLazyLoading:!0,preloadThreshold:2e3,bundleThreshold:3,maxBundleSize:1e5}},this.performanceMetrics={modulesLoaded:0,totalLoadTime:0,bundlesCreated:0,cacheHits:0,networkRequests:0}}async init(){try{return this.detectPageType(),this.identifyCriticalAssets(),await this.preloadCriticalAssets(),this.setupConditionalLoading(),this.optimizeBundles(),!0}catch(e){return!1}}detectPageType(){const e=window.location.pathname,t=document.body;let i="common";t.classList.contains("homepage")||"/"===e||"/index.html"===e?i="homepage":e.includes("products")||t.classList.contains("products-page")?i="products":(e.includes("blog")||t.classList.contains("blog-page"))&&(i="blog"),this.currentPageType=i,window.dispatchEvent(new CustomEvent("pageTypeDetected",{detail:{pageType:i}}))}identifyCriticalAssets(){[...this.config.bundles[this.currentPageType]||[],...this.config.bundles.common||[]].forEach(e=>{const t=this.config.modules[e];t&&t.critical&&this.criticalAssets.add(e)})}async preloadCriticalAssets(){const e=[];for(const t of this.criticalAssets){const i=this.config.modules[t];i&&i.preload&&e.push(this.preloadModule(t))}await Promise.all(e)}async preloadModule(e){const t=this.config.modules[e];if(!t)return;const i=document.createElement("link");i.rel="modulepreload",i.href=t.path,document.head.appendChild(i)}setupConditionalLoading(){this.setupIntersectionObserver(),this.setupEventBasedLoading(),this.setupRouteBasedLoading()}setupIntersectionObserver(){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(this.checkAndLoadModules(),e.unobserve(t.target))})},{rootMargin:"100px 0px",threshold:.1});document.querySelectorAll(".product-card-enhanced, .product-image-carousel-enhanced, .blog-article").forEach(t=>e.observe(t))}setupEventBasedLoading(){document.addEventListener("click",e=>{e.target.matches(".product-cta-enhanced, .product-card-enhanced")&&this.loadModule("ProductManager"),e.target.matches(".product-image-carousel-enhanced img")&&this.loadModule("ProductImageGallery")}),document.addEventListener("mouseenter",e=>{e.target&&"function"==typeof e.target.matches&&e.target.matches(".product-card-enhanced")&&this.loadModule("ProductManager")},!0)}setupRouteBasedLoading(){window.addEventListener("popstate",()=>{this.detectPageType(),this.checkAndLoadModules()}),window.addEventListener("hashchange",()=>{this.checkAndLoadModules()})}async checkAndLoadModules(){const e=[];for(const[t,i]of Object.entries(this.config.modules))i.condition&&i.condition()&&(this.loadedModules.has(t)||e.push(this.loadModule(t)));await Promise.all(e)}async loadModule(e){if(this.loadedModules.has(e))return this.bundleCache.get(e);if(this.loadingPromises.has(e))return this.loadingPromises.get(e);const t=this.config.modules[e];if(!t)return null;const i=performance.now(),n=this.loadModuleWithDependencies(e,t);this.loadingPromises.set(e,n);try{const t=await n,a=performance.now()-i;return this.performanceMetrics.modulesLoaded++,this.performanceMetrics.totalLoadTime+=a,this.performanceMetrics.networkRequests++,this.bundleCache.set(e,t),this.loadedModules.add(e),window.dispatchEvent(new CustomEvent("moduleLoaded",{detail:{moduleName:e,module:t,loadTime:a}})),t}catch(a){throw a}finally{this.loadingPromises.delete(e)}}async loadModuleWithDependencies(e,t){if(t.dependencies&&t.dependencies.length>0){const e=t.dependencies.map(e=>this.loadModule(e));await Promise.all(e)}try{const e=await import(t.path);return e.default||e}catch(i){return this.loadModuleViaScript(t.path)}}async loadModuleViaScript(e){return new Promise((t,i)=>{const n=document.createElement("script");n.type="module",n.src=e,n.onload=()=>{t(window[e.split("/").pop().replace(".js","")])},n.onerror=()=>{i(new Error(`Failed to load script: ${e}`))},document.head.appendChild(n)})}optimizeBundles(){if(!this.config.optimization.enableBundling)return;const e=this.config.bundles[this.currentPageType]||[];e.length>=this.config.optimization.bundleThreshold&&this.createVirtualBundle(this.currentPageType,e)}createVirtualBundle(e,t){const i=Promise.all(t.map(e=>this.loadModule(e)));return this.bundleCache.set(e,i),this.performanceMetrics.bundlesCreated++,i}async optimizeAsset(e,t="auto"){if(this.bundleCache.has(e))return this.performanceMetrics.cacheHits++,this.bundleCache.get(e);try{const i=await fetch(e);let n=await i.text();return"css"===t||e.endsWith(".css")?n=this.optimizeCSS(n):("js"===t||e.endsWith(".js"))&&(n=this.optimizeJS(n)),this.bundleCache.set(e,n),n}catch(i){throw i}}optimizeCSS(e){return this.config.optimization.enableMinification?e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/;\s*}/g,"}").trim():e}optimizeJS(e){return this.config.optimization.enableMinification?e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*$/gm,"").replace(/\s+/g," ").trim():e}getPerformanceMetrics(){return{...this.performanceMetrics,averageLoadTime:this.performanceMetrics.modulesLoaded>0?this.performanceMetrics.totalLoadTime/this.performanceMetrics.modulesLoaded:0,cacheHitRate:this.performanceMetrics.networkRequests>0?this.performanceMetrics.cacheHits/this.performanceMetrics.networkRequests*100:0,loadedModules:Array.from(this.loadedModules),currentPageType:this.currentPageType}}async preloadPageAssets(e){const t=this.config.bundles[e];if(!t)return;const i=t.map(e=>this.preloadModule(e));await Promise.all(i)}async prefetchNextPage(e){const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t)}clearCache(){this.bundleCache.clear(),this.loadedModules.clear(),this.loadingPromises.clear()}cleanup(){this.clearCache();document.querySelectorAll('link[rel="modulepreload"], link[rel="prefetch"]').forEach(e=>e.remove())}static detectConnectionSpeed(){if("connection"in navigator){const e=navigator.connection;return{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData}}return null}static isSlowConnection(){const e=_a.detectConnectionSpeed();return e&&("slow-2g"===e.effectiveType||"2g"===e.effectiveType||e.saveData)}static shouldDeferAssets(){return _a.isSlowConnection()||performance.memory&&performance.memory.usedJSHeapSize>5e7}}class Ba{constructor(e={}){this.serviceWorkerManager=e.serviceWorkerManager||new Ha,this.assetOptimizer=e.assetOptimizer||new _a,this.cacheManager=e.cacheManager,this.assetLoadingManager=e.assetLoadingManager,this.loadingStateManager=e.loadingStateManager,this.errorRecoveryManager=e.errorRecoveryManager,this.metrics={loadStartTime:performance.now(),navigationStart:performance.timing?.navigationStart||performance.now(),firstContentfulPaint:null,largestContentfulPaint:null,firstInputDelay:null,cumulativeLayoutShift:0,timeToInteractive:null,resourceLoadTimes:new Map,criticalResourcesLoaded:0,totalCriticalResources:0,assetLoadingMetrics:{totalLoads:0,successfulLoads:0,failedLoads:0,averageLoadTime:0,loadTimesByType:{},successRatesByType:{}},cacheMetrics:{hits:0,misses:0,hitRate:0,totalRequests:0,evictions:0,cacheSize:0,cacheSizeBytes:0},errorMetrics:{totalErrors:0,errorsLast24h:0,errorsByType:{},errorsByAsset:{},recoveryAttempts:0,recoverySuccessRate:0},networkMetrics:{effectiveType:"unknown",downlink:0,rtt:0,adaptiveLoadingActive:!1,adaptiveLoadingStrategy:"none"}},this.observers=new Map,this.preloadedAssets=new Set,this.criticalAssets=new Set,this.performanceEntries=[],this.isInitialized=!1,this.config={preloadThreshold:2e3,criticalImageSelector:".hero-image, .product-image-carousel-enhanced img:first-child, .above-fold img",criticalCSSSelector:'link[rel="stylesheet"][data-critical="true"]',enableServiceWorker:!0,cacheStrategy:"stale-while-revalidate",maxCacheAge:864e5,performanceThresholds:{lcp:2500,fid:100,cls:.1,loadTime:3e3,successRate:95},metricsCollection:{interval:5e3,sampleSize:100,logLevel:"info",autoOptimize:!0}},this.metricsHistory={coreWebVitals:[],loadingMetrics:[],cacheMetrics:[],errorMetrics:[],networkMetrics:[]},this.metricsTimer=null}async init(){if(!this.isInitialized)try{await this.assetOptimizer.init(),this.config.enableServiceWorker&&await this.serviceWorkerManager.init(),this.initCoreWebVitalsTracking(),this.initResourceLoadTracking(),this.initCriticalAssetPreloading(),this.startPerformanceMonitoring(),this.startMetricsCollection(),this.initNetworkMonitoring(),this.isInitialized=!0,setTimeout(()=>this.reportMetrics(),1e3)}catch(e){}}initCoreWebVitalsTracking(){if("PerformanceObserver"in window){try{const e=new PerformanceObserver(e=>{const t=e.getEntries(),i=t[t.length-1];this.metrics.largestContentfulPaint=i.startTime,i.startTime>this.config.performanceThresholds.lcp&&this.optimizeLCP()});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",e)}catch(e){}try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.metrics.firstInputDelay=e.processingStart-e.startTime,this.metrics.firstInputDelay>this.config.performanceThresholds.fid&&this.optimizeFID()})});e.observe({entryTypes:["first-input"]}),this.observers.set("fid",e)}catch(e){}try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(this.metrics.cumulativeLayoutShift+=e.value)}),this.metrics.cumulativeLayoutShift>this.config.performanceThresholds.cls&&this.optimizeCLS()});e.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",e)}catch(e){}try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"first-contentful-paint"===e.name&&(this.metrics.firstContentfulPaint=e.startTime)})});e.observe({entryTypes:["paint"]}),this.observers.set("fcp",e)}catch(e){}}}initResourceLoadTracking(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.metrics.resourceLoadTimes.set(e.name,{duration:e.duration,transferSize:e.transferSize||0,encodedBodySize:e.encodedBodySize||0,decodedBodySize:e.decodedBodySize||0,startTime:e.startTime,responseEnd:e.responseEnd}),this.isCriticalResource(e.name)&&this.metrics.criticalResourcesLoaded++;const t=this.getResourceType(e.name);this.metrics.assetLoadingMetrics.loadTimesByType[t]||(this.metrics.assetLoadingMetrics.loadTimesByType[t]=[]);const i=this.metrics.assetLoadingMetrics.loadTimesByType[t];i.push(e.duration),i.length>this.config.metricsCollection.sampleSize&&i.shift()})});e.observe({entryTypes:["resource"]}),this.observers.set("resource",e)}catch(e){}}startMetricsCollection(){this.metricsTimer&&clearInterval(this.metricsTimer),this.metricsTimer=setInterval(()=>{this.collectMetrics()},this.config.metricsCollection.interval)}collectMetrics(){if(this.cacheManager){const e=this.cacheManager.getStats();this.metrics.cacheMetrics={hits:e.hits,misses:e.misses,hitRate:parseFloat(e.hitRate),totalRequests:e.totalRequests,evictions:e.evictions,cacheSize:e.totalEntries,cacheSizeBytes:e.totalSize,assetTypes:e.assetTypes,priorities:e.priorities}}if(this.loadingStateManager){const e=this.loadingStateManager.getPerformanceMetrics();this.metrics.assetLoadingMetrics={...this.metrics.assetLoadingMetrics,totalLoads:e.totalLoads,successfulLoads:e.successfulLoads,failedLoads:e.failedLoads,averageLoadTime:e.averageLoadTime,successRate:e.successRate}}if(this.assetLoadingManager){const e=this.assetLoadingManager.getStats();e.assetLoading&&Object.assign(this.metrics.assetLoadingMetrics,{loadingPromises:e.assetLoading.loadingPromises,retryAttempts:e.assetLoading.retryAttempts,criticalAssets:e.assetLoading.criticalAssets})}if(this.errorRecoveryManager){const e=this.errorRecoveryManager.getErrorStats();this.metrics.errorMetrics={totalErrors:e.totalErrors,errorsLast24h:e.errorsLast24h,errorsByType:e.errorsByType,errorsByAsset:e.errorsByAsset,recoveryAttempts:e.recoveryAttempts}}this.storeMetricsHistory(),this.checkMetricsThresholds(),this.logMetrics()}storeMetricsHistory(){const e=Date.now();this.metricsHistory.coreWebVitals.push({timestamp:e,lcp:this.metrics.largestContentfulPaint,fid:this.metrics.firstInputDelay,cls:this.metrics.cumulativeLayoutShift,fcp:this.metrics.firstContentfulPaint}),this.metricsHistory.loadingMetrics.push({timestamp:e,totalLoads:this.metrics.assetLoadingMetrics.totalLoads,successRate:this.metrics.assetLoadingMetrics.successRate,averageLoadTime:this.metrics.assetLoadingMetrics.averageLoadTime}),this.metricsHistory.cacheMetrics.push({timestamp:e,hitRate:this.metrics.cacheMetrics.hitRate,cacheSize:this.metrics.cacheMetrics.cacheSize,evictions:this.metrics.cacheMetrics.evictions}),this.metricsHistory.errorMetrics.push({timestamp:e,totalErrors:this.metrics.errorMetrics.totalErrors,errorsLast24h:this.metrics.errorMetrics.errorsLast24h,recoveryAttempts:this.metrics.errorMetrics.recoveryAttempts}),this.metricsHistory.networkMetrics.push({timestamp:e,effectiveType:this.metrics.networkMetrics.effectiveType,downlink:this.metrics.networkMetrics.downlink,rtt:this.metrics.networkMetrics.rtt});this.metricsHistory.coreWebVitals.length>100&&(this.metricsHistory.coreWebVitals.shift(),this.metricsHistory.loadingMetrics.shift(),this.metricsHistory.cacheMetrics.shift(),this.metricsHistory.errorMetrics.shift(),this.metricsHistory.networkMetrics.shift())}checkMetricsThresholds(){const e=this.config.performanceThresholds;this.metrics.assetLoadingMetrics.successRate<e.successRate&&this.config.metricsCollection.autoOptimize&&this.optimizeLoadingSuccess(),this.metrics.assetLoadingMetrics.averageLoadTime>e.loadTime&&this.config.metricsCollection.autoOptimize&&this.optimizeLoadingTime(),this.metrics.cacheMetrics.hitRate<50&&this.metrics.cacheMetrics.totalRequests>10&&this.config.metricsCollection.autoOptimize&&this.optimizeCaching()}logMetrics(){this.config.metricsCollection.logLevel}initNetworkMonitoring(){if("connection"in navigator){const e=navigator.connection;this.updateNetworkMetrics(e),e.addEventListener("change",()=>{this.updateNetworkMetrics(e)})}}updateNetworkMetrics(e){this.metrics.networkMetrics={effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,adaptiveLoadingActive:this.metrics.networkMetrics.adaptiveLoadingActive,adaptiveLoadingStrategy:this.metrics.networkMetrics.adaptiveLoadingStrategy},window.dispatchEvent(new CustomEvent("networkConditionChange",{detail:this.metrics.networkMetrics}))}initCriticalAssetPreloading(){document.querySelectorAll(this.config.criticalImageSelector).forEach(e=>{if(e.src||e.dataset.src){const t=e.src||e.dataset.src;this.criticalAssets.add(t),this.preloadImage(t)}});document.querySelectorAll(this.config.criticalCSSSelector).forEach(e=>{this.criticalAssets.add(e.href)}),this.metrics.totalCriticalResources=this.criticalAssets.size,this.preloadProductImages(),this.preloadNextPageResources()}preloadImage(e){if(this.preloadedAssets.has(e))return;const t=document.createElement("link");if(t.rel="preload",t.as="image",t.href=e,this.supportsWebP()&&!e.includes(".webp")){const i=e.replace(/\.(jpg|jpeg|png)$/i,".webp");t.href=i,t.onerror=()=>{const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t)}}document.head.appendChild(t),this.preloadedAssets.add(e)}preloadProductImages(){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const i=t.target,n=i.dataset.src||i.src;n&&!this.preloadedAssets.has(n)&&this.preloadImage(n),e.unobserve(i)}})},{rootMargin:"200px 0px",threshold:.01});document.querySelectorAll(".product-image-carousel-enhanced img[data-src]").forEach(t=>e.observe(t)),this.observers.set("productImages",e)}preloadNextPageResources(){const e=window.location.pathname;document.querySelectorAll("nav a[href]").forEach(t=>{const i=t.getAttribute("href");if(i&&i!==e&&!i.startsWith("#")){let e;t.addEventListener("mouseenter",()=>{e=setTimeout(()=>{this.preloadPageResources(i)},200)}),t.addEventListener("mouseleave",()=>{e&&clearTimeout(e)})}})}preloadPageResources(e){if(this.preloadedAssets.has(e))return;const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t),this.preloadedAssets.add(e)}star;tPerformanceMonitoring(){if(setInterval(()=>{this.checkPerformanceThresholds()},5e3),"memory"in performance&&setInterval(()=>{const e=performance.memory;e.usedJSHeapSize/e.totalJSHeapSize>.9&&this.optimizeMemoryUsage()},1e4),"connection"in navigator){const e=navigator.connection,t=()=>{this.adaptToNetworkConditions(e)};e.addEventListener("change",t),t()}}checkPerformanceThresholds(){const e=this.getMetrics();e.largestContentfulPaint>this.config.performanceThresholds.lcp&&this.optimizeLCP(),e.firstInputDelay>this.config.performanceThresholds.fid&&this.optimizeFID(),e.cumulativeLayoutShift>this.config.performanceThresholds.cls&&this.optimizeCLS()}optimizeLCP(){document.querySelectorAll(this.config.criticalImageSelector).forEach(e=>{if(!e.complete&&(e.src||e.dataset.src)){const t=e.src||e.dataset.src;this.preloadImage(t)}}),window.dispatchEvent(new CustomEvent("performanceOptimization",{detail:{type:"lcp",value:this.metrics.largestContentfulPaint}}))}optimizeFID(){document.querySelectorAll("script:not([data-critical])").forEach(e=>{e.defer||e.async||(e.defer=!0)}),window.dispatchEvent(new CustomEvent("performanceOptimization",{detail:{type:"fid",value:this.metrics.firstInputDelay}}))}optimizeCLS(){document.querySelectorAll("img:not([width]):not([height])").forEach(e=>{e.naturalWidth&&e.naturalHeight&&(e.setAttribute("width",e.naturalWidth),e.setAttribute("height",e.naturalHeight))}),window.dispatchEvent(new CustomEvent("performanceOptimization",{detail:{type:"cls",value:this.metrics.cumulativeLayoutShift}}))}optimizeLoadingSuccess(){const e=this.metrics.errorMetrics.errorsByType,t=Object.entries(e).sort((e,t)=>t[1]-e[1]).map(e=>e[0])[0];t&&window.dispatchEvent(new CustomEvent("performanceOptimization",{detail:{type:"loadingSuccess",problematicAssetType:t,successRate:this.metrics.assetLoadingMetrics.successRate}})),this.assetLoadingManager}optimizeLoadingTime(){const e=this.metrics.assetLoadingMetrics.loadTimesByType,t=Object.entries(e).map(([e,t])=>({type:e,avgTime:t.reduce((e,t)=>e+t,0)/t.length})).sort((e,t)=>t.avgTime-e.avgTime);t.length>0&&window.dispatchEvent(new CustomEvent("performanceOptimization",{detail:{type:"loadingTime",slowestAssetType:t[0].type,averageTime:t[0].avgTime}})),t.length>0&&t[0].type}optimizeCaching(){this.cacheManager&&"function"==typeof this.cacheManager.optimize&&this.cacheManager.optimize(),window.dispatchEvent(new CustomEvent("performanceOptimization",{detail:{type:"caching",hitRate:this.metrics.cacheMetrics.hitRate}}))}optimizeMemoryUsage(){this.cleanupUnusedResources(),window.gc&&window.gc()}adaptToNetworkConditions(e){const t=e.effectiveType;if("slow-2g"===t||"2g"===t){this.metrics.networkMetrics.adaptiveLoadingActive=!0,this.metrics.networkMetrics.adaptiveLoadingStrategy="reduced_quality";document.querySelectorAll("video[autoplay]").forEach(e=>{e.removeAttribute("autoplay")});document.querySelectorAll("img[data-src-low]").forEach(e=>{e.dataset.srcLow&&(e.src=e.dataset.srcLow)})}else"4g"===t&&(this.metrics.networkMetrics.adaptiveLoadingActive=!1,this.metrics.networkMetrics.adaptiveLoadingStrategy="high_quality",this.preloadNextPageResources())}cleanupUnusedResources(){document.querySelectorAll('link[rel="preload"]').forEach(e=>{Date.now()-(e.dataset.timestamp||0)>3e4&&e.remove()}),this.performanceEntries.length>1e3&&(this.performanceEntries=this.performanceEntries.slice(-500))}isCriticalResource(e){return this.criticalAssets.has(e)||e.includes("critical")||e.includes("above-fold")||e.includes("hero")}getResourceType(e){const t=e.split(".").pop()?.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(t)?e.includes("logo")?"logo":"image":["css"].includes(t)?"css":["js"].includes(t)?"javascript":["woff","woff2","ttf","otf"].includes(t)?"font":["json","jsonl"].includes(t)?"data":"other"}supportsWebP(){const e=document.createElement("canvas");return e.width=1,e.height=1,0===e.toDataURL("image/webp").indexOf("data:image/webp")}getMetrics(){const e=performance.now();this.collectMetrics();const t=this.assetOptimizer.getPerformanceMetrics(),i={isRegistered:this.serviceWorkerManager.isRegistered,updateAvailable:this.serviceWorkerManager.isUpdateAvailable(),cacheSize:0};return{...this.metrics,totalLoadTime:e-this.metrics.loadStartTime,criticalResourcesProgress:this.metrics.totalCriticalResources>0?this.metrics.criticalResourcesLoaded/this.metrics.totalCriticalResources*100:100,resourceCount:this.metrics.resourceLoadTimes.size,preloadedAssetsCount:this.preloadedAssets.size,averageResourceLoadTime:this.calculateAverageResourceLoadTime(),performanceScore:this.calculatePerformanceScore(),assetOptimization:t,serviceWorker:i,trends:this.calculateTrends()}}calculateTrends(){if(this.metricsHistory.loadingMetrics.length<3)return{loadingSuccessRate:"stable",loadingTime:"stable",cacheHitRate:"stable",errorRate:"stable"};const e=this.metricsHistory.loadingMetrics.slice(-3),t=this.metricsHistory.cacheMetrics.slice(-3),i=this.metricsHistory.errorMetrics.slice(-3),n=this.calculateTrend(e.map(e=>e.successRate)),a=this.calculateTrend(e.map(e=>e.averageLoadTime)),s=this.calculateTrend(t.map(e=>e.hitRate)),r=this.calculateTrend(i.map(e=>e.errorsLast24h));return{loadingSuccessRate:n,loadingTime:"improving"===a?"improving":"degrading"===a?"degrading":"stable",cacheHitRate:s,errorRate:"improving"===r?"degrading":"degrading"===r?"improving":"stable"}}calculateTrend(e){if(e.length<2)return"stable";const t=e[0],i=(e[e.length-1]-t)/t*100;return i>5?"improving":i<-5?"degrading":"stable"}calculateAverageResourceLoadTime(){if(0===this.metrics.resourceLoadTimes.size)return 0;let e=0;return this.metrics.resourceLoadTimes.forEach(t=>{e+=t.duration}),e/this.metrics.resourceLoadTimes.size}calculatePerformanceScore(){let e=100;return this.metrics.largestContentfulPaint>this.config.performanceThresholds.lcp&&(e-=20),this.metrics.firstInputDelay>this.config.performanceThresholds.fid&&(e-=20),this.metrics.cumulativeLayoutShift>this.config.performanceThresholds.cls&&(e-=20),this.metrics.assetLoadingMetrics.successRate<this.config.performanceThresholds.successRate&&(e-=15),this.metrics.assetLoadingMetrics.averageLoadTime>this.config.performanceThresholds.loadTime&&(e-=15),this.metrics.criticalResourcesLoaded===this.metrics.totalCriticalResources&&(e+=10),this.metrics.cacheMetrics.hitRate>80&&(e+=10),Math.max(0,Math.min(100,e))}re;portMetrics(){const e=this.getMetrics();return window.dispatchEvent(new CustomEvent("performanceMetrics",{detail:e})),e}getDetailedMetrics(e){switch(e){case"coreWebVitals":return{lcp:this.metrics.largestContentfulPaint,fid:this.metrics.firstInputDelay,cls:this.metrics.cumulativeLayoutShift,fcp:this.metrics.firstContentfulPaint,history:this.metricsHistory.coreWebVitals};case"loading":return{...this.metrics.assetLoadingMetrics,history:this.metricsHistory.loadingMetrics};case"cache":return{...this.metrics.cacheMetrics,history:this.metricsHistory.cacheMetrics};case"errors":return{...this.metrics.errorMetrics,history:this.metricsHistory.errorMetrics};case"network":return{...this.metrics.networkMetrics,history:this.metricsHistory.networkMetrics};default:return this.getMetrics()}}optimize(){this.optimizeLCP(),this.optimizeFID(),this.optimizeCLS(),this.optimizeLoadingSuccess(),this.optimizeLoadingTime(),this.optimizeCaching(),this.cleanupUnusedResources(),setTimeout(()=>this.reportMetrics(),1e3)}cleanup(){this.observers.forEach((e,t)=>{e&&"function"==typeof e.disconnect&&e.disconnect()}),this.observers.clear(),this.metricsTimer&&clearInterval(this.metricsTimer),this.preloadedAssets.clear(),this.criticalAssets.clear(),this.performanceEntries=[]}static isSupported(){return!!(window.performance&&window.PerformanceObserver&&window.IntersectionObserver)}static getBasicMetrics(){if(!window.performance)return null;const e=performance.getEntriesByType("navigation")[0];return{domContentLoaded:e?.domContentLoadedEventEnd-e?.domContentLoadedEventStart,loadComplete:e?.loadEventEnd-e?.loadEventStart,totalPageLoad:e?.loadEventEnd-e?.navigationStart,dnsLookup:e?.domainLookupEnd-e?.domainLookupStart,tcpConnection:e?.connectEnd-e?.connectStart,serverResponse:e?.responseEnd-e?.requestStart}}}class qa{constructor(e={}){this.config={maxRetries:e.maxRetries||3,baseRetryDelay:e.baseRetryDelay||1e3,maxRetryDelay:e.maxRetryDelay||1e4,enableLogging:!1!==e.enableLogging,enableMetrics:!1!==e.enableMetrics,fallbackStrategies:e.fallbackStrategies||{},networkTimeoutMs:e.networkTimeoutMs||8e3,offlineThreshold:e.offlineThreshold||3,onlineCheckInterval:e.onlineCheckInterval||3e4,...e},this.recoveryAttempts=new Map,this.fallbackCache=new Map,this.networkStatus="online",this.consecutiveFailures=0,this.lastOnlineCheck=Date.now(),this.offlineStartTime=null,this.recoveryMetrics={totalRecoveries:0,successfulRecoveries:0,failedRecoveries:0,fallbacksUsed:0,averageRecoveryTime:0,falseOfflineDetections:0},this.userNotifications={element:null,timeouts:new Set,queue:[]},this.assetStrategies={logo:{fallbacks:["/assets/images/logo.png","/assets/images/logo-small_size.png","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTAwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0ZXh0IHg9IjUwIiB5PSIyMCIgZm9udC1mYW1pbHk9InN5c3RlbS11aSIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzMzMzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+Q2hlbUFjdGl2YTwvdGV4dD48L3N2Zz4=","text:ChemActiva"],retryStrategy:"exponential",maxRetries:4,timeout:3e3},image:{fallbacks:["webp-to-jpeg","/assets/images/placeholder-product.svg","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmNWY1ZjUiLz48dGV4dCB4PSIxNTAiIHk9IjEwMCIgZm9udC1mYW1pbHk9InN5c3RlbS11aSIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzY2NjY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+SW1hZ2UgVW5hdmFpbGFibGU8L3RleHQ+PC9zdmc+","placeholder"],retryStrategy:"exponential",maxRetries:3,timeout:5e3},css:{fallbacks:["inline-critical","minimal-styles"],retryStrategy:"linear",maxRetries:2,timeout:3e3},javascript:{fallbacks:["polyfill","graceful-degradation"],retryStrategy:"exponential",maxRetries:2,timeout:5e3},network:{fallbacks:["cache-first","offline-mode"],retryStrategy:"exponential",maxRetries:3,timeout:8e3}},this.init()}init(){this.setupNetworkMonitoring(),this.setupGlobalErrorHandling(),this.preloadFallbackAssets(),this.startPeriodicConnectivityCheck(),setTimeout(()=>{this.smartOfflineDetection()},1e3),this.config.enableLogging}setupNetworkMonitoring(){if(window.addEventListener("online",()=>{this.networkStatus="online",this.handleNetworkRestore()}),window.addEventListener("offline",()=>{this.networkStatus="offline",this.handleNetworkLoss()}),"connection"in navigator){const e=navigator.connection;e.addEventListener("change",()=>{this.updateNetworkQuality(e)}),this.updateNetworkQuality(e)}}setupGlobalErrorHandling(){window.addEventListener("unhandledrejection",e=>{this.handleUnhandledError(e.reason,"promise-rejection")}),window.addEventListener("error",e=>{e.target!==window?this.handleResourceError(e):this.handleJavaScriptError(e.error,e)},!0)}async preloadFallbackAssets(){const e=["/assets/images/placeholder-product.svg"];for(const i of e)try{await this.preloadAsset(i),this.fallbackCache.set(i,!0)}catch(t){this.config.enableLogging}}async recover(e,t,i,n={}){const a=this.generateRecoveryId(t,i),s=Date.now();try{this.config.enableLogging;const r=this.assetStrategies[t]||this.assetStrategies.image,o=await this.attemptRecoveryWithRetries(e,t,i,r,n);return this.trackRecoverySuccess(a,s),o}catch(r){return this.trackRecoveryFailure(a,s,r),await this.gracefulDegradation(t,i,n)}}async attemptRecoveryWithRetries(e,t,i,n,a){const s=`${t}_${this.hashRequest(i)}`;let r=this.recoveryAttempts.get(s)||0;const o=n.maxRetries||this.config.maxRetries;for(;r<o;)try{const e=this.calculateRetryDelay(r,n.retryStrategy);r>0&&(this.config.enableLogging,await this.delay(e));const o=await this.performRecovery(t,i,n,a);return this.recoveryAttempts.delete(s),o}catch(c){if(r++,this.recoveryAttempts.set(s,r),r>=o)throw c}}async performRecovery(e,t,i,n){switch(e){case"logo":return await this.recoverLogo(t,i,n);case"image":return await this.recoverImage(t,i,n);case"css":return await this.recoverCSS(t,i,n);case"javascript":return await this.recoverJavaScript(t,i,n);case"network":return await this.recoverNetwork(t,i,n);default:return await this.recoverGeneric(t,i,n)}}async recoverLogo(e,t,i){"string"==typeof e||e.url;for(const a of t.fallbacks)try{if(a.startsWith("data:"))return{type:"logo",url:a,fallback:!0,element:await this.createImageFromDataUrl(a)};if(a.startsWith("text:")){const e=a.substring(5);return{type:"logo",text:e,fallback:!0,element:this.createTextLogo(e)}}return{type:"logo",url:a,fallback:!0,element:await this.loadAssetWithTimeout(a,t.timeout)}}catch(n){continue}throw new Error("All logo fallbacks failed")}async recoverImage(e,t,i){const n="string"==typeof e?e:e.url;for(const s of t.fallbacks)try{if("webp-to-jpeg"===s){const e=n.replace(/\.webp$/i,".jpeg").replace(/\.webp$/i,".jpg");return{type:"image",url:e,fallback:!0,element:await this.loadAssetWithTimeout(e,t.timeout)}}if("placeholder"===s)return{type:"image",placeholder:!0,element:this.createImagePlaceholder(i.originalElement)};if(s.startsWith("data:"))return{type:"image",url:s,fallback:!0,element:await this.createImageFromDataUrl(s)};return{type:"image",url:s,fallback:!0,element:await this.loadAssetWithTimeout(s,t.timeout)}}catch(a){continue}throw new Error("All image fallbacks failed")}async recoverCSS(e,t,i){"string"==typeof e||e.url;for(const a of t.fallbacks)try{if("inline-critical"===a)return this.inlineCriticalCSS();if("minimal-styles"===a)return this.applyMinimalStyles();return{type:"css",url:a,fallback:!0,element:await this.loadAssetWithTimeout(a,t.timeout)}}catch(n){continue}throw new Error("All CSS fallbacks failed")}async recoverJavaScript(e,t,i){"string"==typeof e||e.url;for(const a of t.fallbacks)try{if("polyfill"===a)return await this.loadPolyfills(i.missingFeatures||[]);if("graceful-degradation"===a)return this.enableGracefulDegradation();return{type:"javascript",url:a,fallback:!0,element:await this.loadAssetWithTimeout(a,t.timeout)}}catch(n){continue}throw new Error("All JavaScript fallbacks failed")}async recoverNetwork(e,t,i){for(const a of t.fallbacks)try{if("cache-first"===a)return await this.serveFromCache(e);if("offline-mode"===a)return this.enableOfflineMode()}catch(n){continue}throw new Error("All network fallbacks failed")}async recoverGeneric(e,t,i){try{return await this.loadAssetWithTimeout(e,t.timeout)}catch(n){return null}}async gracefulDegradation(e,t,i){switch(this.config.enableLogging,this.recoveryMetrics.fallbacksUsed++,e){case"logo":return this.createTextLogo("ChemActiva");case"image":return this.createImagePlaceholder(i.originalElement);case"css":return this.applyMinimalStyles();case"javascript":return this.enableGracefulDegradation();default:return null}}async loadAssetWithTimeout(e,t){return new Promise((i,n)=>{const a=setTimeout(()=>{n(new Error(`Timeout loading asset: ${e}`))},t);if(e.match(/\.(jpg|jpeg|png|gif|webp|svg)$/i)){const t=new Image;t.onload=()=>{clearTimeout(a),i(t)},t.onerror=()=>{clearTimeout(a),n(new Error(`Failed to load image: ${e}`))},t.src=e}else fetch(e).then(e=>{if(clearTimeout(a),!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);i(e)}).catch(e=>{clearTimeout(a),n(e)})})}async createImageFromDataUrl(e){return new Promise((t,i)=>{const n=new Image;n.onload=()=>t(n),n.onerror=()=>i(new Error("Failed to create image from data URL")),n.src=e})}createTextLogo(e){const t=document.createElement("div");return t.className="text-logo-fallback",t.textContent=e,t.style.cssText="\n            font-family: system-ui, -apple-system, sans-serif;\n            font-size: 24px;\n            font-weight: bold;\n            color: #2c5530;\n            text-decoration: none;\n            display: inline-block;\n            padding: 8px 12px;\n            border: 2px solid #2c5530;\n            border-radius: 4px;\n            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n        ",t}createImagePlaceholder(e){const t=document.createElement("div");t.className="image-placeholder error-recovery";const i=e?.width||e?.offsetWidth||300,n=e?.height||e?.offsetHeight||200;return t.style.cssText=`\n            width: ${i}px;\n            height: ${n}px;\n            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border: 2px dashed #ccc;\n            border-radius: 8px;\n            color: #666;\n            font-family: system-ui, -apple-system, sans-serif;\n            font-size: 14px;\n            text-align: center;\n            position: relative;\n        `,t.innerHTML=`\n            <div>\n                <div style="font-size: 24px; margin-bottom: 8px;">📷</div>\n                <div>Image unavailable</div>\n                <div style="font-size: 12px; margin-top: 4px; opacity: 0.7;">\n                    ${"offline"===this.networkStatus?"Check connection":"Loading failed"}\n                </div>\n            </div>\n        `,e?.alt&&t.setAttribute("aria-label",`Image placeholder: ${e.alt}`),t}inlineCriticalCSS(){const e=document.createElement("style");return e.textContent="\n            body { font-family: system-ui, -apple-system, sans-serif; margin: 0; padding: 0; }\n            .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }\n            .error-recovery { opacity: 0.8; }\n            .component-error { position: relative; }\n            .loading-indicator { \n                display: inline-block; \n                width: 20px; \n                height: 20px; \n                border: 2px solid #f3f3f3; \n                border-top: 2px solid #3498db; \n                border-radius: 50%; \n                animation: spin 1s linear infinite; \n            }\n            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n        ",document.head.appendChild(e),{type:"css",inline:!0,element:e}}applyMinimalStyles(){return document.body.style.fontFamily="system-ui, -apple-system, sans-serif",document.body.style.lineHeight="1.6",document.body.style.color="#333",{type:"css",minimal:!0}}async loadPolyfills(e){const t=[];return e.includes("IntersectionObserver")&&!window.IntersectionObserver&&t.push(this.createIntersectionObserverPolyfill()),e.includes("fetch")&&!window.fetch&&t.push(this.createFetchPolyfill()),await Promise.all(t),{type:"javascript",polyfills:!0}}createIntersectionObserverPolyfill(){window.IntersectionObserver=class{constructor(e,t={}){this.callback=e,this.options=t,this.elements=new Set}observe(e){this.elements.add(e),setTimeout(()=>{this.callback([{target:e,isIntersecting:!0,intersectionRatio:1}])},100)}unobserve(e){this.elements.delete(e)}disconnect(){this.elements.clear()}}}createFetchPolyfill(){window.fetch||(window.fetch=function(e,t={}){return new Promise((i,n)=>{const a=new XMLHttpRequest;a.open(t.method||"GET",e),a.onload=()=>{i({ok:a.status>=200&&a.status<300,status:a.status,statusText:a.statusText,text:()=>Promise.resolve(a.responseText),json:()=>Promise.resolve(JSON.parse(a.responseText))})},a.onerror=()=>n(new Error("Network error")),a.send(t.body)})})}enableGracefulDegradation(){return window.GRACEFUL_DEGRADATION_MODE=!0,window.dispatchEvent(new CustomEvent("gracefulDegradationEnabled",{detail:{timestamp:Date.now()}})),{type:"javascript",gracefulDegradation:!0}}async serveFromCache(e){if("caches"in window){const t=await caches.open("error-recovery-cache"),i=await t.match(e);if(i)return i}throw new Error("No cached version available")}enableOfflineMode(){return document.body.classList.add("offline-mode"),this.showOfflineIndicator(),{type:"network",offline:!0}}showOfflineIndicator(){}handleNetworkRestore(){this.config.enableLogging;const e=document.getElementById("offline-indicator");e&&(e.style.transform="translateY(-100%)"),this.recoveryAttempts.clear(),window.dispatchEvent(new CustomEvent("networkRestored",{detail:{timestamp:Date.now()}}))}handleNetworkLoss(){this.config.enableLogging,this.enableOfflineMode()}updateNetworkQuality(e){this.networkStatus={online:navigator.onLine,effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,quality:this.assessNetworkQuality(e)}}assessNetworkQuality(e){return navigator.onLine?"4g"===e.effectiveType&&e.downlink>1.5?"good":"3g"===e.effectiveType||e.downlink>.5?"fair":"poor":"offline"}handleUnhandledError(e,t){this.config.enableLogging,this.recover(e,"javascript",null,{type:t})}handleResourceError(e){const t=e.target,i=this.getAssetTypeFromElement(t),n=t.src||t.href;this.config.enableLogging,this.recover(new Error(`Failed to load ${i}`),i,n,{originalElement:t}).then(e=>{e&&e.element&&t.parentNode.replaceChild(e.element,t)}).catch(e=>{this.config.enableLogging})}handleJavaScriptError(e,t){this.config.enableLogging,this.recover(e,"javascript",null,{filename:t.filename,lineno:t.lineno,colno:t.colno})}calculateRetryDelay(e,t){const i=this.config.baseRetryDelay,n=this.config.maxRetryDelay;let a;return a="exponential"===t?Math.min(i*Math.pow(2,e),n):"linear"===t?Math.min(i*(e+1),n):i,a+1e3*Math.random()}generateRecoveryId(e,t){const i="string"==typeof t?t:JSON.stringify(t);return`${e}_${this.hashRequest(i)}_${Date.now()}`}hashRequest(e){let t=0;const i="string"==typeof e?e:JSON.stringify(e);for(let n=0;n<i.length;n++){t=(t<<5)-t+i.charCodeAt(n),t&=t}return Math.abs(t).toString(36)}getAssetTypeFromElement(e){return"IMG"===e.tagName?"image":"LINK"===e.tagName&&"stylesheet"===e.rel?"css":"SCRIPT"===e.tagName?"javascript":"unknown"}async preloadAsset(e){return new Promise((t,i)=>{if(e.match(/\.(jpg|jpeg|png|gif|webp|svg)$/i)){const n=new Image;n.onload=()=>t(n),n.onerror=i,n.src=e}else fetch(e).then(e=>e.ok?t(e):i(new Error(`HTTP ${e.status}`))).catch(i)})}delay(e){return new Promise(t=>setTimeout(t,e))}trackRecoverySuccess(e,t){const i=Date.now()-t;this.recoveryMetrics.totalRecoveries++,this.recoveryMetrics.successfulRecoveries++;const n=this.recoveryMetrics.averageRecoveryTime,a=this.recoveryMetrics.successfulRecoveries;this.recoveryMetrics.averageRecoveryTime=(n*(a-1)+i)/a}trackRecoveryFailure(e,t,i){this.recoveryMetrics.totalRecoveries++,this.recoveryMetrics.failedRecoveries++,this.config.enableLogging}async smartOfflineDetection(){const e=(await Promise.allSettled([this.testConnectivity("/favicon.ico"),this.testConnectivity("/assets/images/logo.png"),this.pingNetworkEndpoint()])).filter(e=>"fulfilled"===e.status).length>=1;return e||"online"!==this.networkStatus?e&&"offline"===this.networkStatus?this.transitionToOnline():e&&(this.consecutiveFailures=0):(this.consecutiveFailures++,this.consecutiveFailures>=this.config.offlineThreshold&&this.transitionToOffline()),e}async testConnectivity(e){const t=new AbortController,i=setTimeout(()=>t.abort(),3e3);try{const n=await fetch(e,{method:"HEAD",signal:t.signal,cache:"no-cache"});return clearTimeout(i),n.ok}catch(n){throw clearTimeout(i),n}}async pingNetworkEndpoint(){try{return(await fetch("https://httpbin.org/status/200",{method:"HEAD",signal:AbortSignal.timeout(2e3),cache:"no-cache"})).ok}catch{try{return await fetch("https://dns.google",{method:"HEAD",signal:AbortSignal.timeout(2e3),cache:"no-cache"}),!0}catch{return!1}}}transitionToOffline(){"offline"!==this.networkStatus&&(this.networkStatus="offline",this.offlineStartTime=Date.now(),this.showUserNotification("You appear to be offline. Some features may be limited.","warning",5e3),this.config.enableLogging)}transitionToOnline(){if("offline"===this.networkStatus){const e=this.offlineStartTime?Date.now()-this.offlineStartTime:0;this.networkStatus="online",this.consecutiveFailures=0,this.offlineStartTime=null,e<1e4&&this.recoveryMetrics.falseOfflineDetections++,this.showUserNotification("Connection restored!","success",3e3),this.handleNetworkRestore(),this.config.enableLogging}}showUserNotification(e,t="info",i=4e3){this.userNotifications.element||this.createNotificationContainer();const n=this.createNotificationElement(e,t);this.userNotifications.element.appendChild(n);const a=setTimeout(()=>{this.dismissNotification(n),this.userNotifications.timeouts.delete(a)},i);this.userNotifications.timeouts.add(a),n.addEventListener("click",()=>{clearTimeout(a),this.dismissNotification(n),this.userNotifications.timeouts.delete(a)})}createNotificationContainer(){this.userNotifications.element=document.createElement("div"),this.userNotifications.element.id="error-notifications",this.userNotifications.element.className="error-notifications",this.userNotifications.element.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10000;\n            max-width: 350px;\n            pointer-events: none;\n        ",document.body.appendChild(this.userNotifications.element)}createNotificationElement(e,t){const i=document.createElement("div");return i.className=`notification notification-${t}`,i.style.cssText=`\n            background: ${this.getNotificationColor(t)};\n            color: white;\n            padding: 12px 16px;\n            margin-bottom: 8px;\n            border-radius: 6px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            font-size: 14px;\n            line-height: 1.4;\n            cursor: pointer;\n            pointer-events: auto;\n            transform: translateX(100%);\n            transition: transform 0.3s ease;\n            position: relative;\n        `,i.innerHTML=`\n            <div style="padding-right: 20px;">${e}</div>\n            <div style="position: absolute; top: 8px; right: 8px; font-size: 16px; opacity: 0.7;">×</div>\n        `,setTimeout(()=>{i.style.transform="translateX(0)"},10),i}getNotificationColor(e){const t={success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#3b82f6"};return t[e]||t.info}dismissNotification(e){e.style.transform="translateX(100%)",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)}clearAllNotifications(){this.userNotifications.timeouts.forEach(e=>clearTimeout(e)),this.userNotifications.timeouts.clear(),this.userNotifications.element&&(this.userNotifications.element.innerHTML="")}async recoverWithFeedback(e,t={}){this.showUserNotification("Attempting to recover...","info",2e3);try{const i=await this.recover(e,t.type||"unknown",t.element,t);return i.success?this.showUserNotification("Recovery successful!","success",2e3):this.showUserNotification("Recovery failed. Using fallback.","warning",3e3),i}catch(i){throw this.showUserNotification("Recovery failed completely.","error",4e3),i}}startPeriodicConnectivityCheck(){this.connectivityCheckInterval&&clearInterval(this.connectivityCheckInterval),this.connectivityCheckInterval=setInterval(async()=>{Date.now()-this.lastOnlineCheck>this.config.onlineCheckInterval&&(this.lastOnlineCheck=Date.now(),await this.smartOfflineDetection())},this.config.onlineCheckInterval)}stopPeriodicConnectivityCheck(){this.connectivityCheckInterval&&(clearInterval(this.connectivityCheckInterval),this.connectivityCheckInterval=null)}getRecoveryMetrics(){return{...this.recoveryMetrics,successRate:this.recoveryMetrics.totalRecoveries>0?this.recoveryMetrics.successfulRecoveries/this.recoveryMetrics.totalRecoveries*100:0,networkStatus:this.networkStatus,activeRecoveries:this.recoveryAttempts.size,falseOfflineDetections:this.recoveryMetrics.falseOfflineDetections,consecutiveFailures:this.consecutiveFailures}}clearRecoveryHistory(){this.recoveryAttempts.clear(),this.recoveryMetrics={totalRecoveries:0,successfulRecoveries:0,failedRecoveries:0,fallbacksUsed:0,averageRecoveryTime:0,falseOfflineDetections:0},this.consecutiveFailures=0}setConfig(e){this.config={...this.config,...e}}destroy(){this.stopPeriodicConnectivityCheck(),this.clearAllNotifications(),this.userNotifications.element&&this.userNotifications.element.remove()}static create(e={}){return new qa(e)}}class Ya{constructor(e={}){this.config={enableAccessibility:!1!==e.enableAccessibility,enableRetryButtons:!1!==e.enableRetryButtons,enableLoadingIndicators:!1!==e.enableLoadingIndicators,autoHideDelay:e.autoHideDelay||5e3,maxRetryAttempts:e.maxRetryAttempts||3,enableSoundFeedback:e.enableSoundFeedback||!1,theme:e.theme||"default",...e},this.activeFeedback=new Map,this.loadingIndicators=new Map,this.retryCallbacks=new Map,this.feedbackHistory=[],this.announcer=null,this.focusManager=null,this.templates={loadingIndicator:this.createLoadingTemplate(),errorMessage:this.createErrorTemplate(),retryButton:this.createRetryTemplate(),successMessage:this.createSuccessTemplate()},this.init()}init(){this.setupAccessibilityFeatures(),this.setupGlobalStyles(),this.setupEventListeners()}setupAccessibilityFeatures(){this.config.enableAccessibility&&(this.announcer=document.createElement("div"),this.announcer.setAttribute("aria-live","polite"),this.announcer.setAttribute("aria-atomic","true"),this.announcer.className="sr-only feedback-announcer",this.announcer.style.cssText="\n            position: absolute !important;\n            width: 1px !important;\n            height: 1px !important;\n            padding: 0 !important;\n            margin: -1px !important;\n            overflow: hidden !important;\n            clip: rect(0, 0, 0, 0) !important;\n            white-space: nowrap !important;\n            border: 0 !important;\n        ",document.body.appendChild(this.announcer),this.focusManager={previousFocus:null,trapFocus:e=>{const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=t[0],n=t[t.length-1];e.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===i&&(n.focus(),e.preventDefault()):document.activeElement===n&&(i.focus(),e.preventDefault()))}),i?.focus()}})}setupGlobalStyles(){const e="user-feedback-styles";if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent="\n            .feedback-container {\n                position: relative;\n                z-index: 1000;\n            }\n            \n            .loading-indicator {\n                display: inline-flex;\n                align-items: center;\n                gap: 8px;\n                padding: 12px 16px;\n                background: rgba(255, 255, 255, 0.95);\n                border: 1px solid #e0e0e0;\n                border-radius: 8px;\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n                font-family: system-ui, -apple-system, sans-serif;\n                font-size: 14px;\n                color: #333;\n                backdrop-filter: blur(4px);\n            }\n            \n            .loading-spinner {\n                width: 16px;\n                height: 16px;\n                border: 2px solid #f3f3f3;\n                border-top: 2px solid #2c5530;\n                border-radius: 50%;\n                animation: spin 1s linear infinite;\n            }\n            \n            @keyframes spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n            }\n            \n            .error-message {\n                display: flex;\n                align-items: flex-start;\n                gap: 12px;\n                padding: 16px;\n                background: #fff5f5;\n                border: 1px solid #fed7d7;\n                border-left: 4px solid #e53e3e;\n                border-radius: 8px;\n                font-family: system-ui, -apple-system, sans-serif;\n                font-size: 14px;\n                color: #742a2a;\n                margin: 8px 0;\n            }\n            \n            .error-icon {\n                flex-shrink: 0;\n                width: 20px;\n                height: 20px;\n                background: #e53e3e;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-size: 12px;\n                font-weight: bold;\n            }\n            \n            .error-content {\n                flex: 1;\n            }\n            \n            .error-title {\n                font-weight: 600;\n                margin-bottom: 4px;\n            }\n            \n            .error-description {\n                margin-bottom: 12px;\n                line-height: 1.4;\n            }\n            \n            .error-actions {\n                display: flex;\n                gap: 8px;\n                flex-wrap: wrap;\n            }\n            \n            .retry-button {\n                background: #2c5530;\n                color: white;\n                border: none;\n                padding: 8px 16px;\n                border-radius: 6px;\n                font-size: 13px;\n                font-weight: 500;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                display: inline-flex;\n                align-items: center;\n                gap: 6px;\n            }\n            \n            .retry-button:hover {\n                background: #1e3a21;\n                transform: translateY(-1px);\n            }\n            \n            .retry-button:active {\n                transform: translateY(0);\n            }\n            \n            .retry-button:disabled {\n                background: #a0a0a0;\n                cursor: not-allowed;\n                transform: none;\n            }\n            \n            .retry-button:focus {\n                outline: 2px solid #2c5530;\n                outline-offset: 2px;\n            }\n            \n            .dismiss-button {\n                background: transparent;\n                color: #666;\n                border: 1px solid #d0d0d0;\n                padding: 8px 16px;\n                border-radius: 6px;\n                font-size: 13px;\n                cursor: pointer;\n                transition: all 0.2s ease;\n            }\n            \n            .dismiss-button:hover {\n                background: #f5f5f5;\n                border-color: #999;\n            }\n            \n            .success-message {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                padding: 12px 16px;\n                background: #f0fff4;\n                border: 1px solid #9ae6b4;\n                border-left: 4px solid #38a169;\n                border-radius: 8px;\n                font-family: system-ui, -apple-system, sans-serif;\n                font-size: 14px;\n                color: #2f855a;\n                margin: 8px 0;\n            }\n            \n            .success-icon {\n                flex-shrink: 0;\n                width: 20px;\n                height: 20px;\n                background: #38a169;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-size: 12px;\n            }\n            \n            .overlay-feedback {\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                max-width: 400px;\n                z-index: 10000;\n                animation: slideIn 0.3s ease-out;\n            }\n            \n            @keyframes slideIn {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n            \n            .inline-feedback {\n                margin: 8px 0;\n            }\n            \n            .feedback-progress {\n                width: 100%;\n                height: 4px;\n                background: #e0e0e0;\n                border-radius: 2px;\n                overflow: hidden;\n                margin-top: 8px;\n            }\n            \n            .feedback-progress-bar {\n                height: 100%;\n                background: #2c5530;\n                border-radius: 2px;\n                transition: width 0.3s ease;\n            }\n            \n            .network-status {\n                display: inline-flex;\n                align-items: center;\n                gap: 6px;\n                font-size: 12px;\n                color: #666;\n                margin-top: 4px;\n            }\n            \n            .network-indicator {\n                width: 8px;\n                height: 8px;\n                border-radius: 50%;\n                background: #38a169;\n            }\n            \n            .network-indicator.offline {\n                background: #e53e3e;\n            }\n            \n            .network-indicator.slow {\n                background: #d69e2e;\n            }\n            \n            @media (max-width: 768px) {\n                .overlay-feedback {\n                    top: 10px;\n                    right: 10px;\n                    left: 10px;\n                    max-width: none;\n                }\n                \n                .error-actions {\n                    flex-direction: column;\n                }\n                \n                .retry-button,\n                .dismiss-button {\n                    width: 100%;\n                    justify-content: center;\n                }\n            }\n            \n            @media (prefers-reduced-motion: reduce) {\n                .loading-spinner {\n                    animation: none;\n                    border-top-color: #2c5530;\n                }\n                \n                .overlay-feedback {\n                    animation: none;\n                }\n                \n                .retry-button:hover {\n                    transform: none;\n                }\n            }\n            \n            @media (prefers-color-scheme: dark) {\n                .loading-indicator {\n                    background: rgba(40, 40, 40, 0.95);\n                    border-color: #555;\n                    color: #e0e0e0;\n                }\n                \n                .error-message {\n                    background: #2d1b1b;\n                    border-color: #5a2a2a;\n                    color: #f7b2b2;\n                }\n                \n                .success-message {\n                    background: #1a2e1a;\n                    border-color: #2d5a2d;\n                    color: #9ae6b4;\n                }\n            }\n        ",document.head.appendChild(t)}setupEventListeners(){window.addEventListener("online",()=>{this.showNetworkStatus("online")}),window.addEventListener("offline",()=>{this.showNetworkStatus("offline")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.dismissAllOverlays()})}showLoadingIndicator(e,t={}){const{message:i="Loading...",container:n=null,position:a="inline",showProgress:s=!1,progressValue:r=0}=t,o=this.createLoadingIndicator(i,{showProgress:s,progressValue:r});return this.loadingIndicators.set(e,{element:o,container:n,position:a,startTime:Date.now()}),"overlay"===a?(o.className+=" overlay-feedback",document.body.appendChild(o)):n&&(o.className+=" inline-feedback",n.appendChild(o)),this.config.enableAccessibility&&this.announceToScreenReader(`Loading: ${i}`),o}updateLoadingProgress(e,t,i=null){const n=this.loadingIndicators.get(e);if(!n)return;const a=n.element.querySelector(".feedback-progress-bar");if(a&&(a.style.width=`${Math.min(100,Math.max(0,t))}%`),i){const e=n.element.querySelector(".loading-message");e&&(e.textContent=i)}}hideLoadingIndicator(e){const t=this.loadingIndicators.get(e);if(!t)return;const{element:i}=t;i.style.transition="opacity 0.3s ease",i.style.opacity="0",setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300),this.loadingIndicators.delete(e)}showErrorMessage(e,t={}){const{title:i="Something went wrong",message:n="An error occurred while loading content.",type:a="error",container:s=null,position:r="inline",enableRetry:o=this.config.enableRetryButtons,retryCallback:c=null,retryAttempts:l=0,maxRetries:h=this.config.maxRetryAttempts,autoHide:d=!1,networkStatus:u=null}=t,m=this.createErrorMessage({title:i,message:n,type:a,enableRetry:o&&l<h,retryAttempts:l,maxRetries:h,networkStatus:u});return c&&this.retryCallbacks.set(e,c),this.activeFeedback.set(e,{element:m,container:s,position:r,type:"error",startTime:Date.now()}),this.setupErrorEventListeners(m,e),"overlay"===r?(m.className+=" overlay-feedback",document.body.appendChild(m),this.config.enableAccessibility&&(this.focusManager.previousFocus=document.activeElement,this.focusManager.trapFocus(m))):s&&(m.className+=" inline-feedback",s.appendChild(m)),this.config.enableAccessibility&&this.announceToScreenReader(`Error: ${i}. ${n}`),d&&setTimeout(()=>{this.dismissFeedback(e)},this.config.autoHideDelay),this.feedbackHistory.push({id:e,type:"error",title:i,message:n,timestamp:Date.now()}),m}showSuccessMessage(e,t={}){const{message:i="Operation completed successfully",container:n=null,position:a="inline",autoHide:s=!0}=t,r=this.createSuccessMessage(i);return this.activeFeedback.set(e,{element:r,container:n,position:a,type:"success",startTime:Date.now()}),"overlay"===a?(r.className+=" overlay-feedback",document.body.appendChild(r)):n&&(r.className+=" inline-feedback",n.appendChild(r)),this.config.enableAccessibility&&this.announceToScreenReader(`Success: ${i}`),s&&setTimeout(()=>{this.dismissFeedback(e)},this.config.autoHideDelay),r}showNetworkStatus(e){const t="network-status";this.dismissFeedback(t),"online"===e&&this.showSuccessMessage(t,{message:"Connection restored",position:"overlay",autoHide:!0})}createLoadingIndicator(e,t={}){const{showProgress:i=!1,progressValue:n=0}=t,a=document.createElement("div");return a.className="loading-indicator feedback-container",a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),a.innerHTML=`\n            <div class="loading-spinner" aria-hidden="true"></div>\n            <div class="loading-message">${e}</div>\n            ${i?`\n                <div class="feedback-progress">\n                    <div class="feedback-progress-bar" style="width: ${n}%"></div>\n                </div>\n            `:""}\n        `,a}createErrorMessage(e){const{title:t,message:i,type:n,enableRetry:a,retryAttempts:s,maxRetries:r,networkStatus:o}=e,c=document.createElement("div");c.className="error-message feedback-container",c.setAttribute("role","alert"),c.setAttribute("aria-live","assertive");const l=s>0?` (Attempt ${s+1}/${r})`:"";return c.innerHTML=`\n            <div class="error-icon" aria-hidden="true">!</div>\n            <div class="error-content">\n                <div class="error-title">${t}${l}</div>\n                <div class="error-description">${i}</div>\n                ${o?`\n                    <div class="network-status">\n                        <div class="network-indicator ${o}"></div>\n                        Network: ${o}\n                    </div>\n                `:""}\n                <div class="error-actions">\n                    ${a?'\n                        <button class="retry-button" type="button" data-action="retry">\n                            <span aria-hidden="true">↻</span>\n                            Try Again\n                        </button>\n                    ':""}\n                    <button class="dismiss-button" type="button" data-action="dismiss">\n                        Dismiss\n                    </button>\n                </div>\n            </div>\n        `,c}createSuccessMessage(e){const t=document.createElement("div");return t.className="success-message feedback-container",t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.innerHTML=`\n            <div class="success-icon" aria-hidden="true">✓</div>\n            <div class="success-content">${e}</div>\n        `,t}setupErrorEventListeners(e,t){e.addEventListener("click",e=>{const i=e.target.dataset.action;"retry"===i?this.handleRetry(t):"dismiss"===i&&this.dismissFeedback(t)}),e.addEventListener("keydown",e=>{if("Enter"===e.key||" "===e.key){e.target.dataset.action&&(e.preventDefault(),e.target.click())}})}async handleRetry(e){const t=this.retryCallbacks.get(e);if(!t)return;const i=this.activeFeedback.get(e);if(i){const e=i.element.querySelector(".retry-button");e&&(e.disabled=!0,e.innerHTML='<span class="loading-spinner"></span> Retrying...')}try{await t(),this.dismissFeedback(e),this.showSuccessMessage(`${e}_success`,{message:"Operation completed successfully",position:i?.position||"inline",autoHide:!0})}catch(n){const i=this.activeFeedback.get(e);if(i){this.dismissFeedback(e);const a=(i.retryAttempts||0)+1;this.showErrorMessage(e,{title:"Retry failed",message:n.message||"The operation failed again. Please try again or check your connection.",container:i.container,position:i.position,retryCallback:t,retryAttempts:a,networkStatus:navigator.onLine?"online":"offline"})}}}dismissFeedback(e){const t=this.activeFeedback.get(e);if(!t)return;const{element:i,position:n}=t;"overlay"===n&&this.config.enableAccessibility&&this.focusManager.previousFocus&&(this.focusManager.previousFocus.focus(),this.focusManager.previousFocus=null),i.style.transition="opacity 0.3s ease, transform 0.3s ease",i.style.opacity="0","overlay"===n&&(i.style.transform="translateX(100%)"),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300),this.activeFeedback.delete(e),this.retryCallbacks.delete(e)}dismissAllOverlays(){Array.from(this.activeFeedback.entries()).filter(([e,t])=>"overlay"===t.position).forEach(([e])=>{this.dismissFeedback(e)})}announceToScreenReader(e){this.announcer&&(this.announcer.textContent="",setTimeout(()=>{this.announcer.textContent=e},100))}createLoadingTemplate(){return{basic:e=>`\n                <div class="loading-spinner" aria-hidden="true"></div>\n                <div class="loading-message">${e}</div>\n            `,withProgress:(e,t)=>`\n                <div class="loading-spinner" aria-hidden="true"></div>\n                <div class="loading-message">${e}</div>\n                <div class="feedback-progress">\n                    <div class="feedback-progress-bar" style="width: ${t}%"></div>\n                </div>\n            `}}createErrorTemplate(){return{basic:(e,t)=>`\n                <div class="error-icon" aria-hidden="true">!</div>\n                <div class="error-content">\n                    <div class="error-title">${e}</div>\n                    <div class="error-description">${t}</div>\n                </div>\n            `,withActions:(e,t,i)=>`\n                <div class="error-icon" aria-hidden="true">!</div>\n                <div class="error-content">\n                    <div class="error-title">${e}</div>\n                    <div class="error-description">${t}</div>\n                    <div class="error-actions">\n                        ${i?'<button class="retry-button" data-action="retry">Try Again</button>':""}\n                        <button class="dismiss-button" data-action="dismiss">Dismiss</button>\n                    </div>\n                </div>\n            `}}createRetryTemplate(){return{button:(e=!1)=>`\n                <button class="retry-button" type="button" data-action="retry" ${e?"disabled":""}>\n                    <span aria-hidden="true">↻</span>\n                    Try Again\n                </button>\n            `,withCount:(e,t)=>`\n                <button class="retry-button" type="button" data-action="retry">\n                    <span aria-hidden="true">↻</span>\n                    Try Again (${e}/${t})\n                </button>\n            `}}createSuccessTemplate(){return{basic:e=>`\n                <div class="success-icon" aria-hidden="true">✓</div>\n                <div class="success-content">${e}</div>\n            `}}getFeedbackStats(){return{activeIndicators:this.loadingIndicators.size,activeFeedback:this.activeFeedback.size,totalHistory:this.feedbackHistory.length,recentErrors:this.feedbackHistory.filter(e=>"error"===e.type).slice(-10)}}clearAllFeedback(){this.loadingIndicators.forEach((e,t)=>{this.hideLoadingIndicator(t)}),this.activeFeedback.forEach((e,t)=>{this.dismissFeedback(t)})}setConfig(e){this.config={...this.config,...e}}cleanup(){this.clearAllFeedback(),this.announcer&&this.announcer.parentNode&&this.announcer.parentNode.removeChild(this.announcer);const e=document.getElementById("user-feedback-styles");e&&e.parentNode.removeChild(e)}static create(e={}){return new Ya(e)}}class Wa{constructor(){this.errorLog=[],this.retryAttempts=new Map,this.fallbackImages=new Map,this.networkStatus="online",this.maxRetries=3,this.retryDelay=1e3,this.isInitialized=!1,this.config={enableLogging:!0,enableRetry:!0,enableFallbacks:!0,maxErrorLogSize:100,fallbackImagePath:"/assets/images/placeholder-product.jpg",networkCheckInterval:5e3,errorReportingEndpoint:null},this.errorRecoveryManager=new qa({maxRetries:this.maxRetries,baseRetryDelay:this.retryDelay,enableLogging:this.config.enableLogging}),this.userFeedbackManager=new Ya({enableAccessibility:!0,enableRetryButtons:this.config.enableRetry,enableLoadingIndicators:!0,maxRetryAttempts:this.maxRetries}),this.init()}init(){this.isInitialized||(this.setupGlobalErrorHandling(),this.setupNetworkMonitoring(),this.setupFallbackImages(),this.isInitialized=!0)}setupGlobalErrorHandling(){window.addEventListener("error",e=>{this.logError("JavaScript Error",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error?.stack})}),window.addEventListener("unhandledrejection",e=>{this.logError("Unhandled Promise Rejection",{reason:e.reason,promise:e.promise})}),window.addEventListener("error",e=>{e.target!==window&&this.handleResourceError(e)},!0)}setupNetworkMonitoring(){if(window.addEventListener("online",()=>{this.networkStatus="online",this.retryFailedOperations()}),window.addEventListener("offline",()=>{this.networkStatus="offline"}),"connection"in navigator){const e=navigator.connection,t=()=>{this.networkStatus={online:navigator.onLine,effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt}};e.addEventListener("change",t),t()}}setupFallbackImages(){this.fallbackImages.set("domestic-oil-spill-kit","/assets/images/products/fallback-domestic.jpg"),this.fallbackImages.set("marine-oil-spill-kit","/assets/images/products/fallback-marine.jpg"),this.fallbackImages.set("cellulose-nanocrystals","/assets/images/products/fallback-cellulose.jpg"),this.fallbackImages.set("default",this.config.fallbackImagePath)}async handleImageError(e,t={}){const{maxRetries:i=this.maxRetries,retryDelay:n=this.retryDelay,fallbackSrc:a=null,productType:s="default",onRetry:r=null,onFallback:o=null,onFinalFailure:c=null,showUserFeedback:l=!0,container:h=null}=t,d=e.src||e.dataset.src,u=`image_error_${this.generateErrorId(d)}`;l&&this.userFeedbackManager.showLoadingIndicator(u,{message:"Loading image...",container:h||e.parentElement,position:"inline"});try{const t=await this.errorRecoveryManager.recover(new Error(`Failed to load image: ${d}`),"image",d,{originalElement:e,productType:s,fallbackSrc:a,onRetry:r,onFallback:o});if(l&&this.userFeedbackManager.hideLoadingIndicator(u),t&&t.element)return t.fallback&&e.classList.add("fallback-image"),t.element!==e&&e.parentNode.replaceChild(t.element,e),l&&t.fallback&&this.userFeedbackManager.showSuccessMessage(`${u}_success`,{message:"Alternative image loaded",container:h||t.element.parentElement,position:"inline",autoHide:!0}),o&&t.fallback&&o(t.url||t.text),t}catch(m){l&&this.userFeedbackManager.hideLoadingIndicator(u),l&&this.userFeedbackManager.showErrorMessage(u,{title:"Image Loading Failed",message:"Unable to load the image. You can try again or continue without it.",container:h||e.parentElement,position:"inline",enableRetry:!0,retryCallback:()=>this.handleImageError(e,t),networkStatus:this.isNetworkAvailable()?"online":"offline"});const i=this.createImagePlaceholder(e);throw i&&e.parentNode&&e.parentNode.replaceChild(i,e),c&&c(e),m}}async retryImageLoad(e,t,i,n={}){const{retryDelay:a,onRetry:s}=n;this.retryAttempts.set(t,i+1);const r=a*Math.pow(2,i);return s&&s(i+1,r),new Promise((i,n)=>{setTimeout(async()=>{try{await this.loadImageWithValidation(e)?(this.retryAttempts.delete(t),i(!0)):n(new Error("Image validation failed"))}catch(a){n(a)}},r)})}async loadImageWithValidation(e){const t=e.src||e.dataset.src;return new Promise(i=>{const n=new Image;n.onload=()=>{n.naturalWidth>0&&n.naturalHeight>0?(e.src=t,i(!0)):i(!1)},n.onerror=()=>{i(!1)},setTimeout(()=>{i(!1)},1e4),n.src=t})}async loadFallbackImage(e,t,i){i&&i(t);try{if(await this.loadImageWithValidation({src:t,dataset:{src:t}}))return e.src=t,e.classList.add("fallback-image"),!0}catch(n){}return!1}handleFinalImageFailure(e,t){const i=this.createImagePlaceholder(e);i?e.parentNode.replaceChild(i,e):(e.style.display="none",e.setAttribute("aria-hidden","true")),t&&t(e)}createImagePlaceholder(e){const t=document.createElement("div");return t.className="image-placeholder error-fallback",t.style.cssText=`\n            width: ${e.width||"300"}px;\n            height: ${e.height||"200"}px;\n            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border: 2px dashed #ccc;\n            border-radius: 8px;\n            color: #666;\n            font-family: system-ui, -apple-system, sans-serif;\n            font-size: 14px;\n            text-align: center;\n            position: relative;\n        `,t.innerHTML=`\n            <div>\n                <div style="font-size: 24px; margin-bottom: 8px;">📷</div>\n                <div>Image unavailable</div>\n                <div style="font-size: 12px; margin-top: 4px; opacity: 0.7;">\n                    ${this.isNetworkAvailable()?"Loading failed":"Check connection"}\n                </div>\n            </div>\n        `,e.alt&&t.setAttribute("aria-label",`Image placeholder: ${e.alt}`),t}handleJavaScriptError(e,t={}){return this.logError("JavaScript Execution Error",{message:e.message,stack:e.stack,context:t}),"TypeError"===e.name&&e.message.includes("Cannot read property")?this.handlePropertyAccessError(e,t):"ReferenceError"===e.name?this.handleReferenceError(e,t):this.handleGenericError(e,t)}handlePropertyAccessError(e,t){return{length:0,textContent:"",innerHTML:"",style:{},classList:{add:()=>{},remove:()=>{},toggle:()=>{}},addEventListener:()=>{},removeEventListener:()=>{}}}handleReferenceError(e,t){const i=[];return"undefined"==typeof IntersectionObserver&&i.push("IntersectionObserver"),"undefined"==typeof PerformanceObserver&&i.push("PerformanceObserver"),i.length>0?this.loadPolyfills(i):null}handleGenericError(e,t){return window.dispatchEvent(new CustomEvent("productPageError",{detail:{error:e,context:t,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href}})),null}async handleNetworkError(e,t={}){const{maxRetries:i=this.maxRetries,retryDelay:n=this.retryDelay,onRetry:a=null,onFinalFailure:s=null,showUserFeedback:r=!0,container:o=null}=t,c=e.url||e,l=`network_error_${this.generateErrorId(c)}`;r&&this.userFeedbackManager.showLoadingIndicator(l,{message:"Loading content...",container:o,position:o?"inline":"overlay"});try{const t=await this.errorRecoveryManager.recover(new Error(`Network request failed: ${c}`),"network",e,{onRetry:a,onFinalFailure:s});return r&&this.userFeedbackManager.hideLoadingIndicator(l),r&&t&&t.fallback&&this.userFeedbackManager.showSuccessMessage(`${l}_success`,{message:"Content loaded from cache",container:o,position:o?"inline":"overlay",autoHide:!0}),t}catch(h){throw r&&this.userFeedbackManager.hideLoadingIndicator(l),r&&this.userFeedbackManager.showErrorMessage(l,{title:"Network Error",message:"Unable to load content. Please check your connection and try again.",container:o,position:o?"inline":"overlay",enableRetry:!0,retryCallback:()=>this.handleNetworkError(e,t),networkStatus:this.isNetworkAvailable()?"online":"offline"}),s&&s(e),h}}handleInteractionError(e,t,i,n=null){if(this.logError("Interaction Error",{component:e.constructor.name,action:t,error:i.message,stack:i.stack}),n&&"function"==typeof n)try{return n()}catch(a){}this.disableComponent(e,t)}disableComponent(e,t){if(e.container||e.element){const t=e.container||e.element;t.classList.add("component-error"),t.setAttribute("aria-disabled","true");const i=document.createElement("div");i.className="error-indicator",i.innerHTML="⚠️ Feature temporarily unavailable",i.style.cssText="\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background: rgba(255, 193, 7, 0.9);\n                color: #856404;\n                padding: 8px 12px;\n                border-radius: 4px;\n                font-size: 12px;\n                z-index: 1000;\n                pointer-events: none;\n            ",t.style.position="relative",t.appendChild(i)}}isNetworkAvailable(){return"object"==typeof this.networkStatus?this.networkStatus.online:"online"===this.networkStatus&&navigator.onLine}getFallbackImage(e){return this.fallbackImages.get(e)||this.fallbackImages.get("default")}generateErrorId(e){let t=0;const i="string"==typeof e?e:JSON.stringify(e);for(let n=0;n<i.length;n++){t=(t<<5)-t+i.charCodeAt(n),t&=t}return Math.abs(t).toString(36)+"_"+Date.now().toString(36)}retryFailedOperations(){this.retryAttempts.clear(),window.dispatchEvent(new CustomEvent("networkRestored",{detail:{timestamp:Date.now()}}))}async loadPolyfills(e){const t=[];e.includes("IntersectionObserver")&&t.push(this.loadIntersectionObserverPolyfill()),e.includes("PerformanceObserver")&&t.push(this.loadPerformanceObserverPolyfill());try{return await Promise.all(t),!0}catch(i){return!1}}async loadIntersectionObserverPolyfill(){"undefined"==typeof IntersectionObserver&&(window.IntersectionObserver=class{constructor(e,t={}){this.callback=e,this.options=t,this.elements=new Set}observe(e){this.elements.add(e),setTimeout(()=>{this.callback([{target:e,isIntersecting:!0,intersectionRatio:1}])},100)}unobserve(e){this.elements.delete(e)}disconnect(){this.elements.clear()}})}async loadPerformanceObserverPolyfill(){"undefined"==typeof PerformanceObserver&&(window.PerformanceObserver=class{constructor(e){this.callback=e}observe(e){setTimeout(()=>{this.callback({getEntries:()=>[]})},100)}disconnect(){}})}logError(e,t){if(!this.config.enableLogging)return;const i={type:e,details:t,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent};this.errorLog.push(i),this.errorLog.length>this.config.maxErrorLogSize&&(this.errorLog=this.errorLog.slice(-this.config.maxErrorLogSize/2)),this.config.errorReportingEndpoint&&this.reportError(i)}async reportError(e){try{await fetch(this.config.errorReportingEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){}}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}getRetryStatus(){return Object.fromEntries(this.retryAttempts)}setConfig(e){this.config={...this.config,...e},this.errorRecoveryManager&&this.errorRecoveryManager.setConfig({maxRetries:this.config.maxRetries||this.maxRetries,baseRetryDelay:this.config.retryDelay||this.retryDelay,enableLogging:this.config.enableLogging}),this.userFeedbackManager&&this.userFeedbackManager.setConfig({enableRetryButtons:this.config.enableRetry,maxRetryAttempts:this.config.maxRetries||this.maxRetries})}showLoadingIndicator(e,t={}){return this.userFeedbackManager.showLoadingIndicator(e,t)}hideLoadingIndicator(e){return this.userFeedbackManager.hideLoadingIndicator(e)}showErrorMessage(e,t={}){return this.userFeedbackManager.showErrorMessage(e,t)}showSuccessMessage(e,t={}){return this.userFeedbackManager.showSuccessMessage(e,t)}dismissFeedback(e){return this.userFeedbackManager.dismissFeedback(e)}getRecoveryMetrics(){return this.errorRecoveryManager.getRecoveryMetrics()}getFeedbackStats(){return this.userFeedbackManager.getFeedbackStats()}handleResourceError(e){const t=e.target,i=this.getAssetTypeFromElement(t),n=t.src||t.href;"image"===i?this.handleImageError(t,{showUserFeedback:!0,container:t.parentElement}).catch(e=>{}):this.handleNetworkError(n,{showUserFeedback:!0,container:t.parentElement}).catch(e=>{})}getAssetTypeFromElement(e){return"IMG"===e.tagName?"image":"LINK"===e.tagName&&"stylesheet"===e.rel?"css":"SCRIPT"===e.tagName?"javascript":"unknown"}async recoverAsset(e,t,i={}){try{return await this.errorRecoveryManager.recover(new Error(`Failed to load ${e}`),e,t,i)}catch(n){throw n}}clearAllFeedback(){this.userFeedbackManager.clearAllFeedback(),this.errorRecoveryManager.clearRecoveryHistory()}getComprehensiveStats(){return{errorLog:this.getErrorLog().slice(-10),retryStatus:this.getRetryStatus(),recoveryMetrics:this.getRecoveryMetrics(),feedbackStats:this.getFeedbackStats(),networkStatus:this.networkStatus,config:this.config}}cleanup(){this.clearAllFeedback(),this.errorRecoveryManager&&this.errorRecoveryManager.cleanup&&this.errorRecoveryManager.cleanup(),this.userFeedbackManager&&this.userFeedbackManager.cleanup&&this.userFeedbackManager.cleanup(),this.errorLog=[],this.retryAttempts.clear(),this.fallbackImages.clear()}static create(e={}){const t=new Wa;return t.setConfig(e),t}}class $a{constructor(e,t={}){this.container=e,this.options={autoPlay:t.autoPlay||!1,autoPlayDelay:t.autoPlayDelay||5e3,showThumbnails:!1!==t.showThumbnails,enableKeyboard:!1!==t.enableKeyboard,enableTouch:!1!==t.enableTouch,transitionDuration:t.transitionDuration||.6,...t},this.images=[],this.thumbnails=[],this.currentIndex=0,this.isTransitioning=!1,this.autoPlayTimer=null,this.touchStartX=0,this.touchStartY=0,this.touchEndX=0,this.touchEndY=0,this.minSwipeDistance=50,this.intersectionObserver=null,this.supportsWebP=null,this.errorHandler=new Wa,this.failedImages=new Set,this.retryAttempts=new Map,this.init()}async init(){await this.checkWebPSupport(),this.setupGalleryStructure(),this.setupLazyLoading(),this.bindEvents(),this.setupKeyboardNavigation(),this.setupTouchNavigation(),this.options.autoPlay&&this.images.length>1&&this.startAutoPlay()}setupGalleryStructure(){const e=this.container.querySelectorAll("img");0!==e.length&&(e.forEach((e,t)=>{const i=e.src,n=this.getWebPVersion(i);this.images.push({element:e,src:i,webp:n,alt:e.alt||`Product image ${t+1}`,loaded:!1,loading:!1})}),this.images.length<=1||(this.container.innerHTML="",this.container.classList.add("product-image-gallery"),this.mainImageContainer=document.createElement("div"),this.mainImageContainer.className="gallery-main-image",this.mainImageContainer.setAttribute("role","img"),this.mainImageContainer.setAttribute("aria-live","polite"),this.createNavigationButtons(),this.images.forEach((e,t)=>{const i=document.createElement("img");i.src=e.src,i.alt=e.alt,i.className="gallery-image "+(0===t?"active":""),i.setAttribute("aria-hidden",0===t?"false":"true"),i.loading="lazy",this.mainImageContainer.appendChild(i)}),this.container.appendChild(this.mainImageContainer),this.options.showThumbnails&&this.images.length>1&&this.createThumbnails(),this.createIndicators()))}createNavigationButtons(){this.prevButton=document.createElement("button"),this.prevButton.className="gallery-nav gallery-prev",this.prevButton.innerHTML="‹",this.prevButton.setAttribute("aria-label","Previous image"),this.prevButton.setAttribute("type","button"),this.nextButton=document.createElement("button"),this.nextButton.className="gallery-nav gallery-next",this.nextButton.innerHTML="›",this.nextButton.setAttribute("aria-label","Next image"),this.nextButton.setAttribute("type","button"),this.mainImageContainer.appendChild(this.prevButton),this.mainImageContainer.appendChild(this.nextButton)}createThumbnails(){this.thumbnailContainer=document.createElement("div"),this.thumbnailContainer.className="gallery-thumbnails",this.thumbnailContainer.setAttribute("role","tablist"),this.thumbnailContainer.setAttribute("aria-label","Product image thumbnails"),this.images.forEach((e,t)=>{const i=document.createElement("button");i.className="gallery-thumbnail "+(0===t?"active":""),i.setAttribute("type","button"),i.setAttribute("role","tab"),i.setAttribute("aria-selected",0===t?"true":"false"),i.setAttribute("aria-label",`View image ${t+1}: ${e.alt}`),i.dataset.index=t;const n=document.createElement("img");n.src=e.src,n.alt="",n.loading="lazy",i.appendChild(n),this.thumbnailContainer.appendChild(i),this.thumbnails.push(i)}),this.container.appendChild(this.thumbnailContainer)}createIndicators(){this.images.length<=1||(this.indicatorContainer=document.createElement("div"),this.indicatorContainer.className="gallery-indicators",this.indicatorContainer.setAttribute("aria-hidden","true"),this.images.forEach((e,t)=>{const i=document.createElement("span");i.className="gallery-indicator "+(0===t?"active":""),this.indicatorContainer.appendChild(i)}),this.container.appendChild(this.indicatorContainer))}bindEvents(){this.images.length<=1||(this.prevButton?.addEventListener("click",()=>this.previousImage()),this.nextButton?.addEventListener("click",()=>this.nextImage()),this.thumbnails.forEach((e,t)=>{e.addEventListener("click",()=>this.goToImage(t))}),this.container.addEventListener("mouseenter",()=>this.pauseAutoPlay()),this.container.addEventListener("mouseleave",()=>{this.options.autoPlay&&this.startAutoPlay()}),this.container.addEventListener("focusin",()=>this.pauseAutoPlay()),this.container.addEventListener("focusout",()=>{this.options.autoPlay&&this.startAutoPlay()}))}setupKeyboardNavigation(){!this.options.enableKeyboard||this.images.length<=1||(this.container.addEventListener("keydown",e=>{if(this.container.contains(document.activeElement))switch(e.key){case"ArrowLeft":case"ArrowUp":e.preventDefault(),this.previousImage();break;case"ArrowRight":case"ArrowDown":e.preventDefault(),this.nextImage();break;case"Home":e.preventDefault(),this.goToImage(0);break;case"End":e.preventDefault(),this.goToImage(this.images.length-1);break;case" ":case"Enter":if(e.target.classList.contains("gallery-thumbnail")){e.preventDefault();const t=parseInt(e.target.dataset.index);this.goToImage(t)}}}),this.container.setAttribute("tabindex","0"),this.container.setAttribute("role","region"),this.container.setAttribute("aria-label","Product image gallery"))}setupTouchNavigation(){!this.options.enableTouch||this.images.length<=1||(this.mainImageContainer.addEventListener("touchstart",e=>{this.handleTouchStart(e)},{passive:!1}),this.mainImageContainer.addEventListener("touchmove",e=>{this.handleTouchMove(e)},{passive:!1}),this.mainImageContainer.addEventListener("touchend",e=>{this.handleTouchEnd(e)},{passive:!0}))}handleTouchStart(e){if(!this.isTransitioning&&(this.pauseAutoPlay(),1===e.touches.length)){const t=e.touches[0];this.touchStartX=t.clientX,this.touchStartY=t.clientY}}handleTouchMove(e){if(!this.isTransitioning&&1===e.touches.length){const t=e.touches[0];this.touchEndX=t.clientX,this.touchEndY=t.clientY}}handleTouchEnd(e){if(!this.isTransitioning){if(1===e.changedTouches.length){const e=this.touchEndX-this.touchStartX,t=this.touchEndY-this.touchStartY,i=Math.abs(e),n=Math.abs(t);i>this.minSwipeDistance&&i>n&&(e>0?this.previousImage():this.nextImage())}this.touchStartX=0,this.touchStartY=0,this.touchEndX=0,this.touchEndY=0,this.options.autoPlay&&setTimeout(()=>this.startAutoPlay(),1e3)}}previousImage(){if(this.isTransitioning||this.images.length<=1)return;const e=0===this.currentIndex?this.images.length-1:this.currentIndex-1;this.goToImage(e)}nextImage(){if(this.isTransitioning||this.images.length<=1)return;const e=this.currentIndex===this.images.length-1?0:this.currentIndex+1;this.goToImage(e)}async goToImage(e){if(this.isTransitioning||e===this.currentIndex||e<0||e>=this.images.length)return;this.isTransitioning=!0;const t=this.currentIndex;try{if(!(await this.validateImageForTransition(e))){const i=this.findNextAvailableImage(e);if(-1===i||i===t)return this.showTransitionError(e),void(this.isTransitioning=!1);e=i}this.currentIndex=e,this.showTransitionLoadingIndicator(),await this.transitionToImage(t,e),this.updateThumbnails(e),this.updateIndicators(e),this.updateAccessibility(e),this.announceImageChange(e),this.hideTransitionLoadingIndicator()}catch(i){this.handleTransitionError(t,e,i)}}async validateImageForTransition(e){if(this.failedImages.has(e))return!1;try{if(this.images[e].loaded)return!0;return await this.loadImageWithProgression(e)}catch(t){return!1}}showTransitionLoadingIndicator(){let e=this.container.querySelector(".gallery-transition-loading");e||(e=document.createElement("div"),e.className="gallery-transition-loading",e.innerHTML='\n                <div class="transition-spinner"></div>\n            ',e.style.cssText="\n                position: absolute;\n                top: 1rem;\n                right: 1rem;\n                background: rgba(var(--color-background-card), 0.9);\n                border: 1px solid var(--color-border);\n                border-radius: 50%;\n                width: 40px;\n                height: 40px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 15;\n                backdrop-filter: blur(4px);\n                transition: opacity 0.2s ease;\n            ",this.container.appendChild(e)),e.style.opacity="1"}hideTransitionLoadingIndicator(){const e=this.container.querySelector(".gallery-transition-loading");e&&(e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},200))}showTransitionError(e){const t=this.images[e],i=document.createElement("div");i.className="gallery-transition-error-notification",i.innerHTML=`\n            <div class="error-notification-content">\n                <span class="error-icon">⚠️</span>\n                <span class="error-text">Image unavailable: ${t.alt}</span>\n            </div>\n        `,i.style.cssText="\n            position: absolute;\n            top: 1rem;\n            left: 50%;\n            transform: translateX(-50%);\n            background: rgba(255, 193, 7, 0.95);\n            color: #856404;\n            padding: 0.5rem 1rem;\n            border-radius: 6px;\n            font-size: 0.8rem;\n            font-weight: 500;\n            z-index: 20;\n            backdrop-filter: blur(4px);\n            animation: slideInDown 0.3s ease;\n        ",this.container.appendChild(i),setTimeout(()=>{i.parentNode&&(i.style.animation="slideOutUp 0.3s ease",setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300))},3e3)}handleTransitionError(e,t,i){this.isTransitioning=!1,this.currentIndex=e,this.hideTransitionLoadingIndicator(),this.showTransitionError(t),this.container.dispatchEvent(new CustomEvent("imageTransitionError",{detail:{fromIndex:e,toIndex:t,error:i.message,timestamp:Date.now()}}))}async transitionToImage(e,t){const i=this.mainImageContainer.querySelector(".gallery-image.active"),n=this.mainImageContainer.children[t];i&&n?(await this.ensureImageLoaded(t),this.showLoadingState(n),this.failedImages.has(t)?this.handleTransitionToFailedImage(e,t):this.performSmoothTransition(i,n,e,t)):this.isTransitioning=!1}async ensureImageLoaded(e){const t=this.images[e];return!!t.loaded||(t.loading?new Promise(e=>{const i=()=>{t.loading?setTimeout(i,50):e(t.loaded)};i()}):this.loadImageWithProgression(e))}showLoadingState(e){e.classList.add("gallery-image-loading");let t=e.parentNode.querySelector(".gallery-loading-overlay");t||(t=document.createElement("div"),t.className="gallery-loading-overlay",t.innerHTML='\n                <div class="loading-spinner"></div>\n                <div class="loading-text">Loading image...</div>\n            ',t.style.cssText="\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(248, 249, 250, 0.9);\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                z-index: 5;\n                transition: opacity 0.3s ease;\n            ",e.parentNode.appendChild(t)),t.style.opacity="1"}hideLoadingState(e){e.classList.remove("gallery-image-loading");const t=e.parentNode.querySelector(".gallery-loading-overlay");t&&(t.style.opacity="0",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300))}handleTransitionToFailedImage(e,t){const i=this.findNextAvailableImage(t);-1!==i&&i!==e?(this.currentIndex=i,this.transitionToImage(e,i)):(this.showImageTransitionError(t),this.isTransitioning=!1)}findNextAvailableImage(e){for(let t=1;t<this.images.length;t++){const i=(e+t)%this.images.length;if(!this.failedImages.has(i))return i}return-1}showImageTransitionError(e){const t=this.images[e],i=document.createElement("div");i.className="gallery-transition-error",i.innerHTML=`\n            <div class="error-content">\n                <div class="error-icon">⚠️</div>\n                <div class="error-message">Image unavailable</div>\n                <div class="error-description">${t.alt}</div>\n                <button class="error-retry-btn" type="button">Try Again</button>\n            </div>\n        `,i.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(248, 249, 250, 0.95);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 10;\n            text-align: center;\n            font-family: system-ui, -apple-system, sans-serif;\n            color: #666;\n        ";i.querySelector(".error-retry-btn").addEventListener("click",async()=>{i.remove(),this.failedImages.delete(e),this.images[e].loaded=!1,this.images[e].loading=!1,await this.loadImageWithProgression(e),this.failedImages.has(e)||this.goToImage(e)}),this.mainImageContainer.style.position="relative",this.mainImageContainer.appendChild(i),setTimeout(()=>{i.parentNode&&i.remove()},5e3)}performSmoothTransition(e,t,i,n){const a=1e3*this.options.transitionDuration;e.style.transition=`opacity ${a/2}ms ease-out`,e.style.opacity="0",setTimeout(()=>{e.classList.remove("active"),t.classList.add("active"),this.hideLoadingState(t),t.style.opacity="0",t.style.transform="scale(1.05)",t.style.transition=`opacity ${a/2}ms ease-out, transform ${a/2}ms ease-out`,requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="scale(1)"}),setTimeout(()=>{t.style.transition="",t.style.transform="",e.style.transition="",this.isTransitioning=!1,this.container.dispatchEvent(new CustomEvent("imageTransitionComplete",{detail:{fromIndex:i,toIndex:n,currentImage:this.images[n]}}))},a/2)},a/2)}updateThumbnails(e){this.thumbnails.length&&this.thumbnails.forEach((t,i)=>{const n=i===e;t.classList.toggle("active",n),t.setAttribute("aria-selected",n?"true":"false")})}updateIndicators(e){if(!this.indicatorContainer)return;this.indicatorContainer.querySelectorAll(".gallery-indicator").forEach((t,i)=>{t.classList.toggle("active",i===e)})}updateAccessibility(e){this.mainImageContainer.querySelectorAll(".gallery-image").forEach((t,i)=>{t.setAttribute("aria-hidden",i===e?"false":"true")});const t=this.images[e];this.mainImageContainer.setAttribute("aria-label",`Image ${e+1} of ${this.images.length}: ${t.alt}`)}announceImageChange(e){let t=document.getElementById("gallery-live-region");t||(t=document.createElement("div"),t.id="gallery-live-region",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",document.body.appendChild(t));const i=this.images[e];t.textContent=`Showing image ${e+1} of ${this.images.length}: ${i.alt}`}startAutoPlay(){!this.options.autoPlay||this.images.length<=1||(this.clearAutoPlay(),this.autoPlayTimer=setInterval(()=>{this.nextImage()},this.options.autoPlayDelay))}pauseAutoPlay(){this.clearAutoPlay()}clearAutoPlay(){this.autoPlayTimer&&(clearInterval(this.autoPlayTimer),this.autoPlayTimer=null)}async checkWebPSupport(){return null!==this.supportsWebP?this.supportsWebP:new Promise(e=>{const t=new Image;t.onload=t.onerror=()=>{this.supportsWebP=2===t.height,e(this.supportsWebP)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})}getWebPVersion(e){return e?e.replace(/\.(jpe?g|png)$/i,".webp"):null}setupLazyLoading(){if(!("IntersectionObserver"in window))return void this.loadAllImages();this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target,i=parseInt(t.dataset.imageIndex);void 0===i||this.images[i].loaded||this.images[i].loading||this.loadImageWithProgression(i)}})},{root:null,rootMargin:"50px",threshold:.1});const e=this.mainImageContainer?.querySelectorAll(".gallery-image");e?.forEach((e,t)=>{e.dataset.imageIndex=t,this.intersectionObserver.observe(e)}),this.images.length>0&&this.loadImageWithProgression(0)}loadAllImages(){this.images.forEach((e,t)=>{this.loadImageWithProgression(t)})}async loadImageWithProgression(e){if(e<0||e>=this.images.length)return!1;const t=this.images[e];if(t.loaded)return!0;if(t.loading)return new Promise(e=>{const i=()=>{t.loading?setTimeout(i,50):e(t.loaded)};i()});t.loading=!0;try{const i=this.mainImageContainer?.querySelector(`.gallery-image:nth-child(${e+1})`),n=this.thumbnailContainer?.querySelector(`.gallery-thumbnail:nth-child(${e+1}) img`);if(!i)throw new Error(`Gallery image element not found for index ${e}`);i.classList.add("loading");const a=this.getProductTypeFromImage(t),s=await this.errorHandler.handleImageError(i,{maxRetries:3,retryDelay:1e3,productType:a,onRetry:(e,t)=>{},onFallback:e=>{n&&(n.src=e)},onFinalFailure:t=>{this.handleImageLoadFailure(e,t)}});if(i.classList.remove("loading"),s)return n&&i.src&&(n.src=i.src),t.loaded=!0,t.loading=!1,this.container.dispatchEvent(new CustomEvent("imageLoaded",{detail:{index:e,src:i.src}})),!0;throw new Error("Image loading failed after all retry attempts")}catch(i){return this.errorHandler.logError("Gallery Image Load Error",{index:e,src:t.src,webp:t.webp,error:i.message}),t.loading=!1,this.handleImageLoadFailure(e),!1}}handleImageLoadFailure(e,t=null){const i=this.images[e];this.failedImages.add(e);const n=t||this.mainImageContainer?.querySelector(`.gallery-image:nth-child(${e+1})`),a=this.thumbnailContainer?.querySelector(`.gallery-thumbnail:nth-child(${e+1})`);n&&(n.classList.add("image-load-error"),n.setAttribute("aria-label",`Image ${e+1} failed to load: ${i.alt}`)),a&&(a.classList.add("thumbnail-error"),a.setAttribute("aria-label",`Thumbnail ${e+1} unavailable: ${i.alt}`)),e===this.currentIndex&&this.images.length>1&&this.showNextAvailableImage(),this.container.dispatchEvent(new CustomEvent("imageLoadFailed",{detail:{index:e,alt:i.alt}}))}showNextAvailableImage(){for(let e=0;e<this.images.length;e++){const t=(this.currentIndex+e+1)%this.images.length;if(!this.failedImages.has(t))return void this.goToImage(t)}this.showGalleryErrorState()}showGalleryErrorState(){const e=document.createElement("div");e.className="gallery-error-overlay",e.innerHTML='\n            <div class="gallery-error-content">\n                <div class="error-icon">📷</div>\n                <h3>Images Unavailable</h3>\n                <p>Unable to load product images. Please check your connection and try again.</p>\n                <button class="retry-button" type="button">Retry Loading</button>\n            </div>\n        ',e.style.cssText="\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(248, 249, 250, 0.95);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 10;\n            text-align: center;\n            font-family: system-ui, -apple-system, sans-serif;\n        ";e.querySelector(".retry-button").addEventListener("click",()=>{this.retryFailedImages(),e.remove()}),this.container.style.position="relative",this.container.appendChild(e)}async retryFailedImages(){const e=Array.from(this.failedImages);this.failedImages.clear(),this.retryAttempts.clear(),e.forEach(e=>{const t=this.mainImageContainer?.querySelector(`.gallery-image:nth-child(${e+1})`),i=this.thumbnailContainer?.querySelector(`.gallery-thumbnail:nth-child(${e+1})`);t&&t.classList.remove("image-load-error"),i&&i.classList.remove("thumbnail-error")});for(const t of e)this.images[t].loaded=!1,this.images[t].loading=!1,await this.loadImageWithProgression(t)}getProductTypeFromImage(e){const t=e.src.toLowerCase(),i=e.alt.toLowerCase();return t.includes("domestic")||i.includes("domestic")?"domestic-oil-spill-kit":t.includes("marine")||i.includes("marine")?"marine-oil-spill-kit":t.includes("cellulose")||t.includes("nano")||i.includes("cellulose")||i.includes("nano")?"cellulose-nanocrystals":"default"}getCurrentIndex(){return this.currentIndex}getTotalImages(){return this.images.length}setAutoPlay(e,t=null){this.options.autoPlay=e,null!==t&&(this.options.autoPlayDelay=t),e?this.startAutoPlay():this.pauseAutoPlay()}cleanup(){this.clearAutoPlay(),this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),this.prevButton&&this.prevButton.removeEventListener("click",()=>this.previousImage()),this.nextButton&&this.nextButton.removeEventListener("click",()=>this.nextImage()),this.thumbnails.forEach((e,t)=>{e.removeEventListener("click",()=>this.goToImage(t))}),this.container.removeEventListener("mouseenter",()=>this.pauseAutoPlay()),this.container.removeEventListener("mouseleave",()=>{this.options.autoPlay&&this.startAutoPlay()}),this.container.removeEventListener("focusin",()=>this.pauseAutoPlay()),this.container.removeEventListener("focusout",()=>{this.options.autoPlay&&this.startAutoPlay()});const e=document.getElementById("gallery-live-region");e&&e.remove(),this.container.classList.remove("product-image-gallery"),this.container.removeAttribute("tabindex"),this.container.removeAttribute("role"),this.container.removeAttribute("aria-label")}static isSupported(){return!!window.IntersectionObserver}}const ja=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"}));class Xa{constructor(){this.activeModal=null,this.eventListeners=new Map,this.isInitialized=!1,this.formSubmissionInProgress=!1,this.formConfig={googleFormUrl:"https://docs.google.com/forms/d/e/YOUR_FORM_ID_HERE/formResponse",formFields:{name:"entry.YOUR_NAME_FIELD_ID",email:"entry.YOUR_EMAIL_FIELD_ID",subject:"entry.YOUR_SUBJECT_FIELD_ID",message:"entry.YOUR_MESSAGE_FIELD_ID",product:"entry.YOUR_PRODUCT_FIELD_ID"},isConfigured:!1},this.formConfig.isConfigured=!this.formConfig.googleFormUrl.includes("YOUR_FORM_ID_HERE")}init(){this.isInitialized||(this.initEventListeners(),this.initContactModals(),this.initProductContactButtons(),this.isInitialized=!0)}initEventListeners(){window.addEventListener("productContactClick",e=>{this.handleProductContactClick(e.detail)}),window.addEventListener("themeChanged",e=>{this.handleThemeChange(e.detail.isDark)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.activeModal&&this.closeModal()})}initContactModals(){let e=document.getElementById("contact-modal-container");e||(e=document.createElement("div"),e.id="contact-modal-container",document.body.appendChild(e))}initProductContactButtons(){document.querySelectorAll(".contact-button:not([data-handled])").forEach(e=>{const t=e=>this.handleContactButtonClick(e);e.addEventListener("click",t),e.setAttribute("data-handled","true"),this.eventListeners.set(e,t)})}handleContactButtonClick(e){e.preventDefault();const t=e.target.closest(".contact-button"),i=t.dataset.action||"quote",n=t.dataset.product||"general";t.style.transform="scale(0.95)",t.style.transition="transform 0.1s ease",setTimeout(()=>{t.style.transform="scale(1)"},100),this.openContactModal(i,n)}handleProductContactClick(e){const{productId:t,action:i,productName:n}=e;this.openContactModal(i,t,n)}openContactModal(e="quote",t="general",i=null){const n=this.createModalHtml(e,t,i),a=document.getElementById("contact-modal-container");a.innerHTML=n;const s=a.querySelector(".contact-modal");this.activeModal=s,this.setupModalEventListeners(s),requestAnimationFrame(()=>{s.classList.add("active")}),document.body.style.overflow="hidden";const r=s.querySelector(".form-input");r&&setTimeout(()=>r.focus(),300)}createModalHtml(e,t,i){const n={quote:"Request Quote",info:"Request Information",demo:"Request Demo",contact:"Contact Us"}[e]||"Contact Us";return`\n            <div class="contact-modal" role="dialog" aria-labelledby="modal-title" aria-modal="true">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h2 id="modal-title" class="modal-title">${n}</h2>\n                        <button type="button" class="modal-close" aria-label="Close modal">×</button>\n                    </div>\n                    \n                    ${i?`\n            <div class="product-inquiry-info">\n                <div class="inquiry-product-name">${i}</div>\n                <div class="inquiry-product-details">Product inquiry for: ${t}</div>\n            </div>\n        `:""}\n                    \n                    <form class="contact-form" data-action="${e}" data-product="${t}">\n                        <div class="form-group">\n                            <label for="contact-name" class="form-label">Name *</label>\n                            <input type="text" id="contact-name" name="name" class="form-input" required>\n                        </div>\n                        \n                        <div class="form-group">\n                            <label for="contact-email" class="form-label">Email *</label>\n                            <input type="email" id="contact-email" name="email" class="form-input" required>\n                        </div>\n                        \n                        <div class="form-group">\n                            <label for="contact-subject" class="form-label">Subject</label>\n                            <input type="text" id="contact-subject" name="subject" class="form-input" \n                                   value="${n}${i?` - ${i}`:""}">\n                        </div>\n                        \n                        <div class="form-group">\n                            <label for="contact-message" class="form-label">Message *</label>\n                            <textarea id="contact-message" name="message" class="form-textarea" \n                                      rows="5" required placeholder="Please provide details about your inquiry..."></textarea>\n                        </div>\n                        \n                        <button type="submit" class="form-submit">\n                            Send ${n}\n                        </button>\n                    </form>\n                </div>\n            </div>\n        `}setupModalEventListeners(e){const t=e.querySelector(".modal-close"),i=()=>this.closeModal();t.addEventListener("click",i),this.eventListeners.set(t,i);const n=t=>{t.target===e&&this.closeModal()};e.addEventListener("click",n),this.eventListeners.set(e,n);const a=e.querySelector(".contact-form"),s=e=>this.handleFormSubmission(e);a.addEventListener("submit",s),this.eventListeners.set(a,s)}async handleFormSubmission(e){if(e.preventDefault(),this.formSubmissionInProgress)return;const t=e.target,i=t.querySelector(".form-submit"),n=new FormData(t),a=t.dataset.action,s=t.dataset.product;this.formSubmissionInProgress=!0,i.disabled=!0;const r=i.textContent;i.innerHTML='Sending... <span class="loader-dots"><span>.</span><span>.</span><span>.</span></span>';try{const e=new FormData;e.append(this.formConfig.formFields.name,n.get("name")),e.append(this.formConfig.formFields.email,n.get("email")),e.append(this.formConfig.formFields.subject,n.get("subject")),e.append(this.formConfig.formFields.message,n.get("message")),e.append(this.formConfig.formFields.product,`${a}:${s}`),this.formConfig.isConfigured?await fetch(this.formConfig.googleFormUrl,{method:"POST",body:e,mode:"no-cors"}):await new Promise(e=>setTimeout(e,1500)),this.showSuccessMessage(a)}catch(o){this.showErrorMessage()}finally{this.formSubmissionInProgress=!1,i.disabled=!1,i.textContent=r}}showSuccessMessage(e){const t=this.activeModal.querySelector(".modal-content"),i=`\n            <div class="success-message">\n                <h3>Thank You!</h3>\n                <p><strong>${{quote:"Your quote request has been submitted successfully!",info:"Your information request has been submitted successfully!",demo:"Your demo request has been submitted successfully!",contact:"Your message has been sent successfully!"}[e]||"Your message has been sent successfully!"}</strong></p>\n                <p>We'll get back to you within 24 hours.</p>\n                <div class="success-actions">\n                    <button type="button" class="contact-button primary" onclick="window.contactManager.closeModal()">\n                        Close\n                    </button>\n                </div>\n            </div>\n        `;t.style.opacity="0",t.style.transition="opacity 0.3s ease",setTimeout(()=>{t.innerHTML=i,t.style.opacity="1"},300)}showErrorMessage(){const e=this.activeModal,t=e.querySelector(".contact-form");let i=e.querySelector(".error-message");i||(i=document.createElement("div"),i.className="error-message",t.parentNode.insertBefore(i,t)),i.innerHTML="\n            <p><strong>Submission Error</strong></p>\n            <p>There was an error sending your message. Please try again or contact us directly.</p>\n        ",i.style.opacity="0",i.style.transform="translateY(-10px)",i.style.transition="all 0.3s ease",requestAnimationFrame(()=>{i.style.opacity="1",i.style.transform="translateY(0)"}),setTimeout(()=>{i.style.opacity="0",setTimeout(()=>i.remove(),300)},5e3)}closeModal(){if(!this.activeModal)return;const e=this.activeModal;e.classList.remove("active"),setTimeout(()=>{this.cleanupModalEventListeners(e);document.getElementById("contact-modal-container").innerHTML="",document.body.style.overflow="",this.activeModal=null},300)}cleanupModalEventListeners(e){[e.querySelector(".modal-close"),e,e.querySelector(".contact-form")].filter(Boolean).forEach(e=>{const t=this.eventListeners.get(e);t&&(e.removeEventListener("click",t),e.removeEventListener("submit",t),this.eventListeners.delete(e))})}handleThemeChange(e){this.activeModal}isModalOpen(){return!!this.activeModal}openQuoteModal(e,t){this.openContactModal("quote",e,t)}openInfoModal(e,t){this.openContactModal("info",e,t)}openDemoModal(e,t){this.openContactModal("demo",e,t)}cleanup(){this.activeModal&&this.closeModal(),this.eventListeners.forEach((e,t)=>{t&&t.removeEventListener&&(t.removeEventListener("click",e),t.removeEventListener("submit",e))}),this.eventListeners.clear(),window.removeEventListener("productContactClick",this.handleProductContactClick),window.removeEventListener("themeChanged",this.handleThemeChange),document.removeEventListener("keydown",this.handleEscapeKey);const e=document.getElementById("contact-modal-container");e&&e.remove(),this.isInitialized=!1}static isSupported(){return!(!window.FormData||!window.fetch)}}class Ua{constructor(){this.currentPage=null,this.previousPage=null,this.currentSection=null,this.previousSection=null,this.assetLoadingState=new Map,this.navigationHistory=[],this.pageAssetRequirements=new Map,this.sectionNavigationHistory=[],this.initializeNavigation()}initializeNavigation(){if(this.currentPage=this.getCurrentPageInfo(),this.currentSection=this.getCurrentSectionInfo(),document.referrer)try{const e=new URL(document.referrer);e.origin===window.location.origin&&(this.previousPage=this.getPageInfoFromUrl(e))}catch(e){}this.setupAssetRequirements(),this.trackNavigation(this.previousPage,this.currentPage),this.setupNavigationListeners()}getCurrentPageInfo(){const e=window.location.pathname;return{path:e,type:this.determinePageType(e),timestamp:Date.now(),title:document.title,bodyClasses:Array.from(document.body.classList)}}getPageInfoFromUrl(e){const t=e.pathname;return{path:t,type:this.determinePageType(t),timestamp:Date.now(),title:null,bodyClasses:[]}}determinePageType(e){return"/"===e||"/index.html"===e?"homepage":e.includes("products")?"products":e.includes("blog")?"blog":e.includes("innovation")?"innovation":"other"}setupAssetRequirements(){this.pageAssetRequirements.set("homepage",["logo","hero-images","3d-models","team-data","journey-data"]),this.pageAssetRequirements.set("products",["logo","product-images","product-data"]),this.pageAssetRequirements.set("blog",["logo","blog-data","article-images"]),this.pageAssetRequirements.set("innovation",["logo","innovation-images"]),this.pageAssetRequirements.set("other",["logo"])}trackNavigation(e,t){const i={from:e,to:t,method:this.detectNavigationMethod(e,t),timestamp:Date.now()};this.navigationHistory.push(i),this.navigationHistory.length>10&&this.navigationHistory.shift()}detectNavigationMethod(e,t){if(!e||!e.path)return"direct";if(this.navigationHistory.slice(-5).find(e=>e.to&&e.to.path===t.path))return"back";return this.navigationHistory.slice(-5).find(e=>e.from&&e.from.path===t.path)?"forward":"link"}getCurrentSectionInfo(){const e=window.location.hash,t=e?e.substring(1):null;return{id:t,detected:this.detectCurrentSection(t),timestamp:Date.now(),scrollPosition:window.scrollY}}detectCurrentSection(e){if(e)return this.normalizeSectionName(e);const t=["hero","about-us","our-journey","products","our-team","contact"];for(const i of t){const e=document.getElementById(i)||document.querySelector(`[data-section="${i}"]`)||document.querySelector(`.${i}-section`);if(e&&this.isElementInViewport(e))return i}return"hero"}normalizeSectionName(e){return{"homepage-hero":"hero",hero:"hero","about-us":"about",about:"about","our-journey":"journey",journey:"journey",products:"products","our-team":"team",team:"team",contact:"contact"}[e]||e}isElementInViewport(e){if(!e)return!1;const t=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,n=Math.min(t.bottom,i)-Math.max(t.top,0),a=t.bottom-t.top;return n>0&&n/a>=.3}trackSectionNavigation(e,t){if(!e||!t)return;const i={from:e,to:t,method:this.detectSectionNavigationMethod(e,t),timestamp:Date.now(),isIntraPage:!0};this.sectionNavigationHistory.push(i),this.sectionNavigationHistory.length>20&&this.sectionNavigationHistory.shift()}detectSectionNavigationMethod(e,t){return t.id&&e.id!==t.id?"hash-link":Math.abs(t.scrollPosition-e.scrollPosition)>100?"scroll":"unknown"}setupNavigationListeners(){let e;document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&this.handlePageVisible()}),window.addEventListener("beforeunload",()=>{this.handlePageUnload()}),window.addEventListener("popstate",e=>{this.handlePopState(e)}),window.addEventListener("hashchange",e=>{this.handleHashChange(e)}),window.addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(()=>{this.handleScroll()},150)})}handlePageVisible(){this.currentPage&&(this.currentPage.timestamp=Date.now())}handlePageUnload(){try{sessionStorage.setItem("navigationState",JSON.stringify({currentPage:this.currentPage,timestamp:Date.now()}))}catch(e){}}handlePopState(e){const t=this.getCurrentPageInfo();this.trackNavigation(this.currentPage,t),this.previousPage=this.currentPage,this.currentPage=t}handleHashChange(e){const t=this.getCurrentSectionInfo();this.currentSection&&this.trackSectionNavigation(this.currentSection,t),this.previousSection=this.currentSection,this.currentSection=t}handleScroll(){const e=this.getCurrentSectionInfo();this.currentSection&&e.detected!==this.currentSection.detected&&(this.trackSectionNavigation(this.currentSection,e),this.previousSection=this.currentSection,this.currentSection=e)}isIntraPageNavigation(){if(this.sectionNavigationHistory.length>0){const e=this.sectionNavigationHistory[this.sectionNavigationHistory.length-1];if(Date.now()-e.timestamp<2e3)return!0}const e=window.location.hash;if(e&&"homepage"===this.currentPage.type){const t=this.normalizeSectionName(e.substring(1));if(["hero","about","journey","products","team","contact"].includes(t))return!0}if("homepage"===this.currentPage.type&&this.previousSection)return!0;const t=this.navigationHistory[this.navigationHistory.length-1];return!!(t&&t.from&&t.to&&t.from.path===t.to.path&&"homepage"===t.to.type)}shouldSkipLoader(){const e=this.getNavigationContext();return"homepage"!==this.currentPage.type||(!!this.isIntraPageNavigation()||"direct"!==e.navigationMethod&&(("link"===e.navigationMethod||"back"===e.navigationMethod)&&this.areRequiredAssetsCached()))}getNavigationContext(){const e=this.navigationHistory[this.navigationHistory.length-1];return{currentPage:this.currentPage,previousPage:this.previousPage,navigationMethod:e?e.method:"direct",assetsRequired:this.getRequiredAssets(),cacheStatus:this.getAssetCacheStatus(),shouldShowLoader:null}}getRequiredAssets(){return this.pageAssetRequirements.get(this.currentPage.type)||["logo"]}areRequiredAssetsCached(){this.getRequiredAssets();const e=this.navigationHistory.slice(-5).find(e=>e.to&&e.to.type===this.currentPage.type);if(e){return Date.now()-e.timestamp<3e5}return!1}getAssetCacheStatus(){const e=this.getRequiredAssets(),t={};return e.forEach(e=>{t[e]=this.assetLoadingState.get(e)||"unknown"}),t}updateAssetState(e,t){this.assetLoadingState.set(e,t)}preservePageContext(e={}){const t={...e,navigationState:this.getNavigationContext(),timestamp:Date.now()};try{sessionStorage.setItem("preservedPageContext",JSON.stringify(t))}catch(i){}}getPreservedContext(){try{const e=sessionStorage.getItem("preservedPageContext");return e?JSON.parse(e):null}catch(e){return null}}getNavigationStats(){const e={},t={};return this.navigationHistory.forEach(i=>{i.to&&i.to.type&&(e[i.to.type]=(e[i.to.type]||0)+1),t[i.method]=(t[i.method]||0)+1}),{totalNavigations:this.navigationHistory.length,currentPage:this.currentPage,previousPage:this.previousPage,pageTypeStats:e,methodStats:t,assetStates:Object.fromEntries(this.assetLoadingState)}}reset(){this.currentPage=null,this.previousPage=null,this.assetLoadingState.clear(),this.navigationHistory=[];try{sessionStorage.removeItem("navigationState"),sessionStorage.removeItem("preservedPageContext")}catch(e){}}}class Ga{constructor(e={}){this.assetLoadingManager=e.assetLoadingManager,this.cacheManager=e.cacheManager,this.performanceManager=e.performanceManager,this.networkCondition={effectiveType:"unknown",downlink:0,rtt:0,saveData:!1,lastChecked:Date.now()},this.strategies={"slow-2g":{name:"minimal",imageQuality:"low",preloadDistance:0,videosEnabled:!1,animationsEnabled:!1,maxConcurrentRequests:2,prioritizeText:!0,lazyLoadThreshold:.5,timeout:1e4},"2g":{name:"reduced",imageQuality:"low",preloadDistance:100,videosEnabled:!1,animationsEnabled:!1,maxConcurrentRequests:4,prioritizeText:!0,lazyLoadThreshold:.3,timeout:8e3},"3g":{name:"balanced",imageQuality:"medium",preloadDistance:200,videosEnabled:!0,animationsEnabled:!0,maxConcurrentRequests:6,prioritizeText:!0,lazyLoadThreshold:.2,timeout:5e3},"4g":{name:"full",imageQuality:"high",preloadDistance:300,videosEnabled:!0,animationsEnabled:!0,maxConcurrentRequests:10,prioritizeText:!1,lazyLoadThreshold:.1,timeout:3e3}},this.activeStrategy=this.strategies["3g"],this.deviceCapabilities={memory:navigator.deviceMemory||4,cpuCores:navigator.hardwareConcurrency||4,isLowEndDevice:!1,isHighEndDevice:!1},this.detectDeviceCapabilities(),this.metrics={strategySwitches:0,adaptiveModeActive:!1,currentStrategy:"balanced",lowQualityAssetsServed:0,savedBandwidth:0,lastStrategyChange:null},this.initNetworkMonitoring()}initNetworkMonitoring(){if("connection"in navigator){const e=navigator.connection;this.updateNetworkCondition(e),e.addEventListener("change",()=>{this.updateNetworkCondition(e)})}else this.initFallbackNetworkDetection();window.addEventListener("online",()=>{this.handleOnlineStatus(!0)}),window.addEventListener("offline",()=>{this.handleOnlineStatus(!1)})}updateNetworkCondition(e){const t=this.networkCondition.effectiveType;this.networkCondition={effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData,lastChecked:Date.now()},t!==e.effectiveType&&(this.adaptToNetworkCondition(),this.metrics.strategySwitches++,this.metrics.lastStrategyChange=Date.now()),window.dispatchEvent(new CustomEvent("networkConditionChange",{detail:this.networkCondition}))}initFallbackNetworkDetection(){setInterval(()=>{this.checkNetworkSpeedWithResourceTiming()},3e4),this.checkNetworkSpeedWithResourceTiming()}checkNetworkSpeedWithResourceTiming(){const e=performance.getEntriesByType("resource");if(0===e.length)return;const t=e.filter(e=>e.transferSize>0&&e.duration>0).slice(-5);if(0===t.length)return;const i=8*t.reduce((e,t)=>e+t.transferSize,0)/(1e3*t.reduce((e,t)=>e+t.duration,0));let n;n=i<.1?"slow-2g":i<.5?"2g":i<2?"3g":"4g",n!==this.networkCondition.effectiveType&&(this.networkCondition={effectiveType:n,downlink:i,rtt:this.estimateRTT(t),saveData:!1,lastChecked:Date.now()},this.adaptToNetworkCondition(),this.metrics.strategySwitches++,this.metrics.lastStrategyChange=Date.now(),window.dispatchEvent(new CustomEvent("networkConditionChange",{detail:this.networkCondition})))}estimateRTT(e){const t=e.filter(e=>e.connectEnd>0&&e.connectStart>0).map(e=>e.connectEnd-e.connectStart);return 0===t.length?100:t.reduce((e,t)=>e+t,0)/t.length}detectDeviceCapabilities(){this.deviceCapabilities.memory<=2?this.deviceCapabilities.isLowEndDevice=!0:this.deviceCapabilities.memory>=8&&(this.deviceCapabilities.isHighEndDevice=!0),this.deviceCapabilities.cpuCores<=2?this.deviceCapabilities.isLowEndDevice=!0:this.deviceCapabilities.cpuCores>=8&&(this.deviceCapabilities.isHighEndDevice=!0),"getBattery"in navigator&&navigator.getBattery().then(e=>{e.level<.2&&!e.charging&&(this.deviceCapabilities.isLowEndDevice=!0,this.deviceCapabilities.isHighEndDevice=!1)})}adaptToNetworkCondition(){const e=this.networkCondition.effectiveType,t=this.strategies[e]||this.strategies["3g"];this.deviceCapabilities.isLowEndDevice?(t.imageQuality=this.downgradeQuality(t.imageQuality),t.maxConcurrentRequests=Math.max(2,t.maxConcurrentRequests-2),t.preloadDistance=Math.max(0,t.preloadDistance-100)):this.deviceCapabilities.isHighEndDevice&&"4g"===e&&(t.imageQuality="high",t.preloadDistance=400,t.maxConcurrentRequests=12),this.networkCondition.saveData&&(t.imageQuality="low",t.videosEnabled=!1,t.preloadDistance=Math.max(0,t.preloadDistance-100)),this.activeStrategy=t,this.metrics.adaptiveModeActive=!0,this.metrics.currentStrategy=t.name,this.applyAdaptiveStrategy(t),window.dispatchEvent(new CustomEvent("adaptiveStrategyChange",{detail:{strategy:t.name,networkType:e,imageQuality:t.imageQuality}}))}applyAdaptiveStrategy(e){this.adjustImageQuality(e.imageQuality),this.configureVideoPlayback(e.videosEnabled),this.configureAnimations(e.animationsEnabled),this.updateLazyLoadingThresholds(e.lazyLoadThreshold),this.assetLoadingManager,this.updateRequestTimeouts(e.timeout),this.updatePreloadDistance(e.preloadDistance)}adjustImageQuality(e){document.querySelectorAll("img[data-src-low], img[data-src-medium], img[data-src-high]").forEach(t=>{const i=t.src;let n;switch(e){case"low":n=t.dataset.srcLow||t.dataset.srcMedium||t.dataset.srcHigh||t.src;break;case"medium":n=t.dataset.srcMedium||t.dataset.srcHigh||t.dataset.srcLow||t.src;break;case"high":n=t.dataset.srcHigh||t.dataset.srcMedium||t.dataset.srcLow||t.src;break;default:n=t.src}if(n&&n!==i&&(t.src=n,"low"===e&&(this.metrics.lowQualityAssetsServed++,t.dataset.srcHigh))){const e=this.estimateImageSize(t,"high"),i=this.estimateImageSize(t,"low");this.metrics.savedBandwidth+=e-i}})}configureVideoPlayback(e){document.querySelectorAll("video").forEach(t=>{if(e){"true"===t.dataset.autoplay&&(t.autoplay=!0);const e=t.nextElementSibling?.classList.contains("video-play-button")?t.nextElementSibling:null;e&&e.remove()}else if(t.autoplay=!1,t.paused||t.pause(),t.dataset.poster&&!t.poster&&(t.poster=t.dataset.poster),!t.nextElementSibling?.classList.contains("video-play-button")){const e=document.createElement("button");e.className="video-play-button",e.innerHTML="▶",e.setAttribute("aria-label","Play video"),e.style.cssText="\n                        position: absolute;\n                        top: 50%;\n                        left: 50%;\n                        transform: translate(-50%, -50%);\n                        background: rgba(0,0,0,0.6);\n                        color: white;\n                        border: none;\n                        border-radius: 50%;\n                        width: 60px;\n                        height: 60px;\n                        font-size: 24px;\n                        cursor: pointer;\n                        z-index: 2;\n                    ",e.addEventListener("click",()=>{t.play(),e.style.display="none"});const i=t.parentElement;i&&(i.style.position="relative",i.appendChild(e))}})}configureAnimations(e){e?document.body.classList.remove("reduce-motion"):document.body.classList.add("reduce-motion"),e?window.dispatchEvent(new CustomEvent("reduceAnimations",{detail:{enabled:!0}})):window.dispatchEvent(new CustomEvent("reduceAnimations",{detail:{enabled:!1}}))}updateLazyLoadingThresholds(e){window.dispatchEvent(new CustomEvent("lazyLoadThresholdChange",{detail:{threshold:e}}))}updateRequestTimeouts(e){this.requestTimeout=e,window.dispatchEvent(new CustomEvent("requestTimeoutChange",{detail:{timeout:e}}))}updatePreloadDistance(e){this.preloadDistance=e,window.dispatchEvent(new CustomEvent("preloadDistanceChange",{detail:{distance:e}}))}handleOnlineStatus(e){e?("connection"in navigator?this.updateNetworkCondition(navigator.connection):this.checkNetworkSpeedWithResourceTiming(),this.hideOfflineNotification()):(this.activeStrategy=this.strategies["slow-2g"],this.applyAdaptiveStrategy(this.activeStrategy),this.showOfflineNotification())}showOfflineNotification(){}hideOfflineNotification(){const e=document.getElementById("offline-notification");e&&e.remove()}downgradeQuality(e){return"high"===e?"medium":"low"}estimateImageSize(e,t){const i=(e.naturalWidth||e.width||300)*(e.naturalHeight||e.height||200);let n;switch(t){case"high":n=.5;break;case"medium":default:n=.25;break;case"low":n=.1}return i*n}getMetrics(){return{...this.metrics,networkCondition:this.networkCondition,activeStrategy:this.activeStrategy.name,deviceCapabilities:this.deviceCapabilities,savedBandwidthMB:(this.metrics.savedBandwidth/1048576).toFixed(2)}}setQualityPreference(e){if(["low","medium","high","auto"].includes(e)){if("auto"===e)this.adaptToNetworkCondition();else{const t={...this.activeStrategy};t.imageQuality=e,this.applyAdaptiveStrategy(t)}return!0}return!1}cleanup(){"connection"in navigator&&navigator.connection.removeEventListener&&navigator.connection.removeEventListener("change",this.updateNetworkCondition),window.removeEventListener("online",this.handleOnlineStatus),window.removeEventListener("offline",this.handleOnlineStatus)}}const Va=new class{constructor(){this.isInitialized=!1,this.preloadedPages=new Set,this.navigationQueue=[],this.isPreloading=!1,this.navigationPatterns={commonPaths:new Map,userBehavior:{averageTimeOnPage:0,mostVisitedPages:new Map,navigationSequences:[]}},this.init()}init(){this.isInitialized||(this.setupNavigationListeners(),this.preloadCriticalAssets(),this.setupLinkPreloading(),this.isInitialized=!0)}setupNavigationListeners(){document.addEventListener("click",e=>{if(e.target&&"function"==typeof e.target.closest){const t=e.target.closest("a[href]");t&&this.isInternalLink(t.href)&&this.handleLinkClick(t,e)}}),document.addEventListener("mouseenter",e=>{const t=e.target.closest("a[href]");t&&this.isInternalLink(t.href)&&this.preloadPageAssets(t.href)},!0),document.addEventListener("touchstart",e=>{const t=e.target.closest("a[href]");t&&this.isInternalLink(t.href)&&this.preloadPageAssets(t.href)},!0),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&this.handlePageVisible()})}isInternalLink(e){try{return new URL(e,window.location.origin).origin===window.location.origin}catch(t){return!1}}handleLinkClick(e,t){const i=e.href;this.getPageTypeFromUrl(i);this.trackNavigation(window.location.pathname,i),this.preloadedPages.has(i)||this.preloadPageAssets(i,{priority:"urgent"})}async preloadPageAssets(e,t={}){if(this.preloadedPages.has(e))return;const i=this.getPageTypeFromUrl(e),n=this.getAssetsForPageType(i);if(0!==n.length)try{const i=n.map(e=>this.preloadSingleAsset(e,t));if("urgent"===t.priority){const e=n.filter(e=>"critical"===e.priority);await Promise.allSettled(e.map(e=>this.preloadSingleAsset(e,t)))}else Promise.allSettled(i).then(e=>{e.filter(e=>"fulfilled"===e.status).length});this.preloadedPages.add(e)}catch(a){}}async preloadSingleAsset(e,t={}){if(S.has(e.key||e.url))return S.get(e.key||e.url);try{const i=await this.loadAsset(e.url,e.type,t);return S.set(e.key||e.url,i,{type:e.type,priority:e.priority||"normal",persistent:"critical"===e.priority}),i}catch(i){throw i}}async loadAsset(e,t,i={}){const n="urgent"===i.priority?2e3:5e3;return new Promise((i,a)=>{const s=setTimeout(()=>{a(new Error(`Timeout loading ${t}: ${e}`))},n);if("image"===t){const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{clearTimeout(s),i({type:"image",element:t,url:e,width:t.width,height:t.height})},t.onerror=()=>{clearTimeout(s),a(new Error(`Failed to load image: ${e}`))},t.src=e}else if("css"===t){const t=document.createElement("link");t.rel="preload",t.as="style",t.href=e,t.onload=()=>{clearTimeout(s),i({type:"css",element:t,url:e})},t.onerror=()=>{clearTimeout(s),a(new Error(`Failed to load CSS: ${e}`))},document.head.appendChild(t)}else fetch(e,{cache:"default"}).then(e=>{if(clearTimeout(s),!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e.blob()}).then(n=>{i({type:t,url:e,blob:n,size:n.size})}).catch(e=>{clearTimeout(s),a(e)})})}getPageTypeFromUrl(e){try{const t=new URL(e).pathname;return"/"===t||"/index.html"===t?"homepage":t.includes("products")?"products":t.includes("blog")?"blog":t.includes("innovation")?"innovation":"other"}catch(t){return"other"}}getAssetsForPageType(e){const t={homepage:[{key:"logo-main",url:"/assets/images/logo.png",type:"image",priority:"critical"},{key:"logo-small",url:"/assets/images/logo-small_size.png",type:"image",priority:"critical"},{key:"hero-ceo",url:"/assets/images/team/dr-goutam-kulsi.webp",type:"image",priority:"high"},{key:"hero-advisor",url:"/assets/images/team/prof-amitava-das.webp",type:"image",priority:"high"},{key:"team-data",url:"/team.jsonl",type:"data",priority:"normal"},{key:"journey-data",url:"/journey.jsonl",type:"data",priority:"normal"}],products:[{key:"logo-main",url:"/assets/images/logo.png",type:"image",priority:"critical"},{key:"product-domestic-kit",url:"/assets/images/products/Domestic_oil_spill_kit_1.webp",type:"image",priority:"high"},{key:"product-marine-kit",url:"/assets/images/products/Marine_oil_spill_kit.webp",type:"image",priority:"high"},{key:"product-nano-cellulose",url:"/assets/images/products/Nano_cellulose_1.webp",type:"image",priority:"normal"}],blog:[{key:"logo-main",url:"/assets/images/logo.png",type:"image",priority:"critical"},{key:"blog-data",url:"/blog.jsonl",type:"data",priority:"high"}],innovation:[{key:"logo-main",url:"/assets/images/logo.png",type:"image",priority:"critical"}],other:[{key:"logo-main",url:"/assets/images/logo.png",type:"image",priority:"critical"}]};return t[e]||t.other}async preloadCriticalAssets(){await S.preloadCriticalAssets();const e=this.getPageTypeFromUrl(window.location.href),t=this.getAssetsForPageType(e).filter(e=>"critical"===e.priority);for(const n of t)try{await this.preloadSingleAsset(n,{priority:"critical"})}catch(i){}this.preloadLikelyNextPages()}preloadLikelyNextPages(){const e=this.getPageTypeFromUrl(window.location.href);this.getLikelyNextPages(e).forEach(e=>{const t=this.getAssetsForPageType(e).filter(e=>"critical"===e.priority||"high"===e.priority);setTimeout(()=>{t.forEach(e=>{this.preloadSingleAsset(e,{priority:"background"}).catch(e=>{})})},2e3)})}getLikelyNextPages(e){return{homepage:["products","blog"],products:["homepage"],blog:["homepage"],innovation:["homepage","products"],other:["homepage"]}[e]||["homepage"]}setupLinkPreloading(){if(!("IntersectionObserver"in window))return;const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const i=t.target;i.href&&this.isInternalLink(i.href)&&(this.preloadPageAssets(i.href,{priority:"background"}),e.unobserve(i))}})},{rootMargin:"100px"});document.querySelectorAll("a[href]").forEach(t=>{this.isInternalLink(t.href)&&e.observe(t)})}trackNavigation(e,t){const i=`${e} -> ${t}`,n=this.navigationPatterns.commonPaths.get(i)||0;this.navigationPatterns.commonPaths.set(i,n+1);const a=this.navigationPatterns.userBehavior.mostVisitedPages.get(t)||0;this.navigationPatterns.userBehavior.mostVisitedPages.set(t,a+1)}handlePageVisible(){this.isPreloading||(this.isPreloading=!0,setTimeout(()=>{this.preloadLikelyNextPages(),this.isPreloading=!1},1e3))}getStats(){return{preloadedPages:this.preloadedPages.size,navigationPatterns:{commonPaths:Array.from(this.navigationPatterns.commonPaths.entries()).sort((e,t)=>t[1]-e[1]).slice(0,10),mostVisitedPages:Array.from(this.navigationPatterns.userBehavior.mostVisitedPages.entries()).sort((e,t)=>t[1]-e[1]).slice(0,5)},globalCacheStats:S.getStats()}}clearPreloadCache(){this.preloadedPages.clear()}};class Qa{constructor(){this.cursor=null,this.cursorTrail=[],this.trailLength=8,this.mouseX=0,this.mouseY=0,this.isHovering=!1,this.isMobile=window.innerWidth<=768,this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.updateCursor=this.updateCursor.bind(this),this.updateTrail=this.updateTrail.bind(this),this.init()}init(){this.isMobile||window.matchMedia("(prefers-reduced-motion: reduce)").matches||(this.createCursor(),this.createTrail(),this.setupEventListeners(),this.startAnimation())}createCursor(){this.cursor=document.createElement("div"),this.cursor.className="custom-cursor",document.body.appendChild(this.cursor)}createTrail(){for(let e=0;e<this.trailLength;e++){const t=document.createElement("div");t.className="cursor-trail",t.style.opacity=.6*(1-e/this.trailLength),t.style.transform=`scale(${1-e/this.trailLength})`,document.body.appendChild(t),this.cursorTrail.push({element:t,x:0,y:0,targetX:0,targetY:0})}}setupEventListeners(){document.addEventListener("mousemove",this.handleMouseMove);document.querySelectorAll('\n            a, button, .focus-item, .featured-product, .cta-button,\n            .card-style, .product-card, .article-card, .contact-button,\n            input, textarea, select, [role="button"], [tabindex="0"]\n        ').forEach(e=>{e.addEventListener("mouseenter",this.handleMouseEnter),e.addEventListener("mouseleave",this.handleMouseLeave)});new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{if(1===e.nodeType){e.querySelectorAll('\n                            a, button, .focus-item, .featured-product, .cta-button,\n                            .card-style, .product-card, .article-card, .contact-button,\n                            input, textarea, select, [role="button"], [tabindex="0"]\n                        ').forEach(e=>{e.addEventListener("mouseenter",this.handleMouseEnter),e.addEventListener("mouseleave",this.handleMouseLeave)})}})})}).observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<=768,this.isMobile&&this.destroy()}),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseAnimation():this.resumeAnimation()})}handleMouseMove(e){this.mouseX=e.clientX,this.mouseY=e.clientY}handleMouseEnter(e){this.isHovering=!0,this.cursor&&this.cursor.classList.add("hover");const t=e.target;(t.classList.contains("focus-item")||t.classList.contains("featured-product"))&&this.addRippleEffect(e)}handleMouseLeave(){this.isHovering=!1,this.cursor&&this.cursor.classList.remove("hover")}addRippleEffect(e){const t=e.currentTarget,i=t.getBoundingClientRect(),n=document.createElement("div");n.style.cssText="\n            position: absolute;\n            border-radius: 50%;\n            background: rgba(var(--color-accent-rgb-values), 0.1);\n            transform: scale(0);\n            animation: ripple 0.6s linear;\n            pointer-events: none;\n            z-index: 1;\n        ";const a=Math.max(i.width,i.height);n.style.width=n.style.height=a+"px",n.style.left=e.clientX-i.left-a/2+"px",n.style.top=e.clientY-i.top-a/2+"px",t.style.position="relative",t.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},600)}updateCursor(){this.cursor&&(this.cursor.style.left=this.mouseX+"px",this.cursor.style.top=this.mouseY+"px")}updateTrail(){this.cursorTrail.forEach((e,t)=>{0===t?(e.targetX=this.mouseX,e.targetY=this.mouseY):(e.targetX=this.cursorTrail[t-1].x,e.targetY=this.cursorTrail[t-1].y);const i=.2-.02*t;e.x+=(e.targetX-e.x)*i,e.y+=(e.targetY-e.y)*i,e.element.style.left=e.x+"px",e.element.style.top=e.y+"px"})}startAnimation(){this.animationId=requestAnimationFrame(()=>{this.updateCursor(),this.updateTrail(),this.startAnimation()})}pauseAnimation(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}resumeAnimation(){this.animationId||this.isMobile||this.startAnimation()}destroy(){this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.cursorTrail.forEach(e=>{e.element&&e.element.parentNode&&e.element.parentNode.removeChild(e.element)}),this.cursorTrail=[],document.removeEventListener("mousemove",this.handleMouseMove),this.pauseAnimation(),document.body.style.cursor="auto"}enable(){this.isMobile||this.cursor||this.init()}disable(){this.destroy()}setHoverState(e){this.isHovering=e,this.cursor&&(e?this.cursor.classList.add("hover"):this.cursor.classList.remove("hover"))}}if(!document.querySelector("#ripple-animation-css")){const e=document.createElement("style");e.id="ripple-animation-css",e.textContent="\n@keyframes ripple {\n    to {\n        transform: scale(4);\n        opacity: 0;\n    }\n}\n",document.head.appendChild(e)}class Ja{constructor(){this.isInitialized=!1,this.animationObserver=null,this.productCards=[],this.statsAnimated=!1,this.handleLearnMoreClick=this.handleLearnMoreClick.bind(this),this.handleProductCardHover=this.handleProductCardHover.bind(this),this.animateStats=this.animateStats.bind(this),this.handleIntersection=this.handleIntersection.bind(this)}init(){if(!this.isInitialized)try{this.setupElements(),this.setupEventListeners(),this.setupIntersectionObserver(),this.setupAnimations(),this.isInitialized=!0}catch(e){}}setupElements(){this.productCards=document.querySelectorAll(".product-card-modern:not(.product-card-cta)"),this.ctaCard=document.querySelector(".product-card-cta"),this.statsSection=document.querySelector(".products-stats"),this.heroCircle=document.querySelector(".product-hero-circle"),this.featureBadges=document.querySelectorAll(".feature-badge")}setupEventListeners(){document.querySelectorAll(".learn-more").forEach((e,t)=>{e.addEventListener("click",e=>this.handleLearnMoreClick(e,t)),e.style.cursor="pointer"}),this.productCards.forEach((e,t)=>{e.addEventListener("mouseenter",e=>this.handleProductCardHover(e,t,"enter")),e.addEventListener("mouseleave",e=>this.handleProductCardHover(e,t,"leave"))}),this.featureBadges.forEach((e,t)=>{e.addEventListener("click",e=>this.handleFeatureBadgeClick(e,t)),e.style.cursor="pointer"}),this.heroCircle&&(this.heroCircle.addEventListener("click",this.handleHeroCircleClick.bind(this)),this.heroCircle.style.cursor="pointer")}setupIntersectionObserver(){this.animationObserver=new IntersectionObserver(this.handleIntersection,{threshold:.2,rootMargin:"0px 0px -50px 0px"});[...this.productCards,this.statsSection,document.querySelector(".product-hero-banner"),document.querySelector(".products-showcase")].filter(Boolean).forEach(e=>{this.animationObserver.observe(e)})}setupAnimations(){this.productCards.forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease"}),this.statsSection&&(this.statsSection.style.opacity="0",this.statsSection.style.transform="translateY(20px)",this.statsSection.style.transition="opacity 0.6s ease, transform 0.6s ease")}handleIntersection(e){e.forEach(e=>{if(e.isIntersecting){const t=e.target;if(t.classList.contains("product-card-modern")){const e=Array.from(this.productCards).indexOf(t);setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},150*e)}else t.classList.contains("products-stats")?setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)",this.animateStats()},300):t.classList.contains("product-hero-banner")?this.animateHeroBanner():t.classList.contains("products-showcase")&&this.animateShowcaseTitle();this.animationObserver.unobserve(t)}})}animateHeroBanner(){const e=document.querySelector(".product-hero-banner");document.querySelector(".product-hero-text"),document.querySelector(".product-hero-visual"),e&&(e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.8s ease, transform 0.8s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100)),this.featureBadges.forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateX(-20px)",e.style.transition="opacity 0.5s ease, transform 0.5s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateX(0)"},600+100*t)})}animateShowcaseTitle(){const e=document.querySelector(".showcase-title");e&&(e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200))}animateStats(){if(this.statsAnimated)return;this.statsAnimated=!0;document.querySelectorAll(".stat-number").forEach((e,t)=>{const i=e.textContent;!i.includes("%")&&isNaN(i.charAt(0))||this.animateNumber(e,i,200*t)})}animateNumber(e,t,i){setTimeout(()=>{"100%"===t?this.countUp(e,0,100,1e3,"%"):"2+"===t&&this.countUp(e,0,2,800,"+")},i)}countUp(e,t,i,n,a=""){const s=performance.now(),r=o=>{const c=o-s,l=Math.min(c/n,1),h=1-Math.pow(1-l,3),d=Math.floor(t+(i-t)*h);e.textContent=d+a,l<1&&requestAnimationFrame(r)};requestAnimationFrame(r)}handleLearnMoreClick(e,t){e.preventDefault();const i=this.productCards[t].querySelector("h4").textContent,n=e.target;n.style.transform="translateX(10px)",setTimeout(()=>{n.style.transform="translateX(0)"},200);const a=i.toLowerCase().replace(/\s+/g,"-");window.location.href=`/products.html#${a}`}handleProductCardHover(e,t,i){const n=e.currentTarget,a=n.querySelector(".product-card-image img"),s=n.querySelector(".product-category");"enter"===i?(a&&(a.style.transform="scale(1.1)"),s&&(s.style.transform="translateY(-5px)",s.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.2)"),n.style.boxShadow="\n                0 20px 40px rgba(var(--color-accent-rgb-values), 0.15),\n                0 10px 25px rgba(0, 0, 0, 0.1),\n                0 0 0 1px rgba(var(--color-accent-rgb-values), 0.2)\n            "):"leave"===i&&(a&&(a.style.transform="scale(1)"),s&&(s.style.transform="translateY(0)",s.style.boxShadow=""),n.style.boxShadow="")}handleFeatureBadgeClick(e,t){const i=e.currentTarget,n=i.textContent.trim();i.style.transform="scale(0.95)",setTimeout(()=>{i.style.transform="scale(1)"},150),this.showFeatureInfo(n,i)}handleHeroCircleClick(e){const t=e.currentTarget;t.style.transform="scale(0.95)",setTimeout(()=>{t.style.transform="scale(1)"},200),window.location.href="/products.html"}showFeatureInfo(e,t){const i=document.createElement("div");i.className="feature-tooltip",i.textContent=this.getFeatureDescription(e),Object.assign(i.style,{position:"absolute",background:"var(--color-accent-primary)",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"0.9rem",zIndex:"1000",opacity:"0",transform:"translateY(10px)",transition:"opacity 0.3s ease, transform 0.3s ease",pointerEvents:"none",maxWidth:"200px",textAlign:"center"});const n=t.getBoundingClientRect();i.style.left=`${n.left+n.width/2}px`,i.style.top=`${n.bottom+10}px`,i.style.transform="translateX(-50%) translateY(10px)",document.body.appendChild(i),requestAnimationFrame(()=>{i.style.opacity="1",i.style.transform="translateX(-50%) translateY(0)"}),setTimeout(()=>{i.style.opacity="0",i.style.transform="translateX(-50%) translateY(-10px)",setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300)},2e3)}getFeatureDescription(e){return{"100% Biodegradable":"Completely breaks down naturally without harming the environment","High Performance":"Superior technical properties for demanding applications","Plant-Based":"Derived entirely from renewable plant sources","Kitchen Safe":"Safe for use in food preparation areas","Easy to Use":"Simple application with clear instructions","Non-Toxic":"Completely safe for humans and pets","Marine Grade":"Specially formulated for marine environments","Fast Acting":"Quick response time for effective cleanup"}[e]||"Learn more about this feature"}refresh(){this.isInitialized&&(this.destroy(),this.init())}destroy(){this.animationObserver&&(this.animationObserver.disconnect(),this.animationObserver=null);document.querySelectorAll(".learn-more").forEach(e=>{e.removeEventListener("click",this.handleLearnMoreClick)}),this.productCards.forEach(e=>{e.removeEventListener("mouseenter",this.handleProductCardHover),e.removeEventListener("mouseleave",this.handleProductCardHover)}),this.featureBadges.forEach(e=>{e.removeEventListener("click",this.handleFeatureBadgeClick)}),this.heroCircle&&this.heroCircle.removeEventListener("click",this.handleHeroCircleClick),this.isInitialized=!1}isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}triggerAnimations(){this.statsSection&&this.isInViewport(this.statsSection)&&this.animateStats()}}class Za{constructor(){this.isInitialized=!1,this.teamData=[],this.currentIndex=0,this.animationObserver=null,this.teamCards=[],this.statsAnimated=!1,this.introBannerAnimated=!1,this.teamCardsAnimated=!1,this.valuesAnimated=!1,this.prevBtn=null,this.nextBtn=null,this.dotsContainer=null,this.teamGrid=null,this.handleNavigation=this.handleNavigation.bind(this),this.handleDotClick=this.handleDotClick.bind(this),this.handleIntersection=this.handleIntersection.bind(this),this.animateStats=this.animateStats.bind(this)}async init(){if(!this.isInitialized)try{await this.loadTeamData(),this.setupElements(),this.setupAnimations(),this.renderTeamCards(),this.setupEventListeners(),this.setupIntersectionObserver(),this.isInitialized=!0}catch(e){this.showErrorState()}}async loadTeamData(){try{const e=await fetch("/team.jsonl");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=(await e.text()).trim().split("\n").filter(e=>e.trim()).map(e=>JSON.parse(e));this.teamData=t.filter(e=>"Advisor"!==e.position)}catch(e){this.teamData=this.getFallbackTeamData()}}getFallbackTeamData(){return[{id:"goutam-kulsi",name:"Dr. Goutam Kulsi",position:"Founding Director & CEO",image:"/assets/images/team/goutam-kulsi.jpg",bio:"A visionary scientist and entrepreneur with a Ph.D. from CSIR-IICB, Kolkata, and a postdoctoral fellowship from Seoul National University. He steers our mission to deliver innovative, science-based solutions.",responsibilities:"Leads strategic research, mentors scientific teams, and combines scientific depth with entrepreneurial insight.",contact:""},{id:"soumitra-hazra",name:"Dr. Soumitra Hazra",position:"Scientific Manager",image:"",bio:"An accomplished professional with a Ph.D. from CSIR-IICB, Kolkata, and postdoctoral research at FIBER, Japan. He brings a unique blend of academic rigor and practical industry knowledge.",responsibilities:"Leads scientific initiatives, oversees R&D projects, and contributes to applied science and product development.",contact:""},{id:"rahul-mandal",name:"Mr. Rahul Mandal",position:"Research Assistant",image:"",bio:"Holds a Master of Technology (M.Tech) from MAKAUT. Passionate about scientific research and innovation in the field of chemical and material sciences.",responsibilities:"Assists in key research activities and contributes to the development of our core technologies.",contact:""}]}setupElements(){this.teamGrid=document.getElementById("team-grid-modern"),this.prevBtn=document.querySelector(".team-nav-prev"),this.nextBtn=document.querySelector(".team-nav-next"),this.dotsContainer=document.getElementById("team-nav-dots"),this.statsSection=document.querySelector(".team-stats-inline"),this.valuesSection=document.querySelector(".team-values")}renderTeamCards(){if(!this.teamGrid||!this.teamData.length)return;this.teamGrid.innerHTML="";const e=this.isElementVisible(this.teamGrid,{threshold:.2,rootMargin:"0px 0px -50px 0px"});this.teamData.forEach((t,i)=>{const n=this.createTeamCard(t,i,e);this.teamGrid.appendChild(n)}),this.createNavigationDots(),this.updateNavigationState()}createTeamCard(e,t,i=!1){const n=document.createElement("div");n.className="team-card-modern",n.setAttribute("data-index",t),i||(n.style.opacity="0",n.style.transform="translateY(30px)",n.style.transition="opacity 0.6s ease, transform 0.6s ease");const a=e.image?`<img src="${e.image}" alt="${e.name}" class="team-member-photo-modern" loading="lazy">`:`<div class="photo-placeholder">${this.getInitials(e.name)}</div>`;return n.innerHTML=`\n            <div class="team-member-photo-container">\n                ${a}\n            </div>\n            <div class="team-member-info">\n                <h3>${e.name}</h3>\n                <p class="team-member-position">${e.position}</p>\n                <p class="team-member-bio">${e.bio}</p>\n                <div class="team-member-responsibilities">${e.responsibilities}</div>\n                ${e.contact?`\n                    <div class="team-member-contact">\n                        <a href="mailto:${e.contact}" class="contact-link">\n                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                                <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                            </svg>\n                            Contact\n                        </a>\n                    </div>\n                `:""}\n            </div>\n        `,n.addEventListener("click",i=>this.handleCardClick(i,e,t)),n}getInitials(e){return e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}createNavigationDots(){this.dotsContainer&&(this.dotsContainer.innerHTML="",this.teamData.forEach((e,t)=>{const i=document.createElement("div");i.className="nav-dot "+(t===this.currentIndex?"active":""),i.setAttribute("data-index",t),i.addEventListener("click",()=>this.handleDotClick(t)),this.dotsContainer.appendChild(i)}))}setupEventListeners(){this.prevBtn&&this.prevBtn.addEventListener("click",()=>this.handleNavigation("prev")),this.nextBtn&&this.nextBtn.addEventListener("click",()=>this.handleNavigation("next")),document.addEventListener("keydown",e=>{"ArrowLeft"===e.key?this.handleNavigation("prev"):"ArrowRight"===e.key&&this.handleNavigation("next")}),this.setupTouchNavigation()}setupTouchNavigation(){if(!this.teamGrid)return;let e=0,t=0,i=0,n=0;this.teamGrid.addEventListener("touchstart",i=>{e=i.touches[0].clientX,t=i.touches[0].clientY}),this.teamGrid.addEventListener("touchend",a=>{i=a.changedTouches[0].clientX,n=a.changedTouches[0].clientY;const s=i-e,r=n-t;Math.abs(s)>Math.abs(r)&&Math.abs(s)>50&&(s>0?this.handleNavigation("prev"):this.handleNavigation("next"))})}setupIntersectionObserver(){const e={threshold:.2,rootMargin:"0px 0px -50px 0px"};this.animationObserver=new IntersectionObserver(this.handleIntersection,e);[document.querySelector(".team-intro-banner"),this.teamGrid,this.statsSection,this.valuesSection].filter(Boolean).forEach(t=>{this.isElementVisible(t,e)?this.handleImmediateAnimation(t):this.animationObserver.observe(t)})}isElementVisible(e,t){const i=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;window.innerWidth||document.documentElement.clientWidth;const a=t.threshold||0;t.rootMargin;const s=i.top-0,r=i.bottom+50,o=i.height,c=Math.max(0,s),l=Math.min(n,r);return Math.max(0,l-c)>=o*a}handleImmediateAnimation(e){e.classList.contains("team-intro-banner")&&!this.introBannerAnimated?(this.introBannerAnimated=!0,this.animateIntroBanner()):"team-grid-modern"!==e.id||this.teamCardsAnimated?e.classList.contains("team-stats-inline")&&!this.statsAnimated?(this.statsAnimated=!0,this.animateStats()):e.classList.contains("team-values")&&!this.valuesAnimated&&(this.valuesAnimated=!0,this.animateValues()):(this.teamCardsAnimated=!0,this.animateTeamCards())}setupAnimations(){document.querySelectorAll('.team-card-modern:not([style*="opacity"])').forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease"}),this.valuesSection&&!this.valuesSection.style.opacity&&(this.valuesSection.style.opacity="0",this.valuesSection.style.transform="translateY(20px)",this.valuesSection.style.transition="opacity 0.6s ease, transform 0.6s ease")}handleIntersection(e){e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.classList.contains("team-intro-banner")&&!this.introBannerAnimated?(this.introBannerAnimated=!0,this.animateIntroBanner()):"team-grid-modern"!==t.id||this.teamCardsAnimated?t.classList.contains("team-stats-inline")&&!this.statsAnimated?(this.statsAnimated=!0,this.animateStats()):t.classList.contains("team-values")&&!this.valuesAnimated&&(this.valuesAnimated=!0,this.animateValues()):(this.teamCardsAnimated=!0,this.animateTeamCards()),this.animationObserver.unobserve(t)}})}animateIntroBanner(){const e=document.querySelector(".team-intro-banner"),t=document.querySelectorAll(".inline-stat");e&&(e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.8s ease, transform 0.8s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100)),t.forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.5s ease, transform 0.5s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},600+100*t)})}animateTeamCards(){document.querySelectorAll(".team-card-modern").forEach((e,t)=>{setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},150*t)})}animateStats(){if(this.statsAnimated)return;this.statsAnimated=!0;document.querySelectorAll(".inline-stat .stat-number").forEach((e,t)=>{const i=e.textContent;if(i.includes("+")){const t=parseInt(i);this.countUp(e,0,t,1e3,"+")}})}animateValues(){document.querySelectorAll(".value-item").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100*t)}),this.valuesSection&&setTimeout(()=>{this.valuesSection.style.opacity="1",this.valuesSection.style.transform="translateY(0)"},200)}countUp(e,t,i,n,a=""){const s=performance.now(),r=o=>{const c=o-s,l=Math.min(c/n,1),h=1-Math.pow(1-l,3),d=Math.floor(t+(i-t)*h);e.textContent=d+a,l<1&&requestAnimationFrame(r)};requestAnimationFrame(r)}handleNavigation(e){const t=this.teamData.length;this.currentIndex="prev"===e?(this.currentIndex-1+t)%t:(this.currentIndex+1)%t,this.updateNavigationState(),this.scrollToCard(this.currentIndex)}handleDotClick(e){this.currentIndex=e,this.updateNavigationState(),this.scrollToCard(e)}handleCardClick(e,t,i){if(e.target.closest(".contact-link"))return;const n=e.currentTarget;n.style.transform="translateY(-8px) scale(0.98)",setTimeout(()=>{n.style.transform="translateY(-8px) scale(1.02)"},150),this.showMemberDetails(t)}showMemberDetails(e){const t=document.createElement("div");t.className="member-notification",t.innerHTML=`\n            <div class="notification-content">\n                <h4>${e.name}</h4>\n                <p>${e.position}</p>\n                <button class="close-notification">×</button>\n            </div>\n        `,Object.assign(t.style,{position:"fixed",top:"20px",right:"20px",background:"var(--color-accent-primary)",color:"white",padding:"1rem",borderRadius:"12px",zIndex:"1000",opacity:"0",transform:"translateX(100%)",transition:"opacity 0.3s ease, transform 0.3s ease",maxWidth:"300px",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.2)"}),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateX(0)"});const i=t.querySelector(".close-notification");i.addEventListener("click",()=>{t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)}),setTimeout(()=>{t.parentNode&&i.click()},3e3)}updateNavigationState(){document.querySelectorAll(".nav-dot").forEach((e,t)=>{e.classList.toggle("active",t===this.currentIndex)}),this.prevBtn&&(this.prevBtn.disabled=!1),this.nextBtn&&(this.nextBtn.disabled=!1)}scrollToCard(e){const t=document.querySelector(`[data-index="${e}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}showErrorState(){this.teamGrid&&(this.teamGrid.innerHTML='\n                <div class="team-error-state">\n                    <div class="error-icon">⚠️</div>\n                    <h3>Unable to load team information</h3>\n                    <p>Please try refreshing the page or contact support if the problem persists.</p>\n                    <button class="retry-button" onclick="location.reload()">Retry</button>\n                </div>\n            ')}refresh(){this.isInitialized&&(this.destroy(),this.init())}destroy(){this.animationObserver&&(this.animationObserver.disconnect(),this.animationObserver=null),this.prevBtn&&this.prevBtn.removeEventListener("click",this.handleNavigation),this.nextBtn&&this.nextBtn.removeEventListener("click",this.handleNavigation),document.removeEventListener("keydown",this.handleNavigation),this.isInitialized=!1}getCurrentMember(){return this.teamData[this.currentIndex]}getTotalMembers(){return this.teamData.length}navigateToMember(e){const t=this.teamData.findIndex(t=>t.id===e);-1!==t&&(this.currentIndex=t,this.updateNavigationState(),this.scrollToCard(t))}}class Ka{constructor(){this.isInitialized=!1,this.animationObserver=null,this.advisorCards=[],this.advisorData=[],this.statsAnimated=!1,this.handleCardClick=this.handleCardClick.bind(this),this.handleExpertiseTagClick=this.handleExpertiseTagClick.bind(this),this.animateStats=this.animateStats.bind(this),this.handleIntersection=this.handleIntersection.bind(this)}async init(){if(!this.isInitialized)try{await this.loadAdvisorData(),this.setupElements(),this.renderAdvisorCards(),this.setupEventListeners(),this.setupIntersectionObserver(),this.setupAnimations(),this.isInitialized=!0}catch(e){}}async loadAdvisorData(){try{const e=await fetch("/team.jsonl");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=(await e.text()).trim().split("\n").filter(e=>e.trim()).map(e=>JSON.parse(e));this.advisorData=t.filter(e=>"Advisor"===e.position)}catch(e){this.advisorData=[]}}setupElements(){this.advisorGrid=document.querySelector(".advisors-grid-modern"),this.statsSection=document.querySelector(".advisors-stats-inline"),this.impactSection=document.querySelector(".advisors-impact"),this.introBanner=document.querySelector(".advisors-intro-banner"),this.expertiseTags=document.querySelectorAll(".expertise-tag")}renderAdvisorCards(){this.advisorGrid&&this.advisorData.length&&(this.advisorGrid.innerHTML="",this.advisorData.forEach((e,t)=>{const i=this.createAdvisorCard(e,t);this.advisorGrid.appendChild(i)}),this.advisorCards=document.querySelectorAll(".advisor-card-modern"))}createAdvisorCard(e,t){const i=document.createElement("div");i.className="advisor-card-modern",i.setAttribute("data-index",t);const n=e.image?`<img src="${e.image}" alt="${e.name}" class="advisor-photo" loading="lazy">`:`<span class="advisor-initials">${this.getInitials(e.name)}</span>`;return i.innerHTML=`\n            <div class="advisor-card-header">\n                <div class="advisor-avatar">\n                    ${n}\n                </div>\n                <div class="advisor-badge">\n                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" fill="currentColor"/>\n                    </svg>\n                </div>\n            </div>\n            <div class="advisor-card-content">\n                <h3>${e.name}</h3>\n                <p class="advisor-description">${e.bio}</p>\n            </div>\n        `,i}getInitials(e){return e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}setupEventListeners(){this.advisorCards.forEach((e,t)=>{e.addEventListener("click",e=>this.handleCardClick(e,t)),e.style.cursor="pointer"}),this.expertiseTags.forEach((e,t)=>{e.addEventListener("click",e=>this.handleExpertiseTagClick(e,t)),e.style.cursor="pointer"});document.querySelectorAll(".impact-item").forEach((e,t)=>{e.addEventListener("mouseenter",e=>this.handleImpactItemHover(e,t,"enter")),e.addEventListener("mouseleave",e=>this.handleImpactItemHover(e,t,"leave"))})}setupIntersectionObserver(){this.animationObserver=new IntersectionObserver(this.handleIntersection,{threshold:.2,rootMargin:"0px 0px -50px 0px"});[this.introBanner,document.querySelector(".advisors-showcase"),this.statsSection,this.impactSection].filter(Boolean).forEach(e=>{this.animationObserver.observe(e)})}setupAnimations(){this.advisorCards.forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease"}),this.impactSection&&(this.impactSection.style.opacity="0",this.impactSection.style.transform="translateY(20px)",this.impactSection.style.transition="opacity 0.6s ease, transform 0.6s ease")}handleIntersection(e){e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.classList.contains("advisors-intro-banner")?this.animateIntroBanner():t.classList.contains("advisors-showcase")?this.animateAdvisorCards():t.classList.contains("advisors-stats-inline")?this.animateStats():t.classList.contains("advisors-impact")&&this.animateImpactSection(),this.animationObserver.unobserve(t)}})}animateIntroBanner(){const e=this.introBanner,t=document.querySelectorAll(".advisors-stats-inline .inline-stat");e&&(e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.8s ease, transform 0.8s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100)),t.forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.5s ease, transform 0.5s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},600+100*t)})}animateAdvisorCards(){this.advisorCards.forEach((e,t)=>{setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},150*t)})}animateStats(){if(this.statsAnimated)return;this.statsAnimated=!0;document.querySelectorAll(".advisors-stats-inline .stat-number").forEach((e,t)=>{const i=e.textContent;if(i.includes("+")){const t=parseInt(i);this.countUp(e,0,t,1e3,"+")}else if(!isNaN(parseInt(i))){const t=parseInt(i);this.countUp(e,0,t,800,"")}})}animateImpactSection(){document.querySelectorAll(".impact-item").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},100*t)}),this.impactSection&&setTimeout(()=>{this.impactSection.style.opacity="1",this.impactSection.style.transform="translateY(0)"},200)}countUp(e,t,i,n,a=""){const s=performance.now(),r=o=>{const c=o-s,l=Math.min(c/n,1),h=1-Math.pow(1-l,3),d=Math.floor(t+(i-t)*h);e.textContent=d+a,l<1&&requestAnimationFrame(r)};requestAnimationFrame(r)}handleCardClick(e,t){const i=e.currentTarget,n=i.querySelector("h3").textContent,a=i.querySelector(".advisor-role").textContent;i.style.transform="translateY(-8px) scale(0.98)",setTimeout(()=>{i.style.transform="translateY(-8px) scale(1.02)"},150),this.showAdvisorDetails({name:n,role:a,index:t})}handleExpertiseTagClick(e,t){const i=e.currentTarget,n=i.textContent.trim();i.style.transform="scale(0.95)",setTimeout(()=>{i.style.transform="scale(1)"},150),this.showExpertiseInfo(n,i)}handleImpactItemHover(e,t,i){const n=e.currentTarget,a=n.querySelector(".impact-icon");"enter"===i?(a&&(a.style.transform="scale(1.1) rotate(5deg)",a.style.boxShadow="0 8px 20px rgba(var(--color-accent-rgb-values), 0.3)"),n.style.boxShadow="\n                0 12px 30px rgba(var(--color-accent-rgb-values), 0.15),\n                0 0 0 1px rgba(var(--color-accent-rgb-values), 0.1)\n            "):"leave"===i&&(a&&(a.style.transform="scale(1) rotate(0deg)",a.style.boxShadow=""),n.style.boxShadow="")}showAdvisorDetails(e){const t=document.createElement("div");t.className="advisor-notification",t.innerHTML=`\n            <div class="notification-content">\n                <div class="notification-header">\n                    <h4>${e.name}</h4>\n                    <button class="close-notification">×</button>\n                </div>\n                <p class="notification-role">${e.role}</p>\n                <p class="notification-message">Click to learn more about our distinguished advisor's contributions to scientific research.</p>\n            </div>\n        `,Object.assign(t.style,{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, var(--color-accent-primary), var(--color-accent-secondary))",color:"white",padding:"1.5rem",borderRadius:"16px",zIndex:"1000",opacity:"0",transform:"translateX(100%)",transition:"opacity 0.3s ease, transform 0.3s ease",maxWidth:"350px",boxShadow:"0 12px 30px rgba(0, 0, 0, 0.2)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"}),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateX(0)"});const i=t.querySelector(".close-notification");i.addEventListener("click",()=>{t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)}),setTimeout(()=>{t.parentNode&&i.click()},4e3)}showExpertiseInfo(e,t){const i=document.createElement("div");i.className="expertise-tooltip",i.textContent=this.getExpertiseDescription(e),Object.assign(i.style,{position:"absolute",background:"var(--color-accent-primary)",color:"white",padding:"0.75rem 1rem",borderRadius:"12px",fontSize:"0.9rem",zIndex:"1000",opacity:"0",transform:"translateY(10px)",transition:"opacity 0.3s ease, transform 0.3s ease",pointerEvents:"none",maxWidth:"250px",textAlign:"center",boxShadow:"0 8px 20px rgba(var(--color-accent-rgb-values), 0.3)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"});const n=t.getBoundingClientRect();i.style.left=`${n.left+n.width/2}px`,i.style.top=`${n.bottom+10}px`,i.style.transform="translateX(-50%) translateY(10px)",document.body.appendChild(i),requestAnimationFrame(()=>{i.style.opacity="1",i.style.transform="translateX(-50%) translateY(0)"}),setTimeout(()=>{i.style.opacity="0",i.style.transform="translateX(-50%) translateY(-10px)",setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300)},2500)}getExpertiseDescription(e){return{"Polymer Chemistry":"Advanced study of large molecules and their applications in sustainable materials","Biodegradable Materials":"Development of materials that naturally decompose without environmental harm",Sustainability:"Focus on environmentally responsible and resource-efficient practices","Materials Chemistry":"Research into the chemical properties and applications of various materials","Energy Systems":"Development of efficient and sustainable energy solutions","Industry Bridge":"Connecting academic research with practical industrial applications","Organic Chemistry":"Study of carbon-based compounds and their reactions","Bio-Catalysis":"Use of biological catalysts to accelerate chemical reactions",Biomaterials:"Materials designed to interact with biological systems","Water Management":"Sustainable approaches to water resource conservation and treatment","Sustainable Agriculture":"Farming practices that maintain environmental health","Environmental Science":"Interdisciplinary study of environmental problems and solutions"}[e]||"Specialized expertise in cutting-edge scientific research"}refresh(){this.isInitialized&&(this.destroy(),this.init())}destroy(){this.animationObserver&&(this.animationObserver.disconnect(),this.animationObserver=null),this.advisorCards.forEach(e=>{e.removeEventListener("click",this.handleCardClick)}),this.expertiseTags.forEach(e=>{e.removeEventListener("click",this.handleExpertiseTagClick)}),this.isInitialized=!1}getTotalAdvisors(){return this.advisorCards.length}getAdvisorByIndex(e){const t=this.advisorCards[e];return t?{name:t.querySelector("h3").textContent,role:t.querySelector(".advisor-role").textContent,description:t.querySelector(".advisor-description").textContent,expertise:Array.from(t.querySelectorAll(".expertise-tag")).map(e=>e.textContent)}:null}highlightExpertise(e){this.advisorCards.forEach(t=>{const i=t.querySelectorAll(".expertise-tag");Array.from(i).some(t=>t.textContent.toLowerCase().includes(e.toLowerCase()))&&(t.style.boxShadow="0 0 20px rgba(var(--color-accent-rgb-values), 0.4)",setTimeout(()=>{t.style.boxShadow=""},2e3))})}triggerAnimations(){this.statsSection&&this.isInViewport(this.statsSection)&&this.animateStats()}isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}}class es{constructor(){this.uiAnimations=new m,this.errorHandler=new Wa,this.isHomepage=document.body.classList.contains("homepage"),this.isProductPage=document.body.classList.contains("products-page")||window.location.pathname.includes("products"),this.navigationStateManager=new Ua,this.assetLoadingManager=new C,this.cacheManager=new w,this.performanceManager=new Ba({assetLoadingManager:this.assetLoadingManager,cacheManager:this.cacheManager,loadingStateManager:new b}),this.adaptiveLoadingManager=new Ga({assetLoadingManager:this.assetLoadingManager,cacheManager:this.cacheManager,performanceManager:this.performanceManager}),this.modernThemeManager=new g,this.isHomepage?this.modernCursorEffects=new Qa:this.modernCursorEffects=null,this.isHomepage?(this.heroLoader=new T("#hero-loader"),this.enhancedHeroBanner=new p("#homepage-hero"),this.journeyManager=new Fa(".journey-timeline","/journey.jsonl"),this.productsRedesigned=new Ja,this.teamModernized=new Za,this.advisorsModernized=new Ka):(this.heroLoader=null,this.enhancedHeroBanner=null,this.teamManager=null,this.journeyManager=null,this.productsRedesigned=null,this.teamModernized=null,this.advisorsModernized=null),this.isProductPage?(this.productManager=new f(this.uiAnimations),this.contactManager=new Xa,this.productGalleries=new Map):(this.productManager=null,this.contactManager=null,this.productGalleries=null),this.scrollAnimations=new za}async init(){await this.performanceManager.init(),Va.init(),this.initAdaptiveLoading(),await this.initStrategicPreloading(),await this.initSmartHeroLoader(),await this.finalizeIntegration(),this.showMainContent()}initAdaptiveLoading(){window.addEventListener("networkConditionChange",e=>{this.handleNetworkConditionChange(e.detail)}),window.addEventListener("adaptiveStrategyChange",e=>{this.applyAdaptiveStrategy(e.detail)}),navigator.connection&&navigator.connection.saveData&&this.adaptiveLoadingManager.setQualityPreference("low")}handleNetworkConditionChange(e){const t=document.getElementById("network-status");if(t&&(t.textContent=`Network: ${e.effectiveType}`,"slow-2g"===e.effectiveType||"2g"===e.effectiveType?t.classList.add("slow-connection"):t.classList.remove("slow-connection")),this.assetLoadingManager){this.getTimeoutForNetworkType(e.effectiveType)}}applyAdaptiveStrategy(e){this.productGalleries&&this.productGalleries.forEach(t=>{t.setImageQuality&&t.setImageQuality(e.imageQuality)}),"minimal"===e.strategy||"reduced"===e.strategy?(this.uiAnimations&&"function"==typeof this.uiAnimations.setReducedMotion&&this.uiAnimations.setReducedMotion(!0),this.scrollAnimations&&"function"==typeof this.scrollAnimations.setReducedMotion&&this.scrollAnimations.setReducedMotion(!0)):(this.uiAnimations&&"function"==typeof this.uiAnimations.setReducedMotion&&this.uiAnimations.setReducedMotion(!1),this.scrollAnimations&&"function"==typeof this.scrollAnimations.setReducedMotion&&this.scrollAnimations.setReducedMotion(!1)),window.dispatchEvent(new CustomEvent("appAdaptiveStrategyApplied",{detail:e}))}getTimeoutForNetworkType(e){switch(e){case"slow-2g":return 1e4;case"2g":return 8e3;case"3g":default:return 5e3;case"4g":return 3e3}}async initSmartHeroLoader(){const e=this.navigationStateManager.getNavigationContext(),t=this.navigationStateManager.shouldSkipLoader();this.updateNavigationAssetStates();const i=this.makeHeroLoaderDecision(e,t);if(this.isHomepage&&this.heroLoader&&i.shouldShow)try{this.navigationStateManager.preservePageContext({heroLoaderActive:!0,loadingStartTime:Date.now(),loaderDecision:i}),await this.optimizeHeroLoaderForContext(e),await this.heroLoader.start(),this.navigationStateManager.updateAssetState("hero-loader","completed")}catch(n){this.handleHeroLoaderFailure(n)}else this.hideHeroLoader(),this.isHomepage&&await this.ensureHomepageAssetsLoaded(),this.navigationStateManager.updateAssetState("hero-loader","skipped"),this.navigationStateManager.preservePageContext({heroLoaderSkipped:!0,skipReason:i.reasoning,assetsPreloaded:this.isHomepage})}makeHeroLoaderDecision(e,t){const{navigationMethod:i,currentPage:n,previousPage:a,assetsRequired:s,cacheStatus:r}=e,o={isHomepage:this.isHomepage,hasHeroLoader:!!this.heroLoader,navigationMethod:i,basicSkipRecommendation:t,assetsCached:this.areRequiredAssetsCached(s,r),isRecentReturn:this.isRecentReturnToHomepage(e),networkConditions:this.getNetworkConditions()};let c=!1,l=[];return o.isHomepage&&o.hasHeroLoader?("direct"===o.navigationMethod?(c=!0,l.push("Direct access to homepage - showing loader for branding")):"link"===o.navigationMethod||"back"===o.navigationMethod?o.basicSkipRecommendation?(c=!1,l.push("Basic skip recommendation (likely intra-page navigation) - skipping loader")):o.assetsCached&&o.isRecentReturn?(c=!1,l.push("Recent return with cached assets - skipping for performance")):o.networkConditions.isSlowConnection?(c=!1,l.push("Slow network detected - skipping to improve UX")):(c=!0,l.push("Internal navigation but showing optimized loader")):"forward"===o.navigationMethod?(c=!1,l.push("Forward navigation - skipping loader")):(c=!o.basicSkipRecommendation,l.push(`Unknown navigation method (${o.navigationMethod}) - using basic recommendation`)),{shouldShow:c,reasoning:l.join("; "),factors:o,optimizations:c?this.getLoaderOptimizations(o):null}):(l.push("Not homepage or HeroLoader not available"),{shouldShow:!1,reasoning:l.join("; "),factors:o})}areRequiredAssetsCached(e,t){if(!e||0===e.length)return!1;return e.filter(e=>{const i=t[e];return"cached"===i||"likely_cached"===i}).length/e.length>=.7}isRecentReturnToHomepage(e){const t=this.navigationStateManager.getNavigationStats();if(t.pageTypeStats.homepage>0&&t.navigationHistory){const e=t.navigationHistory.reverse().find(e=>e.to&&"homepage"===e.to.type);if(e){return Date.now()-e.timestamp<6e5}}return!1}getNetworkConditions(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{isSlowConnection:!!e&&("slow-2g"===e.effectiveType||"2g"===e.effectiveType),effectiveType:e?.effectiveType||"unknown",downlink:e?.downlink||null,rtt:e?.rtt||null}}getLoaderOptimizations(e){const t={skipIntro:!1,reducedAnimations:!1,fastTransition:!1,preloadOnly:!1};return"link"!==e.navigationMethod&&"back"!==e.navigationMethod||(t.skipIntro=!0,t.fastTransition=!0),e.networkConditions.isSlowConnection&&(t.reducedAnimations=!0,t.fastTransition=!0),e.assetsCached&&(t.preloadOnly=!0),t}async optimizeHeroLoaderForContext(e){if(!this.heroLoader)return;const t=this.makeHeroLoaderDecision(e,!1).optimizations;if(t){if(this.heroLoader.setOptimizations&&this.heroLoader.setOptimizations(t),t.preloadOnly)try{await this.assetLoadingManager.preloadCriticalAssets()}catch(i){}t.reducedAnimations&&this.heroLoader.setAnimationMode&&this.heroLoader.setAnimationMode("reduced"),t.fastTransition&&this.heroLoader.setTransitionSpeed&&this.heroLoader.setTransitionSpeed("fast")}}updateNavigationAssetStates(){if(this.assetLoadingManager){const e=this.assetLoadingManager.getAssetState?.("logo")||"unknown";this.navigationStateManager.updateAssetState("logo",e)}["hero-images","3d-models","team-data","journey-data"].forEach(e=>{const t=this.estimateAssetState(e);this.navigationStateManager.updateAssetState(e,t)})}estimateAssetState(e){if(this.assetLoadingManager&&this.assetLoadingManager.isCached&&this.assetLoadingManager.isCached(e))return"cached";return this.navigationStateManager.getNavigationStats().pageTypeStats.homepage>0&&"logo"===e?"likely_cached":"unknown"}handleHeroLoaderFailure(e){this.errorHandler?.handleJavaScriptError(e,{component:"App",method:"initSmartHeroLoader",context:"HeroLoader failure"}),this.hideHeroLoader(),this.navigationStateManager.preservePageContext({heroLoaderFailed:!0,failureReason:e.message,fallbackUsed:!0})}hideHeroLoader(){const e=document.getElementById("hero-loader");e&&(e.style.display="none")}async ensureHomepageAssetsLoaded(){try{if(this.assetLoadingManager){await this.assetLoadingManager.preloadCriticalAssets()}await T.preloadLogos()}catch(e){}}async initStrategicPreloading(){try{await this.assetLoadingManager.preloadCriticalAssets();await this.assetLoadingManager.warmCache(),this.startPatternBasedPreloading(),this.startPriorityBasedPreloading()}catch(e){try{await T.preloadLogos()}catch(t){}}}async startPatternBasedPreloading(){setTimeout(async()=>{try{await this.assetLoadingManager.preloadBasedOnPatterns()}catch(e){}},2e3)}async startPriorityBasedPreloading(){setTimeout(async()=>{try{const e=this.isHomepage?3:2;await this.assetLoadingManager.preloadByPriority(e)}catch(e){}},4e3)}showMainContent(){const e=document.getElementById("main-container");e&&(e.style.display="block",this.uiAnimations.init(),requestAnimationFrame(async()=>{if(this.isHomepage){this.enhancedHeroBanner;const e=[];this.journeyManager&&e.push(this.journeyManager.loadAndDisplayJourney()),this.teamManager&&e.push(this.teamManager.loadAndDisplayTeam()),await Promise.all(e)}this.isProductPage&&await this.initProductPageComponents(),this.scrollAnimations.init(),this.isHomepage&&(this.journeyManager?.hasLoaded&&this.scrollAnimations.initJourneyTimelineAnimations(),this.teamManager?.hasLoaded&&this.scrollAnimations.initTeamAutoScroll(),this.productsRedesigned&&this.productsRedesigned.init(),this.teamModernized&&this.teamModernized.init(),this.advisorsModernized&&this.advisorsModernized.init());const e=document.getElementById("current-year");e&&(e.textContent=(new Date).getFullYear())}))}async initProductPageComponents(){try{this.productManager&&this.productManager.init(),this.contactManager&&this.contactManager.init(),await this.initProductImageGalleries(),this.setupProductPageEventListeners(),this.optimizeProductPageBundle()}catch(e){this.errorHandler.handleJavaScriptError(e,{component:"App",method:"initProductPageComponents"}),this.initProductPageFallback()}}async initProductImageGalleries(){const e=document.querySelectorAll(".product-image-carousel-enhanced");for(const i of e)try{const e=new $a(i,{autoPlay:!1,showThumbnails:!0,enableKeyboard:!0,enableTouch:!0,transitionDuration:.6}),t=i.closest(".product-card-enhanced"),n=t?.dataset.product||`gallery-${this.productGalleries.size}`;this.productGalleries.set(n,e)}catch(t){this.errorHandler.logError("Gallery Initialization Failed",{container:i.className,error:t.message})}}setupProductPageEventListeners(){window.addEventListener("productContactClick",e=>{this.contactManager&&this.contactManager.handleProductInquiry(e.detail)}),window.addEventListener("productCTAClick",e=>{this.trackProductInteraction("cta_click",e.detail)}),window.addEventListener("accordionToggle",e=>{this.trackProductInteraction("accordion_toggle",e.detail)}),window.addEventListener("imageLoaded",e=>{}),window.addEventListener("imageLoadFailed",e=>{this.errorHandler.logError("Product Image Load Failed",e.detail)}),window.addEventListener("performanceOptimization",e=>{this.handlePerformanceOptimization(e.detail)}),window.addEventListener("networkRestored",()=>{this.productGalleries.forEach(e=>{e.retryFailedImages&&e.retryFailedImages()})})}trackProductInteraction(e,t){Date.now(),window.location.pathname;window.gtag&&window.gtag("event",e,{event_category:"product_interaction",event_label:t.productId||t.productName,value:1})}handlePerformanceOptimization(e){const{type:t,value:i}=e;switch(t){case"lcp":this.optimizeLCP();break;case"fid":this.optimizeFID();break;case"cls":this.optimizeCLS()}}optimizeLCP(){document.querySelectorAll(".product-image-carousel-enhanced img:first-child").forEach(e=>{if(!e.complete&&e.src){const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e.src,document.head.appendChild(t)}})}optimizeFID(){document.querySelectorAll("script:not([data-critical])").forEach(e=>{e.defer||e.async||(e.defer=!0)})}optimizeCLS(){document.querySelectorAll(".product-image-carousel-enhanced img").forEach(e=>{e.hasAttribute("width")&&e.hasAttribute("height")||(e.setAttribute("width","400"),e.setAttribute("height","300"),e.style.aspectRatio="4/3")})}optimizeProductPageBundle(){this.removeUnusedCSS(),this.optimizeImageLoading(),this.enableCodeSplitting()}removeUnusedCSS(){const e=new Set;document.querySelectorAll("*").forEach(t=>{t.classList.forEach(t=>{e.add(t)})})}optimizeImageLoading(){document.querySelectorAll(".product-image-carousel-enhanced img").forEach(e=>{e.hasAttribute("loading")||e.setAttribute("loading","lazy"),e.hasAttribute("decoding")||e.setAttribute("decoding","async")})}enableCodeSplitting(){window}initProductPageFallback(){try{document.querySelectorAll(".product-card-enhanced").forEach((e,t)=>{e.querySelectorAll(".contact-button").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform="scale(1)"},100)})});e.querySelectorAll(".accordion-header").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling,i="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!i),t.style.display=i?"none":"block"})})})}catch(e){this.errorHandler.logError("Product Page Fallback Failed",{error:e.message,stack:e.stack})}}cleanup(){this.productGalleries&&(this.productGalleries.forEach(e=>{e.cleanup&&e.cleanup()}),this.productGalleries.clear()),this.productManager&&this.productManager.cleanup(),this.contactManager&&this.contactManager.cleanup(),this.performanceManager&&this.performanceManager.cleanup(),this.assetLoadingManager&&this.assetLoadingManager.cleanup(),this.navigationStateManager&&this.navigationStateManager.reset();["productContactClick","productCTAClick","accordionToggle","imageLoaded","imageLoadFailed","performanceOptimization","networkRestored"].forEach(e=>{window.removeEventListener(e,this[`handle${e}`])})}getProductManager(){return this.productManager}getContactManager(){return this.contactManager}getPerformanceMetrics(){return{performance:this.performanceManager?.getMetrics(),products:this.productManager?.getPerformanceMetrics(),galleries:Array.from(this.productGalleries?.values()||[]).map(e=>({currentIndex:e.getCurrentIndex?.(),totalImages:e.getTotalImages?.()})),assetLoading:this.assetLoadingManager?.getStats()}}getPreloadingStats(){return this.assetLoadingManager?.getStats()||{assetLoading:{message:"Asset loading manager not initialized"},cacheManager:{message:"Cache manager not available"},assetPreloader:{message:"Asset preloader not available"},loadingState:{message:"Loading state manager not available"}}}async finalizeIntegration(){try{await this.optimizeLoadingManagers(),this.applyCrossBrowserFixes(),this.implementFinalOptimizations(),this.setupProductionMonitoring()}catch(e){this.errorHandler?.handleJavaScriptError(e,{component:"App",method:"finalizeIntegration"})}}async optimizeLoadingManagers(){if(this.assetLoadingManager&&(this.assetLoadingManager.optimize(),this.assetLoadingManager.maxRetries=2,this.assetLoadingManager.baseRetryDelay=500),this.cacheManager&&(this.cacheManager.optimize(),this.cacheManager.maxCacheSize=30,this.cacheManager.maxCacheMemory=31457280),this.navigationStateManager){const e=this.navigationStateManager.getNavigationStats();e.navigationHistory&&e.navigationHistory.length>5&&(e.navigationHistory=e.navigationHistory.slice(-5))}this.loadingStateManager&&setInterval(()=>{this.loadingStateManager.getAllStates().filter(e=>Date.now()-e.timestamp>3e5).forEach(e=>{this.loadingStateManager.clearLoadingState(e.assetId)})},6e4)}applyCrossBrowserFixes(){this.isSafari()&&this.applySafariFixes(),this.isFirefox()&&this.applyFirefoxFixes(),this.isEdge()&&this.applyEdgeFixes(),this.isMobile()&&this.applyMobileFixes(),this.applyGeneralCompatibilityFixes()}applySafariFixes(){if(this.assetLoadingManager){const e=this.assetLoadingManager.loadSingleAsset.bind(this.assetLoadingManager);this.assetLoadingManager.loadSingleAsset=async function(t,i={}){const n=new URL(t,window.location.origin);return n.searchParams.set("_safari_cache_bust",Date.now().toString()),e(n.toString(),i)}}window.IntersectionObserver&&!this.isSafariOld()||this.implementIntersectionObserverPolyfill()}applyFirefoxFixes(){if(this.assetLoadingManager){const e=this.assetLoadingManager.loadSingleAsset.bind(this.assetLoadingManager);this.assetLoadingManager.loadSingleAsset=async function(t,i={}){return void 0===i.crossOrigin&&(i.crossOrigin="anonymous"),e(t,i)}}}applyEdgeFixes(){window.Promise.allSettled||this.implementPromiseAllSettledPolyfill(),this.isEdgeLegacy()&&this.implementFetchPolyfill()}applyMobileFixes(){this.cacheManager&&(this.cacheManager.maxCacheSize=15,this.cacheManager.maxCacheMemory=15728640),this.optimizeTouchInteractions(),this.handleMobileNetworkConditions()}applyGeneralCompatibilityFixes(){window.requestIdleCallback||(window.requestIdleCallback=function(e,t={}){const i=t.timeout||0;return setTimeout(()=>{const t=Date.now();e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})},i)},window.cancelIdleCallback=function(e){clearTimeout(e)}),window.ResizeObserver||this.implementResizeObserverPolyfill()}implementFinalOptimizations(){this.optimizeEventListeners(),this.implementResourceHints(),this.optimizeBundleLoading(),this.implementPerformanceMonitoring()}optimizeEventListeners(){const e=["scroll","touchstart","touchmove","wheel"];let t;e.forEach(t=>{const i=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(t,n,a){return e.includes(t)&&"object"!=typeof a?a={passive:!0}:"object"==typeof a&&void 0===a.passive&&(a.passive=!0),i.call(this,t,n,a)}});const i=window.onresize;window.onresize=function(e){clearTimeout(t),t=setTimeout(()=>{i&&i.call(this,e)},100)}}implementResourceHints(){const e=document.head;["//fonts.googleapis.com","//fonts.gstatic.com","//cdn.jsdelivr.net"].forEach(t=>{const i=document.createElement("link");i.rel="dns-prefetch",i.href=t,e.appendChild(i)});["https://fonts.googleapis.com","https://fonts.gstatic.com"].forEach(t=>{const i=document.createElement("link");i.rel="preconnect",i.href=t,i.crossOrigin="anonymous",e.appendChild(i)})}optimizeBundleLoading(){["./src/js/LoadingStateManager.js","./src/js/AssetLoadingManager.js","./src/js/NavigationStateManager.js"].forEach(e=>{const t=document.createElement("link");t.rel="modulepreload",t.href=e,document.head.appendChild(t)}),this.implementLazyModuleLoading()}implementLazyModuleLoading(){const e={ProductImageGallery:()=>v(()=>Promise.resolve().then(()=>ja),[]),JourneyManager:()=>v(()=>Promise.resolve().then(()=>Oa),void 0)};this.lazyComponents=e,this.isHomepage?requestIdleCallback(()=>{e.JourneyManager()}):this.isProductPage&&requestIdleCallback(()=>{e.ProductImageGallery()})}implementPerformanceMonitoring(){this.monitorCoreWebVitals(),this.monitorLoadingPerformance(),this.monitorErrorRates()}monitorCoreWebVitals(){if("PerformanceObserver"in window){new PerformanceObserver(e=>{const t=e.getEntries(),i=t[t.length-1];window.gtag&&window.gtag("event","web_vitals",{event_category:"performance",event_label:"LCP",value:Math.round(i.startTime)})}).observe({entryTypes:["largest-contentful-paint"]})}if("PerformanceObserver"in window){new PerformanceObserver(e=>{e.getEntries().forEach(e=>{window.gtag&&window.gtag("event","web_vitals",{event_category:"performance",event_label:"FID",value:Math.round(e.processingStart-e.startTime)})})}).observe({entryTypes:["first-input"]})}}monitorLoadingPerformance(){if(this.assetLoadingManager){const e=this.assetLoadingManager.loadAssetWithRetry.bind(this.assetLoadingManager);this.assetLoadingManager.loadAssetWithRetry=async function(t,i={}){const n=performance.now();try{const n=await e(t,i);performance.now();return n}catch(a){performance.now();throw a}}}}monitorErrorRates(){let e=0;window.addEventListener("error",t=>{e++,e>=5&&this.handleHighErrorRate()}),setInterval(()=>{e=0},6e4)}handleHighErrorRate(){this.assetLoadingManager&&(this.assetLoadingManager.maxRetries=1,this.assetLoadingManager.baseRetryDelay=100),this.uiAnimations&&this.uiAnimations.setReducedMotion(!0),this.cacheManager&&this.cacheManager.optimize()}setupProductionMonitoring(){window.addEventListener("unhandledrejection",e=>{this.errorHandler&&this.errorHandler.handleJavaScriptError(e.reason,{component:"Global",method:"unhandledrejection",context:"Promise rejection"})}),"memory"in performance&&setInterval(()=>{const e=performance.memory,t=e.usedJSHeapSize;e.totalJSHeapSize;t/e.jsHeapSizeLimit*100>80&&this.performMemoryCleanup()},3e4)}performMemoryCleanup(){if(this.cacheManager&&this.cacheManager.optimize(),this.loadingStateManager){this.loadingStateManager.getAllStates().filter(e=>Date.now()-e.timestamp>12e4).forEach(e=>{this.loadingStateManager.clearLoadingState(e.assetId)})}if(this.navigationStateManager){const e=this.navigationStateManager.getNavigationStats();e.navigationHistory&&e.navigationHistory.length>3&&(e.navigationHistory=e.navigationHistory.slice(-3))}window.gc&&window.gc()}isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}isSafariOld(){const e=navigator.userAgent.match(/Version\/(\d+)/);return this.isSafari()&&e&&parseInt(e[1])<12}isFirefox(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}isEdge(){return navigator.userAgent.indexOf("Edg")>-1}isEdgeLegacy(){return navigator.userAgent.indexOf("Edge")>-1}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}implementIntersectionObserverPolyfill(){window.IntersectionObserver||(window.IntersectionObserver=class{constructor(e){this.callback=e}observe(){}unobserve(){}disconnect(){}})}implementPromiseAllSettledPolyfill(){Promise.allSettled||(Promise.allSettled=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))})}implementFetchPolyfill(){window.fetch}implementResizeObserverPolyfill(){window.ResizeObserver||(window.ResizeObserver=class{constructor(e){this.callback=e}observe(){}unobserve(){}disconnect(){}})}optimizeTouchInteractions(){document.addEventListener("touchstart",function(){},{passive:!0}),document.addEventListener("touchmove",function(){},{passive:!0})}handleMobileNetworkConditions(){if(navigator.connection){const e=navigator.connection;"slow-2g"!==e.effectiveType&&"2g"!==e.effectiveType||this.adaptiveLoadingManager&&this.adaptiveLoadingManager.setQualityPreference("low")}}getFrequentlyAccessedAssets(e=10){return this.assetLoadingManager?.getFrequentlyAccessed(e)||[]}optimizeAssetLoading(){this.assetLoadingManager&&this.assetLoadingManager.optimize()}getNavigationStats(){return this.navigationStateManager?{navigationStats:this.navigationStateManager.getNavigationStats(),currentContext:this.navigationStateManager.getNavigationContext(),preservedContext:this.navigationStateManager.getPreservedContext()}:{error:"NavigationStateManager not initialized"}}getNavigationStateManager(){return this.navigationStateManager}}export{es as A,Xa as C,Wa as E,L as H,Qa as M,$a as P,v as _};
